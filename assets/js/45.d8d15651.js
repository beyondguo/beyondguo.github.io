(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{412:function(e,t,s){"use strict";s.r(t);var a=s(44),v=Object(a.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"【随时记录】linux命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#【随时记录】linux命令"}},[e._v("#")]),e._v(" 【随时记录】Linux命令")]),e._v(" "),s("p",[e._v("笔者之前学习linux时候，学得七窍生烟。现在七窍通了六窍，一窍不通。\nlinux命令看了又忘，每次都令人抓狂，因此决定在此记录一些最常用的命令，和一些最基本的概念。")]),e._v(" "),s("h3",{attrs:{id:"目录与层级"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#目录与层级"}},[e._v("#")]),e._v(" 目录与层级")]),e._v(" "),s("p",[e._v("linux的目录层次可参考：\nhttps://www.cnblogs.com/silence-hust/p/4319415.html")]),e._v(" "),s("p",[s("code",[e._v("ls")]),e._v("列出当前文件夹中的所有文件名称\n"),s("code",[e._v("cd [folder_name]")]),e._v("进入某个文件夹\n"),s("code",[e._v("cd ..")]),e._v("回到上一级目录")]),e._v(" "),s("p",[e._v("这里我就一直有一个问题搞不懂：\n进入linux系统的时候，我的目录是：\n"),s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/beyondguo/mdnice_pictures/2021-6-25/1624615810953-image.png",alt:""}})]),e._v(" "),s("p",[e._v("我一直以为这是根目录，但是后来在反复的"),s("code",[e._v("cd ..")]),e._v("后，发现自己进入了这个目录：")]),e._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/beyondguo/mdnice_pictures/2021-6-25/1624615818372-image.png",alt:""}})]),e._v(" "),s("p",[e._v("一下子把我搞懵了。\n后来查了查，才发现，"),s("code",[e._v("～")]),e._v("是我们用户的目录，一个系统可能会有多个用户，当前用户的目录就是"),s("code",[e._v("～")]),e._v("。而系统根目录是"),s("code",[e._v("/")]),e._v("。")]),e._v(" "),s("p",[e._v("要回到用户的目录，只需要输入"),s("code",[e._v("cd ～")]),e._v("即可；\n要访问根目录，也是只需要输入"),s("code",[e._v("cd /")]),e._v("即可。")]),e._v(" "),s("p",[s("strong",[e._v("Linux系统上传文件到linux服务器，不能通过rz命令，因为需要端支持，如Xshell")]),e._v("\n此时，应该使用"),s("code",[e._v("scp")]),e._v("命令：\n例如：")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("scp -r /media/x1c/文档/Jupyter/--NLP/big_things/w2v/GoogleNews-vectors-negative300.bin root@202.121.138.168:/root/Documents/gby2019/wvmodels\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[e._v("即：\n"),s("code",[e._v("scp -r 本地文件地址 username@hostname:服务器目标地址")])]),e._v(" "),s("p",[e._v("这个命令还可以上传"),s("strong",[e._v("文件夹")]),e._v("！")]),e._v(" "),s("p",[e._v("如果反过来，想把服务器上的文件传到本地，则把服务器地址和本地地址颠倒过来即可：\n"),s("code",[e._v("scp -r username@hostname:服务器文件地址 本地目标地址")])]),e._v(" "),s("p",[s("strong",[e._v("确认有可用CUDA的gpu：")]),e._v(" "),s("code",[e._v("lspci | grep -i nvidia")])]),e._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/beyondguo/mdnice_pictures/2021-6-25/1624615831415-image.png",alt:""}})]),e._v(" "),s("p",[s("strong",[e._v("查看系统信息:")]),e._v(" "),s("code",[e._v("uname -m && cat /etc/*release")])]),e._v(" "),s("p",[s("strong",[e._v("修改文件、目录权限")]),e._v(" "),s("code",[e._v("sudo chmod -R 777 /home/gby/Documents")]),e._v("\n777代表权限模式，不用具体管，反正777就是最大的权限了。")]),e._v(" "),s("h3",{attrs:{id:"查看磁盘占用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查看磁盘占用"}},[e._v("#")]),e._v(" 查看磁盘占用")]),e._v(" "),s("p",[s("code",[e._v("df -h")]),e._v(" "),s("code",[e._v("du -h")]),e._v("\nhttps://www.runoob.com/w3cnote/linux-view-disk-space.html")]),e._v(" "),s("h3",{attrs:{id:"vim"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vim"}},[e._v("#")]),e._v(" Vim")]),e._v(" "),s("p",[e._v("https://www.runoob.com/linux/linux-vim.html")]),e._v(" "),s("h4",{attrs:{id:"vim的粘贴模式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vim的粘贴模式"}},[e._v("#")]),e._v(" vim的粘贴模式")]),e._v(" "),s("p",[s("code",[e._v(":set paste")]),e._v("\nhttps://blog.csdn.net/wzy_1988/article/details/50264285?depth_1-utm_source=distribute.pc_relevant.none-task&utm_source=distribute.pc_relevant.none-task")]),e._v(" "),s("h4",{attrs:{id:"vim全选-全复制-全删除"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vim全选-全复制-全删除"}},[e._v("#")]),e._v(" vim全选，全复制，全删除")]),e._v(" "),s("p",[s("code",[e._v("ggvGd")]),e._v("\nhttps://blog.csdn.net/ztf312/article/details/83025297")]),e._v(" "),s("h3",{attrs:{id:"让程序后台运行-不随中断终端"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#让程序后台运行-不随中断终端"}},[e._v("#")]),e._v(" 让程序后台运行，不随中断终端")]),e._v(" "),s("p",[s("code",[e._v("nohup 命令 &")])]),e._v(" "),s("h3",{attrs:{id:"查看后台运行的所有程序"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查看后台运行的所有程序"}},[e._v("#")]),e._v(" 查看后台运行的所有程序")]),e._v(" "),s("p",[s("code",[e._v("ps x")]),e._v("\n通过"),s("code",[e._v("grep")]),e._v("则可以进一步搜索具体的进程，xxx就写想查的进程中包含的字符\n"),s("code",[e._v("ps -aux | grep xxx")])]),e._v(" "),s("h3",{attrs:{id:"查看cpu实时使用情况"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查看cpu实时使用情况"}},[e._v("#")]),e._v(" 查看cpu实时使用情况")]),e._v(" "),s("p",[s("code",[e._v("top")])]),e._v(" "),s("h3",{attrs:{id:"tail命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tail命令"}},[e._v("#")]),e._v(" tail命令")]),e._v(" "),s("p",[s("code",[e._v("tail")]),e._v(" 命令可用于查看文件的内容，有一个常用的参数"),s("code",[e._v("-f")]),e._v("常用于查阅正在改变的日志文件。")]),e._v(" "),s("p",[s("code",[e._v("tail -f filename")]),e._v(" 会把 filename 文件里的最尾部的内容显示在屏幕上，并且不断刷新，只要 filename 更新就可以看到最新的文件内容。\n这个时候，对应目录会生成一个"),s("code",[e._v("nohup.out")]),e._v("的文件，可以在里面看到后台程序运行时的一些日志。")]),e._v(" "),s("h3",{attrs:{id:"压缩-解压"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#压缩-解压"}},[e._v("#")]),e._v(" 压缩/解压")]),e._v(" "),s("ul",[s("li",[e._v("zip打包文件夹：zip -r 打包后的名字 要打包的文件/文件夹")]),e._v(" "),s("li",[e._v("解压.gz文件：(https://linuxize.com/post/how-to-unzip-gz-file/)\n"),s("code",[e._v("gzip -d file.gz")]),e._v(" (The command will restore the compressed file to its original state and remove the "),s("code",[e._v(".gz")]),e._v(" file.)\n"),s("code",[e._v("gzip -dk file.gz")]),e._v(" (To keep the compressed file pass the "),s("code",[e._v("-k")]),e._v(" option to the command:)")])]),e._v(" "),s("h3",{attrs:{id:"生成项目的python依赖"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#生成项目的python依赖"}},[e._v("#")]),e._v(" 生成项目的python依赖")]),e._v(" "),s("p",[e._v("pip install pipreqs\n使用的时候也很简单，进入项目的根目录\npipreqs ./")]),e._v(" "),s("h3",{attrs:{id:"可以显示进度的文件传输"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#可以显示进度的文件传输"}},[e._v("#")]),e._v(" 可以显示进度的文件传输")]),e._v(" "),s("p",[s("code",[e._v("rsync --progress 文件路径 ~/")])]),e._v(" "),s("h3",{attrs:{id:"screen命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#screen命令"}},[e._v("#")]),e._v(" Screen命令")]),e._v(" "),s("p",[e._v("通过"),s("code",[e._v("apt-get update")]),e._v(" 和"),s("code",[e._v("apt-get install screen")]),e._v("安装")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("sudo apt-get update\nsudo apt-get install screen\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br")])]),s("p",[e._v("创建新screen："),s("code",[e._v("screen -S screen_name")])]),e._v(" "),s("p",[e._v("查看所有的screen："),s("code",[e._v("screen -ls")])]),e._v(" "),s("p",[e._v("退出当前screen（程序继续运行）：按Ctrl+a+d三个键")]),e._v(" "),s("p",[e._v("有时候忘记在哪里开了某个screen，导致直接 screen -r无法进入，可以使用 "),s("code",[e._v("screen -d name/id")]),e._v("来先把那个screen退出，就可以进去，放心这不会kill那个screen")]),e._v(" "),s("p",[e._v("关闭（kill）某个screen：进入之后，输入exit即可")]),e._v(" "),s("p",[e._v("重新进入某个screen："),s("code",[e._v("screen -r screen_name/screen_id")])]),e._v(" "),s("p",[e._v("更多的一些例子参见：https://www.cnblogs.com/mchina/archive/2013/01/30/2880680.html")]),e._v(" "),s("p",[s("strong",[e._v("这个挺好")]),e._v("：https://www.liquidweb.com/kb/how-to-use-the-screen-command-in-linux/")]),e._v(" "),s("p",[e._v("在screen模式下进行"),s("strong",[e._v("上下滚动")]),e._v("：先同时按CTRL+A键，然后再按esc，就可以滚动了。要退出滚动，就再esc一下。")]),e._v(" "),s("h3",{attrs:{id:"ps-和-kill"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ps-和-kill"}},[e._v("#")]),e._v(" ps 和 kill")]),e._v(" "),s("p",[e._v("查看后台程序 "),s("code",[e._v("ps -x")])]),e._v(" "),s("p",[e._v('后面还可以加一些筛选，比如查询后台所有包含 "beyond"的程序：')]),e._v(" "),s("p",[s("code",[e._v("ps -x | grep beyond")])]),e._v(" "),s("p",[e._v("kill命令，除了直接"),s("code",[e._v("kill [PID]")]),e._v("之外，还可以按照名字来kill一大批：")]),e._v(" "),s("p",[s("code",[e._v("pkill -f *beyond*")]),e._v(" 就会把所有名字里包含beyond的程序都关掉。")]),e._v(" "),s("h3",{attrs:{id:"conda-environment"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#conda-environment"}},[e._v("#")]),e._v(" conda environment")]),e._v(" "),s("p",[e._v("创建环境（直接拷贝现有环境）：")]),e._v(" "),s("p",[s("code",[e._v("conda create -n your_env_name --clone some_other_env")])]),e._v(" "),s("p",[e._v("创建全新环境，并指定python版本：")]),e._v(" "),s("p",[s("code",[e._v("conda create -n your_env_name python=3.8")])]),e._v(" "),s("p",[e._v("删除某环境:")]),e._v(" "),s("p",[s("code",[e._v("conda env remove -n your_env_name")])]),e._v(" "),s("h3",{attrs:{id:"cuda"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cuda"}},[e._v("#")]),e._v(" CUDA")]),e._v(" "),s("p",[e._v("check cuda version:  "),s("code",[e._v("nvcc --version")])]),e._v(" "),s("p",[e._v("运行程序时指定CUDA device：")]),e._v(" "),s("p",[e._v("① 在命令行指定：")]),e._v(" "),s("p",[s("code",[e._v("CUDA_VISIBLE_DEVICES=1 python my_script.py")])]),e._v(" "),s("p",[e._v("② 在程序内设定：")]),e._v(" "),s("div",{staticClass:"language-python line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("import")]),e._v(" os\nos"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("environ"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"CUDA_VISIBLE_DEVICES"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"2"')]),e._v("\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br")])]),s("p",[e._v("或者对于torch：")]),e._v(" "),s("div",{staticClass:"language-python line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("import")]),e._v(" torch\ntorch"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("cuda"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("set_device"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[e._v("id")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br")])]),s("h3",{attrs:{id:"文件访问权限"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#文件访问权限"}},[e._v("#")]),e._v(" 文件访问权限")]),e._v(" "),s("p",[e._v("例如对于私钥，你要设置成只有你自己可读：")]),e._v(" "),s("p",[e._v("Keys need to be only readable by you:")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("chmod 400 ~/.ssh/id_rsa\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[e._v("If Keys need to be read-writable by you:")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("chmod 600 ~/.ssh/id_rsa\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[e._v("最高权限: "),s("code",[e._v("chmod 777")])]),e._v(" "),s("h3",{attrs:{id:"jupyter"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#jupyter"}},[e._v("#")]),e._v(" jupyter")]),e._v(" "),s("p",[e._v("发现需要密码的话，可以通过这个命令设置自己的密码，不需要之前的密码是啥：")]),e._v(" "),s("p",[s("code",[e._v("jupyter notebook password")])]),e._v(" "),s("h2",{attrs:{id:"下载google-drive文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#下载google-drive文件"}},[e._v("#")]),e._v(" 下载Google Drive文件")]),e._v(" "),s("p",[s("code",[e._v("pip install gdown")])]),e._v(" "),s("p",[s("code",[e._v("gdown <file_id>")])]),e._v(" "),s("p",[e._v("file_id的位置，一般在分享链接的这里："),s("code",[e._v("https://drive.google.com/file/d/<file_id>/view?usp=sharing")])]),e._v(" "),s("h2",{attrs:{id:"环境变量"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#环境变量"}},[e._v("#")]),e._v(" 环境变量")]),e._v(" "),s("p",[e._v("https://www.baeldung.com/linux/path-variable")]),e._v(" "),s("p",[e._v("To append a new path, we reassign PATH with the "),s("strong",[e._v("new path at the end")]),e._v(":")]),e._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("export")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s("span",{pre:!0,attrs:{class:"token environment constant"}},[e._v("PATH")])]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),s("span",{pre:!0,attrs:{class:"token environment constant"}},[e._v("$PATH")]),e._v(":/some/new/path\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[e._v("export PATH=$PATH:/home/v-biyangguo/.local/bin")]),e._v(" "),s("h2",{attrs:{id:"查看python位置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查看python位置"}},[e._v("#")]),e._v(" 查看python位置")]),e._v(" "),s("p",[e._v("查看所有python路径：")]),e._v(" "),s("p",[s("code",[e._v("whereis python")])]),e._v(" "),s("p",[e._v("查看当前用的哪个python：")]),e._v(" "),s("p",[s("code",[e._v("which python")])]),e._v(" "),s("h2",{attrs:{id:"打包python环境依赖"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#打包python环境依赖"}},[e._v("#")]),e._v(" 打包python环境依赖")]),e._v(" "),s("p",[e._v("https://towardsdatascience.com/stop-using-pip-freeze-for-your-python-projects-9c37181730f9")]),e._v(" "),s("p",[e._v("使用"),s("code",[e._v("pipreqs")]),e._v("包:")]),e._v(" "),s("p",[s("code",[e._v("pip install pipreqs")])]),e._v(" "),s("p",[e._v("然后直接在你的project目录下执行"),s("code",[e._v("**pipreqs**")]),e._v("即可得到requirements.txt。这个比使用"),s("code",[e._v("pip freeze > requirements.txt")]),e._v("的方式更好，详情见连接。")])])}),[],!1,null,null,null);t.default=v.exports}}]);