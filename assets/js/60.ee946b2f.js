(window.webpackJsonp=window.webpackJsonp||[]).push([[60],{428:function(s,t,a){"use strict";a.r(t);var n=a(44),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("blockquote",[a("p",[a("strong",[s._v("ã€ŒHuggingfaceğŸ¤—NLPç¬”è®°ç³»åˆ—-ç¬¬3é›†ã€")]),s._v("\næœ€è¿‘è·Ÿç€Huggingfaceä¸Šçš„NLP tutorialèµ°äº†ä¸€éï¼ŒæƒŠå¹å±…ç„¶æœ‰å¦‚æ­¤å¥½çš„è®²è§£Transformersç³»åˆ—çš„NLPæ•™ç¨‹ï¼Œäºæ˜¯å†³å®šè®°å½•ä¸€ä¸‹å­¦ä¹ çš„è¿‡ç¨‹ï¼Œåˆ†äº«æˆ‘çš„ç¬”è®°ï¼Œå¯ä»¥ç®—æ˜¯å®˜æ–¹æ•™ç¨‹çš„ç²¾ç®€ç‰ˆã€‚ä½†æœ€æ¨èçš„ï¼Œè¿˜æ˜¯ç›´æ¥è·Ÿç€å®˜æ–¹æ•™ç¨‹æ¥ä¸€éï¼ŒçœŸæ˜¯ä¸€ç§äº«å—ã€‚")])]),s._v(" "),a("ul",[a("li",[s._v("å®˜æ–¹æ•™ç¨‹ç½‘å€ï¼šhttps://huggingface.co/course/chapter1")]),s._v(" "),a("li",[s._v("æœ¬æœŸå†…å®¹å¯¹åº”ç½‘å€ï¼šhttps://huggingface.co/course/chapter2/2?fw=pt")]),s._v(" "),a("li",[s._v("æœ¬ç³»åˆ—ç¬”è®°çš„"),a("strong",[s._v("GitHub")]),s._v("ï¼š https://github.com/beyondguo/Learn_PyTorch/tree/master/HuggingfaceNLP")])]),s._v(" "),a("hr"),s._v(" "),a("h1",{attrs:{id:"pipelineç«¯åˆ°ç«¯çš„èƒŒåå‘ç”Ÿäº†ä»€ä¹ˆ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pipelineç«¯åˆ°ç«¯çš„èƒŒåå‘ç”Ÿäº†ä»€ä¹ˆ"}},[s._v("#")]),s._v(" Pipelineç«¯åˆ°ç«¯çš„èƒŒåå‘ç”Ÿäº†ä»€ä¹ˆ")]),s._v(" "),a("p",[s._v("Pipelineçš„èƒŒåï¼š\n"),a("img",{attrs:{src:"https://huggingface.co/course/static/chapter2/full_nlp_pipeline.png",width:"1000"}})]),s._v(" "),a("h2",{attrs:{id:"_1-tokenizer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-tokenizer"}},[s._v("#")]),s._v(" 1. Tokenizer")]),s._v(" "),a("p",[s._v("æˆ‘ä»¬ä½¿ç”¨çš„tokenizerå¿…é¡»è·Ÿå¯¹åº”çš„æ¨¡å‹åœ¨é¢„è®­ç»ƒæ—¶çš„tokenizerä¿æŒä¸€è‡´ï¼Œä¹Ÿå°±æ˜¯è¯è¡¨éœ€è¦ä¸€è‡´ã€‚"),a("br"),s._v("\nHuggingfaceä¸­å¯ä»¥ç›´æ¥æŒ‡å®šæ¨¡å‹çš„checkpointçš„åå­—ï¼Œç„¶åè‡ªåŠ¨ä¸‹è½½å¯¹åº”çš„è¯è¡¨ã€‚"),a("br"),s._v("\nå…·ä½“æ–¹å¼æ˜¯ï¼š")]),s._v(" "),a("ul",[a("li",[s._v("ä½¿ç”¨"),a("code",[s._v("AutoTokenizer")]),s._v("çš„"),a("code",[s._v("from_pretrained")]),s._v("æ–¹æ³•")])]),s._v(" "),a("p",[a("code",[s._v("tokenizer")]),s._v("è¿™ä¸ªå¯¹è±¡å¯ä»¥ç›´æ¥æ¥å—å‚æ•°å¹¶è¾“å‡ºç»“æœï¼Œå³å®ƒæ˜¯callableçš„ã€‚å…·ä½“å‚æ•°è§ï¼š"),a("br"),s._v("\nhttps://huggingface.co/transformers/master/internal/tokenization_utils.html#transformers.tokenization_utils_base.PreTrainedTokenizerBase "),a("br"),s._v("\nä¸»è¦å‚æ•°åŒ…æ‹¬ï¼š")]),s._v(" "),a("ul",[a("li",[s._v("textï¼Œå¯ä»¥æ˜¯å•æ¡çš„stringï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªstringçš„listï¼Œè¿˜å¯ä»¥æ˜¯listçš„list")]),s._v(" "),a("li",[s._v("paddingï¼Œç”¨äºå¡«ç™½")]),s._v(" "),a("li",[s._v("truncationï¼Œç”¨äºæˆªæ–­")]),s._v(" "),a("li",[s._v("max_lengthï¼Œè®¾ç½®æœ€å¤§å¥é•¿")]),s._v(" "),a("li",[s._v("return_tensorsï¼Œè®¾ç½®è¿”å›æ•°æ®ç±»å‹")])]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" transformers "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" AutoTokenizer\n\ncheckpoint "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'distilbert-base-uncased-finetuned-sst-2-english'")]),s._v("\ntokenizer "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" AutoTokenizer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("from_pretrained"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("checkpoint"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("å…ˆçœ‹çœ‹ç›´æ¥ä½¿ç”¨tokenizerçš„ç»“æœï¼š")]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[s._v("raw_inputs "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Today is a good day! Woo~~~'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n              "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'How about tomorrow?'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\ntokenizer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("raw_inputs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("è¾“å‡ºï¼š")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'input_ids'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("101")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2651")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2003")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1037")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2204")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2154")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("999")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15854")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1066")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1066")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1066")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("102")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("101")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2129")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2055")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4826")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1029")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("102")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'attention_mask'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("å¯ä»¥åŠ ä¸Šä¸€ä¸ª "),a("code",[s._v("padding=Ture")]),s._v(" å‚æ•°ï¼Œè®©å¾—åˆ°çš„åºåˆ—é•¿åº¦å¯¹é½ï¼š")]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[s._v("tokenizer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("raw_inputs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" padding"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("True")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("è¾“å‡ºï¼š")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'input_ids'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("101")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2651")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2003")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1037")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2204")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2154")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("999")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15854")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1066")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1066")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1066")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("102")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("101")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2129")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2055")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4826")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1029")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("102")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'attention_mask'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("tokenizerè¿˜æœ‰"),a("code",[s._v("truncation")]),s._v("å’Œ"),a("code",[s._v("max_length")]),s._v("å±æ€§ï¼Œç”¨äºåœ¨max_lengthå¤„æˆªæ–­ï¼š")]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[s._v("tokenizer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("raw_inputs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" padding"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("True")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" truncation"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("True")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" max_length"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("è¾“å‡ºï¼š")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'input_ids'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("101")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2651")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2003")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1037")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2204")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2154")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("102")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("101")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2129")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2055")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4826")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1029")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("102")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'attention_mask'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("code",[s._v("return_tensors")]),s._v("å±æ€§ä¹Ÿå¾ˆé‡è¦ï¼Œç”¨æ¥æŒ‡å®šè¿”å›çš„æ˜¯ä»€ä¹ˆç±»å‹çš„tensorsï¼Œ"),a("code",[s._v("pt")]),s._v("å°±æ˜¯pytorchï¼Œ"),a("code",[s._v("tf")]),s._v("å°±æ˜¯tensorflowï¼š")]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[s._v("tokenizer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("raw_inputs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" padding"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("True")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" truncation"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("True")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" return_tensors"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'pt'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("è¾“å‡ºï¼š")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'input_ids'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" tensor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("101")]),s._v(",  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2651")]),s._v(",  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2003")]),s._v(",  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1037")]),s._v(",  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2204")]),s._v(",  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2154")]),s._v(",   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("999")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15854")]),s._v(",  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1066")]),s._v(",  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1066")]),s._v(",\n          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1066")]),s._v(",   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("102")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("101")]),s._v(",  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2129")]),s._v(",  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2055")]),s._v(",  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4826")]),s._v(",  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1029")]),s._v(",   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("102")]),s._v(",     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(",     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(",     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(",     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(",\n             "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(",     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'attention_mask'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" tensor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h2",{attrs:{id:"_2-model"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-model"}},[s._v("#")]),s._v(" 2. Model")]),s._v(" "),a("p",[s._v("ä¹Ÿå¯ä»¥é€šè¿‡AutoModelæ¥ç›´æ¥ä»checkpointå¯¼å…¥æ¨¡å‹ã€‚")]),s._v(" "),a("p",[s._v("è¿™é‡Œå¯¼å…¥çš„æ¨¡å‹ï¼Œæ˜¯Transformerçš„åŸºç¡€æ¨¡å‹ï¼Œæ¥å—tokenizeä¹‹åçš„è¾“å…¥ï¼Œ"),a("strong",[s._v("è¾“å‡ºhidden statesï¼Œå³æ–‡æœ¬çš„å‘é‡è¡¨ç¤º")]),s._v("ï¼Œæ˜¯ä¸€ç§ä¸Šä¸‹æ–‡è¡¨ç¤ºã€‚")]),s._v(" "),a("p",[s._v("è¿™ä¸ªå‘é‡è¡¨ç¤ºï¼Œä¼šæœ‰ä¸‰ä¸ªç»´åº¦ï¼š")]),s._v(" "),a("ol",[a("li",[s._v("batch size")]),s._v(" "),a("li",[s._v("sequence length")]),s._v(" "),a("li",[s._v("hidden size")])]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" transformers "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" AutoModel\nmodel "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" AutoModel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("from_pretrained"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("checkpoint"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("åŠ è½½äº†æ¨¡å‹ä¹‹åï¼Œå°±å¯ä»¥æŠŠtokenizerå¾—åˆ°çš„è¾“å‡ºï¼Œç›´æ¥è¾“å…¥åˆ°modelä¸­ï¼š")]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[s._v("inputs "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" tokenizer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("raw_inputs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" padding"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("True")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" truncation"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("True")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" return_tensors"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'pt'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\noutputs "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" model"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("**")]),s._v("inputs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# è¿™é‡Œå˜é‡å‰é¢çš„**ï¼Œä»£è¡¨æŠŠinputsè¿™ä¸ªdictionaryç»™åˆ†è§£æˆä¸€ä¸ªä¸ªå‚æ•°å•ç‹¬è¾“è¿›å»")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("vars")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("outputs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("keys"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æŸ¥çœ‹ä¸€ä¸‹è¾“å‡ºæœ‰å“ªäº›å±æ€§")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("è¾“å‡ºï¼š")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("dict_keys"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'last_hidden_state'")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'hidden_states'")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'attentions'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("blockquote",[a("p",[a("strong",[s._v("è¿™é‡Œé¡ºä¾¿è®²ä¸€è®²è¿™ä¸ªå‡½æ•°ä¸­"),a("code",[s._v("**")]),s._v("çš„ç”¨æ³•ï¼š")])])]),s._v(" "),a("p",[a("code",[s._v("**")]),s._v("åœ¨å‡½æ•°ä¸­çš„ä½œç”¨å°±æ˜¯æŠŠåé¢ç´§è·Ÿç€çš„è¿™ä¸ªå‚æ•°ï¼Œä»ä¸€ä¸ªå­—å…¸çš„æ ¼å¼ï¼Œè§£å‹æˆä¸€ä¸ªä¸ªå•ç‹¬çš„å‚æ•°ã€‚")]),s._v(" "),a("p",[s._v("å›é¡¾ä¸€ä¸‹ä¸Šé¢tokenizerçš„è¾“å‡ºï¼Œæˆ‘ä»¬å‘ç°å®ƒæ˜¯ä¸€ä¸ªåŒ…å«äº†input_idså’Œattention_maskä¸¤ä¸ªkeyçš„"),a("strong",[s._v("å­—å…¸")]),s._v("ï¼Œå› æ­¤é€šè¿‡"),a("code",[s._v("**")]),s._v("çš„è§£å‹ï¼Œç›¸å½“äºå˜æˆäº†"),a("code",[s._v("intput_ids=..., attention_mask=...")]),s._v("å–‚ç»™å‡½æ•°ã€‚")]),s._v(" "),a("p",[s._v("æˆ‘ä»¬å†æ¥æŸ¥çœ‹ä¸€ä¸‹é€šè¿‡AutoModelåŠ è½½çš„DistillBertModelæ¨¡å‹çš„è¾“å…¥ï¼š\nhttps://huggingface.co/transformers/master/model_doc/distilbert.html#distilbertmodel")]),s._v(" "),a("p",[s._v("å¯ä»¥çœ‹åˆ°DistillBertModelçš„ç›´æ¥callçš„å‡½æ•°æ˜¯ï¼š")]),s._v(" "),a("p",[a("code",[s._v("forward(input_ids=None, attention_mask=None, ...)")]),s._v("\næ­£å¥½è·Ÿ"),a("code",[s._v("**inputs")]),s._v("åçš„æ ¼å¼å¯¹åº”ä¸Šã€‚")]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("outputs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("last_hidden_state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("shape"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\noutputs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("last_hidden_state\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("è¾“å‡º")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("torch.Size"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("768")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n    tensor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.4627")]),s._v(",  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.3042")]),s._v(",  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.5431")]),s._v(",  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".,  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.3706")]),s._v(",  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0033")]),s._v(", -0.6074"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",\n             "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.6100")]),s._v(",  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.3093")]),s._v(",  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.2038")]),s._v(",  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".,  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.3788")]),s._v(",  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.9370")]),s._v(", -0.6439"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",\n             "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.6514")]),s._v(",  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.3185")]),s._v(",  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.3855")]),s._v(",  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".,  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.4152")]),s._v(",  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0199")]),s._v(", -0.4450"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",\n             "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".,\n             "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.3674")]),s._v(",  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.1380")]),s._v(",  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.1619")]),s._v(",  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".,  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.4976")]),s._v(",  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.4758")]),s._v(", -0.5896"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",\n             "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.4182")]),s._v(",  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.2503")]),s._v(",  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0898")]),s._v(",  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".,  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.4745")]),s._v(",  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.4042")]),s._v(", -0.5444"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",\n             "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.1614")]),s._v(",  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.2516")]),s._v(",  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.9561")]),s._v(",  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".,  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.5742")]),s._v(",  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.8437")]),s._v(", -0.9604"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",\n    \n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.7956")]),s._v(", -0.2343,  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.3810")]),s._v(",  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("., -0.1270,  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.5182")]),s._v(", -0.1612"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",\n             "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.9337")]),s._v(",  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.2074")]),s._v(",  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.6202")]),s._v(",  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".,  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.1874")]),s._v(",  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.6584")]),s._v(", -0.1899"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",\n             "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.6279")]),s._v(", -0.3176,  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.1596")]),s._v(",  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("., -0.2956,  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.2960")]),s._v(", -0.1447"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",\n             "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".,\n             "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.3050")]),s._v(",  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0396")]),s._v(",  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.6345")]),s._v(",  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".,  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.4271")]),s._v(",  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.3367")]),s._v(", -0.3285"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",\n             "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.1773")]),s._v(",  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0111")]),s._v(",  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.6275")]),s._v(",  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".,  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.3831")]),s._v(",  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.3543")]),s._v(", -0.2919"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",\n             "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.2756")]),s._v(",  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0048")]),s._v(",  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.9281")]),s._v(",  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".,  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.2006")]),s._v(",  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.4375")]),s._v(", -0.3238"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",\n           "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("grad_fn")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("NativeLayerNormBackward"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br")])]),a("p",[s._v("å¯ä»¥çœ‹åˆ°ï¼Œè¾“å‡ºçš„shapeæ˜¯"),a("code",[s._v("torch.Size([2, 12, 768])")]),s._v("ï¼Œä¸‰ä¸ªç»´åº¦åˆ†åˆ«æ˜¯ batchï¼Œseq_lenå’Œhidden sizeã€‚")]),s._v(" "),a("h2",{attrs:{id:"_3-model-heads"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-model-heads"}},[s._v("#")]),s._v(" 3. Model Heads")]),s._v(" "),a("p",[s._v("æ¨¡å‹å¤´ï¼Œæ¥åœ¨åŸºç¡€æ¨¡å‹çš„åé¢ï¼Œç”¨äºå°†hidden statesæ–‡æœ¬è¡¨ç¤ºè¿›ä¸€æ­¥å¤„ç†ï¼Œç”¨äºå…·ä½“çš„ä»»åŠ¡ã€‚")]),s._v(" "),a("p",[s._v("æ•´ä½“æ¡†æ¶å›¾ï¼š")]),s._v(" "),a("img",{attrs:{src:"https://huggingface.co/course/static/chapter2/transformer_and_head.png",width:"1000"}}),s._v(" "),a("p",[s._v("Headä¸€èˆ¬æ˜¯ç”±è‹¥å¹²å±‚çš„çº¿æ€§å±‚æ¥æ„æˆçš„ã€‚")]),s._v(" "),a("p",[s._v("Transformersåº“ä¸­çš„ä¸»è¦æ¨¡å‹æ¶æ„æœ‰ï¼š")]),s._v(" "),a("ul",[a("li",[s._v("*Model (retrieve the hidden states)")]),s._v(" "),a("li",[s._v("*ForCausalLM")]),s._v(" "),a("li",[s._v("*ForMaskedLM")]),s._v(" "),a("li",[s._v("*ForMultipleChoice")]),s._v(" "),a("li",[s._v("*ForQuestionAnswering")]),s._v(" "),a("li",[s._v("*ForSequenceClassification")]),s._v(" "),a("li",[s._v("*ForTokenClassification")]),s._v(" "),a("li",[s._v("...")])]),s._v(" "),a("p",[s._v("å•çº¯çš„"),a("code",[s._v("*Model")]),s._v("ï¼Œå°±æ˜¯ä¸åŒ…å« Head çš„æ¨¡å‹ï¼Œè€Œæœ‰"),a("code",[s._v("For*")]),s._v("çš„åˆ™æ˜¯åŒ…å«äº†å…·ä½“ Head çš„æ¨¡å‹ã€‚")]),s._v(" "),a("p",[s._v("ä¾‹å¦‚ï¼Œå¯¹äºå‰é¢çš„é‚£ä¸ªåšåœ¨æƒ…æ„Ÿåˆ†æä¸Špretrainçš„checkpoint(distilbert-base-uncased-finetuned-sst-2-english)ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨åŒ…å« SequenceClassification çš„Headçš„æ¨¡å‹å»åŠ è½½ï¼Œå°±å¯ä»¥ç›´æ¥å¾—åˆ°å¯¹åº”åˆ†ç±»é—®é¢˜çš„logitsï¼Œè€Œä¸ä»…ä»…æ˜¯æ–‡æœ¬å‘é‡è¡¨ç¤ºã€‚")]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" transformers "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" AutoModelForSequenceClassification\nclf "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" AutoModelForSequenceClassification"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("from_pretrained"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("checkpoint"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\ninputs "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" tokenizer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("raw_inputs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" padding"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("True")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" truncation"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("True")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" return_tensors"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'pt'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\noutputs "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" clf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("**")]),s._v("inputs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("vars")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("outputs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("keys"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\noutputs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("logits\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("è¾“å‡ºï¼š")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("dict_keys"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'loss'")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'logits'")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'hidden_states'")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'attentions'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\ntensor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-4.2098,  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.6444")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.6367")]),s._v(", -0.3753"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("grad_fn")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("AddmmBackward"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("ä»outputsçš„å±æ€§å°±å¯ä»¥çœ‹å‡ºï¼Œå¸¦æœ‰Headçš„Modelï¼Œè·Ÿä¸å¸¦Headçš„Modelï¼Œè¾“å‡ºçš„ä¸œè¥¿æ˜¯ä¸ä¸€æ ·çš„ã€‚")]),s._v(" "),a("p",[a("strong",[s._v("æ²¡æœ‰Headçš„Model")]),s._v("ï¼Œè¾“å‡ºçš„æ˜¯"),a("code",[s._v("'last_hidden_state', 'hidden_states', 'attentions'")]),s._v("è¿™äº›ç©æ„å„¿ï¼Œå› ä¸ºå®ƒä»…ä»…æ˜¯ä¸€ä¸ªè¡¨ç¤ºæ¨¡å‹ï¼›")]),s._v(" "),a("p",[a("strong",[s._v("æœ‰Headçš„Model")]),s._v("ï¼Œè¾“å‡ºçš„æ˜¯"),a("code",[s._v("'loss', 'logits', 'hidden_states', 'attentions'")]),s._v("è¿™äº›ç©æ„å„¿ï¼Œæœ‰logitsï¼Œlossè¿™äº›ä¸œè¥¿ï¼Œå› ä¸ºå®ƒæ˜¯ä¸€ä¸ªå®Œæ•´çš„é¢„æµ‹æ¨¡å‹äº†ã€‚")]),s._v(" "),a("p",[s._v("å¯ä»¥é¡ºä¾¿çœ‹çœ‹ï¼ŒåŠ äº†è¿™ä¸ª SequenceClassification Headçš„DistillBertModelçš„æ–‡æ¡£ï¼Œçœ‹çœ‹å…¶è¾“å…¥å’Œè¾“å‡ºï¼š")]),s._v(" "),a("p",[s._v("https://huggingface.co/transformers/master/model_doc/distilbert.html#distilbertforsequenceclassification")]),s._v(" "),a("p",[s._v("å¯ä»¥çœ‹åˆ°ï¼Œè¾“å…¥ä¸­ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æä¾›"),a("code",[s._v("labels")]),s._v("ï¼Œè¿™æ ·å°±å¯ä»¥ç›´æ¥è®¡ç®—lossäº†ã€‚")]),s._v(" "),a("h2",{attrs:{id:"_4-post-processing"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-post-processing"}},[s._v("#")]),s._v(" 4. Post-Processing")]),s._v(" "),a("p",[s._v("åå¤„ç†ä¸»è¦å°±æ˜¯ä¸¤æ­¥ï¼š")]),s._v(" "),a("ul",[a("li",[s._v("æŠŠlogitsè½¬åŒ–æˆæ¦‚ç‡å€¼ ï¼ˆç”¨softmaxï¼‰")]),s._v(" "),a("li",[s._v("æŠŠæ¦‚ç‡å€¼è·Ÿå…·ä½“çš„æ ‡ç­¾å¯¹åº”ä¸Š ï¼ˆä½¿ç”¨æ¨¡å‹çš„configä¸­çš„id2labelï¼‰")])]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" torch\npredictions "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" torch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("nn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("functional"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("softmax"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("outputs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("logits"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" dim"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# dim=-1å°±æ˜¯æ²¿ç€æœ€åä¸€ç»´è¿›è¡Œæ“ä½œ")]),s._v("\npredictions\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("è¾“å‡ºï¼š")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("tensor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".4276e-04, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(".9986e-01"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(".3341e-01, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(".6659e-01"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("grad_fn")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("SoftmaxBackward"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("å¾—åˆ°äº†æ¦‚ç‡åˆ†å¸ƒï¼Œè¿˜å¾—çŸ¥é“å…·ä½“æ˜¯å•¥æ ‡ç­¾å§ã€‚æ ‡ç­¾è·Ÿidçš„éšå°„å…³ç³»ï¼Œä¹Ÿå·²ç»è¢«ä¿å­˜åœ¨æ¯ä¸ªpretrain modelçš„configä¸­äº†ï¼Œ\næˆ‘ä»¬å¯ä»¥å»æ¨¡å‹çš„"),a("code",[s._v("config")]),s._v("å±æ€§ä¸­æŸ¥çœ‹"),a("code",[s._v("id2label")]),s._v("å­—æ®µï¼š")]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[s._v("id2label "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" clf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id2label\nid2label\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("è¾“å‡ºï¼š")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(": "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'NEGATIVE'")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(": "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'POSITIVE'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("ç»¼åˆèµ·æ¥ï¼Œç›´æ¥ä»predictionå¾—åˆ°æ ‡ç­¾ï¼š")]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" i "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" torch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("argmax"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("predictions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" dim"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("id2label"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("item"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("è¾“å‡ºï¼š")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("    POSITIVE\n    NEGATIVE\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])])}),[],!1,null,null,null);t.default=e.exports}}]);