(window.webpackJsonp=window.webpackJsonp||[]).push([[87],{458:function(t,s,a){"use strict";a.r(s);var i=a(44),e=Object(i.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"ã€Œè¯¾ä»£è¡¨æ¥äº†ã€è·Ÿææ²è¯»è®ºæ–‡ä¹‹transformer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ã€Œè¯¾ä»£è¡¨æ¥äº†ã€è·Ÿææ²è¯»è®ºæ–‡ä¹‹transformer"}},[t._v("#")]),t._v(" ã€Œè¯¾ä»£è¡¨æ¥äº†ã€è·Ÿææ²è¯»è®ºæ–‡ä¹‹Transformer")]),t._v(" "),a("blockquote",[a("p",[t._v("å¢™è£‚æ¨èæ²ç¥åœ¨Bä¸Šå¼€çš„ä¸€ç³»åˆ—å…¬å¼€è¯¾ï¼Œå°¤å…¶æ˜¯æœ€è¿‘å‡ºçš„â€œè®ºæ–‡ç²¾è¯»â€ç³»åˆ—ï¼ŒçœŸçš„è®²å¾—å¤ªå¥½äº†ã€‚å¯èƒ½å¾ˆå¤šç»å…¸è®ºæ–‡å’±ä»¬ä¹‹å‰ä¹Ÿè¯»è¿‡ï¼Œä½†æ˜¯å¬ææ²è€å¸ˆå†è®²ä¸€éï¼Œæˆ‘ä»¬åˆå¯ä»¥æ”¶è·å¾ˆå¤šæ–°çŸ¥è¯†ï¼Œå°¤å…¶æ˜¯ææ²è€å¸ˆç»“åˆè‡ªå·±ä¸°å¯Œçš„ç»éªŒåšå‡ºçš„å¾ˆå¤šç²¾å½©è¯„è®ºã€‚")]),t._v(" "),a("p",[t._v('æˆ‘ä¹Ÿæ…•åå»å¬äº†è¯¾ï¼Œç¬¬ä¸€å ‚è¯¾æˆ‘é€‰æ‹©å¬NLPç»å…¸è®ºæ–‡"Attention Is All You Need"ï¼Œè¾¹å¬è¾¹æ•´ç†äº†å¦‚ä¸‹ç¬”è®° ğŸ“’ ï¼Œæ–¹ä¾¿è‡ªå·±æ—¥åæŸ¥é˜…ï¼Œä¹Ÿåˆ†äº«ç»™å¤§å®¶ã€‚')])]),t._v(" "),a("blockquote",[a("p",[t._v("ææ²è€å¸ˆè¯»è®ºæ–‡çš„é¡ºåºä¸€èˆ¬æ˜¯è¿™æ ·çš„ï¼šæ ‡é¢˜+ä½œè€… > æ‘˜è¦ > å¯¼è¨€ > ç»“è®º > ç›¸å…³å·¥ä½œ > æ¨¡å‹è®¾è®¡ > å®éªŒï¼Œæœ€ååšä¸€ä¸ªæ€»è¯„ã€‚æˆ‘è¿™é‡Œä¹Ÿæ˜¯æŒ‰ç…§è¿™ä¸ªé¡ºåºè¿›è¡Œè®°å½•çš„ã€‚")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://gitee.com/beyond_guo/typora_pics/raw/master/typora/20211219131751.png",alt:""}})]),t._v(" "),a("h2",{attrs:{id:"æ ‡é¢˜-ä½œè€…"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ ‡é¢˜-ä½œè€…"}},[t._v("#")]),t._v(" æ ‡é¢˜+ä½œè€…")]),t._v(" "),a("p",[t._v("æ ‡é¢˜ï¼šAttention Is All You Need\nå‘è¡¨ï¼šNIPS2017\næœºæ„ï¼šGoogle")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://gitee.com/beyond_guo/typora_pics/raw/master/typora/20211219121954.png",alt:"image-20211219121954021"}})]),t._v(" "),a("blockquote",[a("p",[t._v("Comments by Li Mu: 8ä¸ªä½œè€…éƒ½æ˜¯å…±åŒè´¡çŒ®ï¼Œè¿™åœ¨è®¡ç®—æœºè®ºæ–‡ä¸­å¾ˆå°‘è§ã€‚ä½†æ˜¯ä¸ºäº†è§£é‡Šä¸ºä»€ä¹ˆæœ‰è¿™ä¹ˆå¤šå…±åŒä¸€ä½œï¼Œè®ºæ–‡åœ¨è„šæ³¨ä¸­æ¸…æ¥šäº†å†™æ˜äº†æ¯ä¸ªäººåœ¨è¿™ä¸ªå·¥ä½œä¸­çš„è´¡çŒ®ï¼Œç¡®å®å¤§å®¶éƒ½æ‹…å¾—ä¸Šâ€œå…±åŒè´¡çŒ®â€è¿™ä¸€è¯´ã€‚")])]),t._v(" "),a("h2",{attrs:{id:"æ‘˜è¦"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ‘˜è¦"}},[t._v("#")]),t._v(" æ‘˜è¦")]),t._v(" "),a("p",[t._v("èƒŒæ™¯æ˜¯æœºå™¨ç¿»è¯‘ã€encoder-decoderæ¡†æ¶ï¼Œè€Œä¸”ä¸€èˆ¬éƒ½ä¼šåœ¨ä¸­é—´ä½¿ç”¨Attentionæœºåˆ¶ã€‚")]),t._v(" "),a("p",[t._v("æœ¬æ–‡æå‡ºäº†ä¸€ä¸ªæ–°çš„ç®€å•çš„ç½‘ç»œæ¶æ„â€”â€”Transformerï¼Œå®Œå…¨åŸºäºattentionæœºåˆ¶ã€‚")]),t._v(" "),a("blockquote",[a("p",[t._v("Comments by Li Mu: è¿™æ˜¯ä¸ªå¥½åå­—ï¼Œè·Ÿâ€œå˜å½¢é‡‘åˆšâ€è¡¨è¾¾ç›¸åŒ")])]),t._v(" "),a("p",[t._v("è´¡çŒ®ï¼šç½‘ç»œç®€å•ï¼Œä¸”è·Ÿä¹‹å‰çš„ç½‘ç»œç»“æ„éƒ½ä¸ä¸€æ ·ï¼Œä¸ä½¿ç”¨rnnæˆ–cnnçš„å•å…ƒã€‚å¹¶è¡Œåº¦æ›´å¥½ï¼Œè®­ç»ƒå¿«å¾ˆå¤šã€‚åœ¨æœºå™¨ç¿»è¯‘ä¸Šå–å¾—äº†æ›´å¥½çš„æ•ˆæœã€‚")]),t._v(" "),a("blockquote",[a("p",[t._v("Comments by Li Mu: æœ€å¼€å§‹Transformeræ˜¯åœ¨æœºå™¨ç¿»è¯‘çš„èƒŒæ™¯ä¸Šæå‡ºçš„ï¼Œè¿™æ˜¯ä¸ªå°é¢†åŸŸï¼Œå› æ­¤å¯èƒ½æœ€åˆå¹¶æ²¡æœ‰æ”¶åˆ°å¹¿æ³›å…³æ³¨ã€‚åé¢Transformerå¼€å§‹åœ¨å„ç§å…¶ä»–é¢†åŸŸå¤§æ˜¾ç¥é€šï¼Œåˆ°æœ€è¿‘åœ¨visionä¸Šé¢ä¹Ÿè¡¨ç°ä¼˜å¼‚ï¼Œæ‰çœŸæ­£ç«å‡ºåœˆäº†")])]),t._v(" "),a("h2",{attrs:{id:"ç»“è®º"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç»“è®º"}},[t._v("#")]),t._v(" ç»“è®º")]),t._v(" "),a("p",[t._v("æœ¬æ–‡æå‡ºçš„Transformeræ˜¯ç¬¬ä¸€ä¸ªçº¯åŸºäºattentionçš„åºåˆ—è½¬å½•æ¨¡å‹ï¼Œä½¿ç”¨multi-head self-attentionæ›¿ä»£äº†ä¹‹å‰çš„rnnç»“æ„ã€‚")]),t._v(" "),a("p",[t._v("åœ¨æœºå™¨ç¿»è¯‘ä¸Šï¼Œæ¯”RNNå’ŒCNNéƒ½è¦å¿«ï¼Œè¿˜å–å¾—äº†æ–°çš„SOTAã€‚")]),t._v(" "),a("p",[t._v("ä½œè€…ä»¬å¯¹è¿™ç§çº¯attentionçš„æ¨¡å‹èƒ½å–å¾—è¿™ä¹ˆå¥½çš„æ•ˆæœæ„Ÿåˆ°éå¸¸æ¿€åŠ¨ã€‚å› æ­¤ä½œè€…ä»¬æœŸå¾…Transformerèƒ½åœ¨å…¶ä»–é¢†åŸŸï¼ˆCVï¼Œaudioç­‰ï¼‰å¤§æ”¾å¼‚å½©ã€‚")]),t._v(" "),a("blockquote",[a("p",[t._v("Comments by Li Mu: ä½œè€…åœ¨2017å¹´çš„æ—¶å€™å°±ä¸€å®šç¨‹åº¦ä¸Šé¢„æµ‹äº†æœªæ¥ã€‚å¦‚ä»ŠTransformerä¸å…‰æ¨ªæ‰«äº†NLPçš„å„ç§ä»»åŠ¡ï¼Œè¿˜åœ¨CVä¸Šä¹Ÿå–å¾—äº†æƒŠäººçš„æ•ˆæœã€‚")])]),t._v(" "),a("p",[t._v("æœ€åä»£ç å¼€æºåœ¨tensor2tensoråº“é‡Œé¢ã€‚")]),t._v(" "),a("blockquote",[a("p",[t._v("Comments by Li Mu: å…¶å®ä»£ç æœ€å¥½æ˜¯æ”¾åœ¨æ‘˜è¦çš„æœ€åä¸€å¥è¯ï¼Œè®©è¯»è€…å¯ä»¥ç¬¬ä¸€æ—¶é—´çœ‹åˆ°ä»£ç ã€‚")])]),t._v(" "),a("h2",{attrs:{id:"intro-å¯¼è¨€"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#intro-å¯¼è¨€"}},[t._v("#")]),t._v(" Introï¼ˆå¯¼è¨€ï¼‰")]),t._v(" "),a("p",[t._v("ä»‹ç»äº†ä¼ ç»Ÿçš„RNNï¼ŒCNNä»¥åŠencoder-decoderæ¶æ„ã€‚åˆ†æäº†RNNçš„ç¼ºç‚¹ï¼š1. éš¾ä»¥å¹¶è¡Œ 2. å®¹æ˜“é—å¿˜ã€‚å†ä»‹ç»äº†attentionæœºåˆ¶ã€‚æœ€åæå‡ºäº†ä¸€ä¸ªå…¨æ–°çš„æ¶æ„Transformerã€‚")]),t._v(" "),a("blockquote",[a("p",[t._v("Comments by Li Mu:  è¿™ä¸ªintroå¾ˆçŸ­ï¼Œä¸»è¦æ˜¯å†…å®¹æ¯”è¾ƒå¤šï¼Œè€ŒNIPSçš„ç¯‡å¹…è¾ƒçŸ­ã€‚")])]),t._v(" "),a("h2",{attrs:{id:"background-ç›¸å…³å·¥ä½œ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#background-ç›¸å…³å·¥ä½œ"}},[t._v("#")]),t._v(" Backgroundï¼ˆç›¸å…³å·¥ä½œï¼‰")]),t._v(" "),a("p",[t._v("ä¸ºäº†æé«˜å¯¹åºåˆ—æ•°æ®çš„è®¡ç®—æ•ˆç‡ï¼Œå¾ˆå¤šå·¥ä½œéƒ½ä½¿ç”¨å·ç§¯ç¥ç»ç½‘ç»œä½œä¸ºåŸºç¡€çš„building blockæ¥è¿›è¡Œæ¨¡å‹æ„å»ºï¼Œä»è€Œå®ç°å¹¶è¡Œçš„è®¡ç®—ã€‚ç„¶è€Œï¼ŒCNNæ˜¯é€šè¿‡æ»‘åŠ¨çª—å£æ¥æå–ç‰¹å¾ï¼Œæ‰€ä»¥å¯¹äºé•¿è·ç¦»çš„å…³ç³»è¾ƒéš¾æ•æ‰ã€‚ä½†CNNè¿˜æœ‰ä¸€ä¸ªä¼˜ç‚¹â€”â€”"),a("strong",[t._v("å¤šé€šé“æœºåˆ¶")]),t._v("ï¼Œä½¿å¾—æ¨¡å‹å¯ä»¥ä»å¤šä¸ªè§’åº¦å»æå–æ•°æ®çš„ç‰¹å¾ã€‚")]),t._v(" "),a("p",[t._v("æ‰€ä»¥"),a("strong",[t._v("Transformerå€Ÿç”¨äº†å¤šé€šé“çš„æ€æƒ³ï¼Œè®¾è®¡äº†å¤šå¤´çš„æ³¨æ„åŠ›æœºåˆ¶")]),t._v("ã€‚")]),t._v(" "),a("p",[t._v("å¦å¤–ï¼Œself-attentionä¸æ˜¯æœ¬å·¥ä½œæå‡ºäº†ï¼Œè€Œæ˜¯åœ¨æ›¾ç»çš„å¾ˆå¤šå·¥ä½œä¸­éƒ½è¢«æˆåŠŸåº”ç”¨äº†ã€‚")]),t._v(" "),a("h2",{attrs:{id:"æ¨¡å‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ¨¡å‹"}},[t._v("#")]),t._v(" æ¨¡å‹")]),t._v(" "),a("p",[t._v("åºåˆ—æ¨¡å‹ä¸­è¾ƒå¥½çš„æ˜¯encoder-decoderæ¶æ„ã€‚")]),t._v(" "),a("p",[t._v("è¦ç‚¹ï¼š")]),t._v(" "),a("ol",[a("li",[t._v("encoderæŠŠè¾“å…¥åºåˆ—å¤„ç†å¾—åˆ°ä¸­é—´è¡¨ç¤ºï¼Œç„¶ådecoderè¯»å…¥è¿™ä¸ªä¸­é—´è¡¨ç¤ºï¼Œå¤„ç†åå¾—åˆ°è¾“å‡ºåºåˆ—ï¼›")]),t._v(" "),a("li",[t._v("è¾“å…¥åºåˆ—å’Œè¾“å‡ºåºåˆ—ä¸ä¸€å®šä¸€æ ·é•¿ï¼›")]),t._v(" "),a("li",[t._v("decoderæ˜¯ä¸€ç§auto-regressiveçš„æ–¹å¼æ¥è¾“å‡ºçš„ï¼Œå³æ¯ä¸€æ­¥éƒ½ä¼šè¯»å…¥ä¸Šä¸€æ­¥çš„è¾“å‡ºã€‚")])]),t._v(" "),a("p",[t._v("Transformerä¾ç„¶æ˜¯ä¸€ä¸ªencoder-decoderçš„æ¶æ„ï¼Œä½†å®ƒä¸»è¦ç»„æˆæ˜¯"),a("strong",[t._v("self-attention")]),t._v("å’Œ"),a("strong",[t._v("point-wise fully connected layer")]),t._v("ï¼Œç»“æ„å¦‚ä¸‹ï¼š")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://gitee.com/beyond_guo/typora_pics/raw/master/typora/20211129211929.png",alt:"image-20211129211929634"}})]),t._v(" "),a("blockquote",[a("p",[t._v("Comments by Li Mu:  è¿™ä¸ªå›¾ç”»çš„å¾ˆå¥½ï¼Œåœ¨ç¥ç»ç½‘ç»œçš„æ—¶ä»£ï¼Œç”»å›¾æ˜¯ä¸€ä¸ªé‡è¦çš„æŠ€èƒ½ã€‚ç„¶è€Œè¿™ä¸ªå›¾å±äºé‚£ç§â€œä¸æ˜è§‰å‰â€çš„å›¾ï¼Œå¾ˆå¥½çœ‹ï¼Œä½†æ˜¯ä¸å®¹æ˜“çœ‹æ‡‚ã€‚")])]),t._v(" "),a("h3",{attrs:{id:"encoder"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#encoder"}},[t._v("#")]),t._v(" Encoder")]),t._v(" "),a("ul",[a("li",[t._v("Encoderç”±N=6ä¸ªä¸€æ¨¡ä¸€æ ·çš„å±‚ç»„æˆï¼›")]),t._v(" "),a("li",[t._v("æ¯ä¸ªå±‚ï¼ŒåŒ…å«2ä¸ªå­å±‚ï¼šâ‘ multi-head self-attention layerï¼Œâ‘¡position-wise fully connected feed-forward network ï¼ˆå°±æ˜¯ä¸ªMLPï¼‰ï¼›")]),t._v(" "),a("li",[t._v("æ¯ä¸ªå­å±‚ï¼Œéƒ½ä¼šä½¿ç”¨residual connectionå’Œlayer normæ¥å¤„ç†ï¼Œå­å±‚çš„è¾“å‡ºéƒ½å¯ä»¥è¡¨ç¤ºä¸ºï¼š"),a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[a("semantics",[a("mrow",[a("mi",[t._v("L")]),a("mi",[t._v("a")]),a("mi",[t._v("y")]),a("mi",[t._v("e")]),a("mi",[t._v("r")]),a("mi",[t._v("N")]),a("mi",[t._v("o")]),a("mi",[t._v("r")]),a("mi",[t._v("m")]),a("mo",{attrs:{stretchy:"false"}},[t._v("(")]),a("mi",[t._v("x")]),a("mo",[t._v("+")]),a("mi",[t._v("S")]),a("mi",[t._v("u")]),a("mi",[t._v("b")]),a("mi",[t._v("l")]),a("mi",[t._v("a")]),a("mi",[t._v("y")]),a("mi",[t._v("e")]),a("mi",[t._v("r")]),a("mo",{attrs:{stretchy:"false"}},[t._v("(")]),a("mi",[t._v("X")]),a("mo",{attrs:{stretchy:"false"}},[t._v(")")]),a("mo",{attrs:{stretchy:"false"}},[t._v(")")])],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[t._v("LayerNorm(x+Sublayer(X))")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"1em","vertical-align":"-0.25em"}}),a("span",{staticClass:"mord mathnormal"},[t._v("L")]),a("span",{staticClass:"mord mathnormal"},[t._v("a")]),a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.02778em"}},[t._v("yer")]),a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.10903em"}},[t._v("N")]),a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.02778em"}},[t._v("or")]),a("span",{staticClass:"mord mathnormal"},[t._v("m")]),a("span",{staticClass:"mopen"},[t._v("(")]),a("span",{staticClass:"mord mathnormal"},[t._v("x")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),a("span",{staticClass:"mbin"},[t._v("+")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}})]),a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"1em","vertical-align":"-0.25em"}}),a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.05764em"}},[t._v("S")]),a("span",{staticClass:"mord mathnormal"},[t._v("u")]),a("span",{staticClass:"mord mathnormal"},[t._v("b")]),a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.01968em"}},[t._v("l")]),a("span",{staticClass:"mord mathnormal"},[t._v("a")]),a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.02778em"}},[t._v("yer")]),a("span",{staticClass:"mopen"},[t._v("(")]),a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.07847em"}},[t._v("X")]),a("span",{staticClass:"mclose"},[t._v("))")])])])]),t._v("ï¼›")]),t._v(" "),a("li",[t._v("ä¸ºäº†æ–¹ä¾¿æ®‹å·®è¿æ¥ï¼Œä¸Šé¢æ‰€æœ‰çš„å±‚ã€åŒ…æ‹¬embeddingå±‚ï¼Œéƒ½ä½¿ç”¨d=512ä½œä¸ºè¾“å‡ºç»´åº¦ã€‚")])]),t._v(" "),a("blockquote",[a("p",[t._v("Comments by Li Mu:  æ€»ä¹‹ï¼ŒEncoderå°±ä¿©è¶…å‚æ•°ï¼šNå’Œdã€‚è¿™ç§è®¾è®¡ç›´æ¥å½±å“äº†åé¢å„ç§åŸºäºTransformerçš„æ¨¡å‹è®¾è®¡ï¼Œæ¯”å¦‚BERTï¼ŒGPTç­‰ç­‰ï¼Œéƒ½ä¸»è¦è°ƒèŠ‚è¿™ä¸¤ä¸ªå‚æ•°ã€‚")])]),t._v(" "),a("h4",{attrs:{id:"ã€Œæ’æ’­ã€æ²ç¥å°è¯¾å ‚-ä»€ä¹ˆæ˜¯layer-norm"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ã€Œæ’æ’­ã€æ²ç¥å°è¯¾å ‚-ä»€ä¹ˆæ˜¯layer-norm"}},[t._v("#")]),t._v(" ã€Œæ’æ’­ã€æ²ç¥å°è¯¾å ‚â€”â€”ä»€ä¹ˆæ˜¯Layer Normï¼š")]),t._v(" "),a("ul",[a("li",[t._v("Batch Normå°±æ˜¯æŠŠä¸€ä¸ªbatchçš„tensorï¼ŒæŒ‰ç…§featureçš„æ¯ä¸ªç»´åº¦ï¼ˆå³æŒ‰ç…§åˆ—ï¼‰å»è¿›è¡Œè§„èŒƒåŒ–ï¼ˆå‡å€¼0æ–¹å·®1ï¼‰")]),t._v(" "),a("li",[t._v("Layer Normåˆ™æ˜¯åœ¨batchå†…é€ä¸ªæ ·æœ¬å»åšè§„èŒƒåŒ–")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://gitee.com/beyond_guo/typora_pics/raw/master/typora/20211129220224.png",alt:"image-20211129220224178"}})]),t._v(" "),a("p",[t._v("æˆ‘ä»¬åœ¨åºåˆ—åŒ–æ•°æ®ä¸­æ›´å¸¸ä½¿ç”¨çš„æ˜¯Layer Normï¼Œå› ä¸ºåºåˆ—çš„é•¿åº¦ä¼šå˜åŒ–ï¼Œå¦‚æœä½¿ç”¨batch normçš„è¯ï¼Œå¯èƒ½å¯¼è‡´å‡å€¼æ–¹å·®æ³¢åŠ¨å¾ˆå¤§ï¼Œä»è€Œå½±å“æ•ˆæœï¼Œè€Œlayer normåˆ™æ˜¯é€ä¸ªæ ·æœ¬å»è¿›è¡Œçš„ï¼Œå°±ä¸ä¼šå—å½±å“ã€‚")]),t._v(" "),a("h3",{attrs:{id:"decoder"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#decoder"}},[t._v("#")]),t._v(" Decoder")]),t._v(" "),a("ul",[a("li",[t._v("è·ŸEncoderä¸€æ ·ç”±N=6ä¸ªä¸€æ¨¡ä¸€æ ·çš„å±‚æ„æˆï¼›")]),t._v(" "),a("li",[t._v("æ¯ä¸ªå±‚ï¼ŒåŒ…å«3ä¸ªå­å±‚ï¼Œç›¸æ¯”äºEncoderä¸­çš„è®¾è®¡ï¼Œå¤šäº†ä¸€ä¸ªmulti-head attention layerï¼›")]),t._v(" "),a("li",[t._v("ä¸ºäº†é˜²æ­¢Decoderåœ¨å¤„ç†æ—¶çœ‹åˆ°æœªæ¥çš„ä¿¡æ¯ï¼Œè¿™é‡Œå¯¹self-attentionåšäº†è¿›ä¸€æ­¥çš„å¤„ç†ï¼Œå³ä½¿ç”¨äº†ä¸€ä¸ª"),a("strong",[t._v("mask")]),t._v("æœºåˆ¶ï¼Œåœ¨tæ—¶åˆ»æ—¶æŠŠåé¢çš„å•å…ƒéƒ½maskæ‰ï¼Œä»è€Œä¸ä¼šattendåˆ°æœªæ¥çš„ä¿¡æ¯ã€‚")])]),t._v(" "),a("h2",{attrs:{id:"é€ä¸ªçœ‹çœ‹æ¯ä¸ªsub-layer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#é€ä¸ªçœ‹çœ‹æ¯ä¸ªsub-layer"}},[t._v("#")]),t._v(" é€ä¸ªçœ‹çœ‹æ¯ä¸ªsub-layerï¼š")]),t._v(" "),a("h3",{attrs:{id:"scaled-dot-product-attention"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#scaled-dot-product-attention"}},[t._v("#")]),t._v(" Scaled Dot-product Attention")]),t._v(" "),a("p",[t._v("åœ¨Transformerä¸­æˆ‘ä»¬ä½¿ç”¨çš„attentionæœºåˆ¶æ˜¯Scaled Dot-product Attentionï¼Œä¸‹å›¾ä¸­çš„"),a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[a("semantics",[a("mrow",[a("msub",[a("mi",[t._v("d")]),a("mi",[t._v("k")])],1)],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[t._v("d_k")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"0.84444em","vertical-align":"-0.15em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal"},[t._v("d")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.33610799999999996em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"0em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.03148em"}},[t._v("k")])])])]),a("span",{staticClass:"vlist-s"},[t._v("â€‹")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])])])])]),t._v("ä»£è¡¨çš„Qï¼ŒKï¼ŒVçš„ç»´åº¦ï¼š")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://gitee.com/beyond_guo/typora_pics/raw/master/typora/20211129221807.png",alt:"image-20211129221807714"}})]),t._v(" "),a("p",[t._v("è¿™é‡Œçš„attentionæœºåˆ¶ï¼Œç›¸æ¯”äºç»å…¸çš„Dot-product Attentionå…¶å®å°±æ˜¯å¤šäº†ä¸€ä¸ªscaleé¡¹ã€‚è¿™é‡Œçš„ä½œç”¨æ˜¯å•¥å‘¢ï¼Ÿå½“dæ¯”è¾ƒå°çš„æ—¶å€™ï¼Œè¦ä¸è¦scaleéƒ½æ— æ‰€è°“ï¼Œä½†æ˜¯å½“dæ¯”è¾ƒå¤§æ—¶ï¼Œå†…ç§¯çš„å€¼çš„èŒƒå›´å°±ä¼šå˜å¾—å¾ˆå¤§ï¼Œä¸åŒçš„å†…ç§¯çš„å·®è·ä¹Ÿä¼šæ‹‰å¤§ï¼Œè¿™æ ·çš„è¯ï¼Œå†ç»è¿‡softmaxè¿›ä¸€æ­¥çš„æ‰©å¤§å·®è·ï¼Œå°±ä¼šä½¿å¾—å¾—åˆ°çš„attentionåˆ†å¸ƒå¾ˆæ¥è¿‘one-hotï¼Œè¿™æ ·ä¼šå¯¼è‡´æ¢¯åº¦ä¸‹é™å›°éš¾ï¼Œæ¨¡å‹éš¾ä»¥è®­ç»ƒã€‚åœ¨Transformerä¸­ï¼Œd=512ï¼Œç®—æ¯”è¾ƒå¤§äº†ï¼Œå› æ­¤éœ€è¦è¿›è¡Œscalingã€‚")]),t._v(" "),a("p",[t._v("ä¸‹å›¾å¾ˆæ¸…æ™°åœ°å±•ç¤ºäº†scaled Dot-product Attentionæ˜¯å¦‚ä½•è¿›è¡Œçš„ï¼š")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://gitee.com/beyond_guo/typora_pics/raw/master/typora/20211129224528.png",alt:"image-20211129224528855"}})]),t._v(" "),a("h3",{attrs:{id:"multi-head-attention"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#multi-head-attention"}},[t._v("#")]),t._v(" Multi-Head Attention")]),t._v(" "),a("p",[t._v("åŸæœ¬çš„SDP Attentionï¼Œæ²¡ä»€ä¹ˆå¯å­¦ä¹ çš„å‚æ•°ï¼Œä½œè€…å‘ç°ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆæŠŠåŸæœ¬çš„å‘é‡ï¼Œé€šè¿‡çº¿æ€§å±‚éšå°„åˆ°å¤šä¸ªä½ç»´çš„ç©ºé—´ï¼Œç„¶åå†å¹¶è¡Œåœ°è¿›è¡ŒSDP Attentionæ“ä½œï¼Œåœ¨concatèµ·æ¥ï¼Œå¯ä»¥å–å¾—æ›´å¥½çš„æ•ˆæœã€‚è¿™ç±»ä¼¼äºCNNä¸­çš„å¤šé€šé“æœºåˆ¶ã€‚ä¸€ä¸ªå‘é‡å…ˆéšå°„æˆå¤šä¸ªæ›´ä½ç»´çš„å‘é‡ï¼Œç›¸å½“äºåˆ†æˆäº†å¤šä¸ªè§†è§’ï¼Œç„¶åæ¯ä¸ªè§†è§’éƒ½å»è¿›è¡ŒAttentionï¼Œè¿™æ ·æ¨¡å‹çš„å­¦ä¹ èƒ½åŠ›å’Œæ½œåŠ›å°±ä¼šå¤§å¤§æå‡ï¼Œå¦å¤–ç”±äºè¿™é‡Œçš„é™ç»´éƒ½æ˜¯å‚æ•°åŒ–çš„ï¼Œæ‰€ä»¥è®©æ¨¡å‹å¯ä»¥æ ¹æ®æ•°æ®æ¥å­¦ä¹ æœ€æœ‰ç”¨çš„è§†è§’ã€‚")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://gitee.com/beyond_guo/typora_pics/raw/master/typora/20211129225233.png",alt:"image-20211129225233453"}})]),t._v(" "),a("h3",{attrs:{id:"point-wise-feed-forward-networks"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#point-wise-feed-forward-networks"}},[t._v("#")]),t._v(" Point-wise Feed-forward Networks")]),t._v(" "),a("p",[t._v("è¿™é‡Œå…¶å®å°±æ˜¯åå­—æ¯”è¾ƒèŠ±å“¨ï¼Œå®é™…ä¸Šå°±æ˜¯ç®€å•çš„MLPã€‚å”¯ä¸€éœ€è¦æ³¨æ„çš„æ˜¯è¿™ä¸ªMLPçš„ä¿®é¥°è¯â€”â€”Point-wiseï¼Œå®ƒçš„æ„æ€æ˜¯å®ƒæ˜¯å¯¹æ¯ä¸ªpositionï¼ˆè¯ï¼‰éƒ½åˆ†å¼€ã€ç‹¬ç«‹åœ°å¤„ç†ã€‚æˆ‘ä¹‹å‰ç”»è¿‡ä¸€ä¸ªå›¾ï¼š")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/beyondguo/mdnice_pictures/2021-6-8/1623129452764-image.png",alt:"point-wise feed-forwardç¤ºæ„å›¾"}})]),t._v(" "),a("p",[t._v("å³MLPåªæ˜¯ä½œç”¨äºæœ€åä¸€ä¸ªç»´åº¦ï¼Œå…·ä½“å…¬å¼æ˜¯ï¼š")]),t._v(" "),a("p",[a("span",{staticClass:"katex-display"},[a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"}},[a("semantics",[a("mrow",[a("mi",[t._v("F")]),a("mi",[t._v("F")]),a("mi",[t._v("N")]),a("mo",{attrs:{stretchy:"false"}},[t._v("(")]),a("mi",[t._v("x")]),a("mo",{attrs:{stretchy:"false"}},[t._v(")")]),a("mo",[t._v("=")]),a("mi",[t._v("r")]),a("mi",[t._v("e")]),a("mi",[t._v("l")]),a("mi",[t._v("u")]),a("mo",{attrs:{stretchy:"false"}},[t._v("(")]),a("mi",[t._v("x")]),a("msub",[a("mi",[t._v("W")]),a("mn",[t._v("1")])],1),a("mo",[t._v("+")]),a("msub",[a("mi",[t._v("b")]),a("mn",[t._v("1")])],1),a("mo",{attrs:{stretchy:"false"}},[t._v(")")]),a("msub",[a("mi",[t._v("W")]),a("mn",[t._v("2")])],1),a("mo",[t._v("+")]),a("msub",[a("mi",[t._v("b")]),a("mn",[t._v("2")])],1)],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[t._v("FFN(x) = relu(xW_1 + b_1)W_2 +b_2\n")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"1em","vertical-align":"-0.25em"}}),a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.10903em"}},[t._v("FFN")]),a("span",{staticClass:"mopen"},[t._v("(")]),a("span",{staticClass:"mord mathnormal"},[t._v("x")]),a("span",{staticClass:"mclose"},[t._v(")")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mrel"},[t._v("=")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}})]),a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"1em","vertical-align":"-0.25em"}}),a("span",{staticClass:"mord mathnormal"},[t._v("re")]),a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.01968em"}},[t._v("l")]),a("span",{staticClass:"mord mathnormal"},[t._v("u")]),a("span",{staticClass:"mopen"},[t._v("(")]),a("span",{staticClass:"mord mathnormal"},[t._v("x")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.13889em"}},[t._v("W")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.30110799999999993em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.13889em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[t._v("1")])])])]),a("span",{staticClass:"vlist-s"},[t._v("â€‹")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),a("span",{staticClass:"mbin"},[t._v("+")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}})]),a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"1em","vertical-align":"-0.25em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal"},[t._v("b")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.30110799999999993em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"0em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[t._v("1")])])])]),a("span",{staticClass:"vlist-s"},[t._v("â€‹")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])]),a("span",{staticClass:"mclose"},[t._v(")")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.13889em"}},[t._v("W")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.30110799999999993em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.13889em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[t._v("2")])])])]),a("span",{staticClass:"vlist-s"},[t._v("â€‹")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),a("span",{staticClass:"mbin"},[t._v("+")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}})]),a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"0.84444em","vertical-align":"-0.15em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal"},[t._v("b")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.30110799999999993em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"0em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[t._v("2")])])])]),a("span",{staticClass:"vlist-s"},[t._v("â€‹")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])])])])])])]),t._v(" "),a("p",[t._v("æ²ç¥åé¢ä¹Ÿç”»å›¾æ€»ç»“äº†ä¸€ä¸‹ï¼š")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://gitee.com/beyond_guo/typora_pics/raw/master/typora/20211215101654.png",alt:"image-20211215101654477"}})]),t._v(" "),a("p",[t._v("è¿™ä¸ªå›¾å·¦è¾¹æ˜¯Transformerç¤ºæ„å›¾ï¼Œå³è¾¹æ˜¯RNNç¤ºæ„å›¾ï¼ˆå…¶ä¸­å¯¹RNNå•å…ƒç®€åŒ–æˆä¸€ä¸ªMLPï¼Œæœ¬è´¨ä¸Šç±»ä¼¼ï¼‰ã€‚")]),t._v(" "),a("ul",[a("li",[t._v("Transformeræ˜¯é€šè¿‡attentionæ¥å…¨å±€åœ°èšåˆåºåˆ—çš„ä¿¡æ¯ï¼Œç„¶åé€šè¿‡MLPè¿›è¡Œè¯­ä¹‰ç©ºé—´çš„è½¬æ¢ï¼›")]),t._v(" "),a("li",[t._v("RNNåˆ™æ˜¯é€šè¿‡æŠŠä¸Šä¸€æ—¶åˆ»çš„ä¿¡æ¯ä¼ å…¥ä¸‹ä¸€æ—¶åˆ»çš„å•å…ƒï¼Œæ¥ä½¿ç”¨åºåˆ—ä¿¡æ¯ï¼Œä½†ä¹Ÿæ˜¯é€šè¿‡MLPè¿›è¡Œè¯­ä¹‰ç©ºé—´è½¬æ¢ã€‚æ‰€ä»¥äºŒè€…æœ¬è´¨åŒºåˆ«åœ¨äºå¦‚ä½•ä½¿ç”¨åºåˆ—çš„ä¿¡æ¯ã€‚")])]),t._v(" "),a("h3",{attrs:{id:"embeddingå’Œsoftmaxå±‚"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#embeddingå’Œsoftmaxå±‚"}},[t._v("#")]),t._v(" Embeddingå’Œsoftmaxå±‚")]),t._v(" "),a("p",[t._v("Transformerä¸­ä½¿ç”¨äº†ä¸‰å¤„embeddingï¼šå¯¹inputå’Œoutputçš„tokenè¿›è¡Œembeddingï¼Œä»¥åŠåœ¨softmaxå‰é¢çš„Linear transformationä¸­ä¹Ÿä½¿ç”¨è·Ÿembeddingç›¸åŒçš„æƒé‡ï¼ˆè¿™æ ·æ˜¯ä¸ºäº†èƒ½å¤ŸæŠŠdecoderçš„outputé€šè¿‡ç›¸åŒçš„embeddingç»™è½¬æ¢å›tokençš„æ¦‚ç‡ï¼Œå› ä¸ºembeddingçš„ä½œç”¨å°±æ˜¯åštokenè·Ÿvectorä¹‹é—´çš„è½¬æ¢ï¼‰ã€‚ä¸‰å¤„çš„embeddingéƒ½æ˜¯åŒæ ·çš„æƒé‡ã€‚")]),t._v(" "),a("p",[t._v("å¦å¤–å€¼å¾—æ³¨æ„çš„ç‚¹å°±æ˜¯ï¼Œä½œè€…æŠŠembeddingéƒ½ä¹˜ä¸Šäº†"),a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[a("semantics",[a("mrow",[a("msqrt",[a("msub",[a("mi",[t._v("d")]),a("mrow",[a("mi",[t._v("m")]),a("mi",[t._v("o")]),a("mi",[t._v("d")]),a("mi",[t._v("e")]),a("mi",[t._v("l")])],1)],1)],1)],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[t._v("\\sqrt{d_{model}}")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"1.04em","vertical-align":"-0.18278000000000005em"}}),a("span",{staticClass:"mord sqrt"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.85722em"}},[a("span",{staticClass:"svg-align",staticStyle:{top:"-3em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord",staticStyle:{"padding-left":"0.833em"}},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal"},[t._v("d")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.33610799999999996em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"0em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[t._v("m")]),a("span",{staticClass:"mord mathnormal mtight"},[t._v("o")]),a("span",{staticClass:"mord mathnormal mtight"},[t._v("d")]),a("span",{staticClass:"mord mathnormal mtight"},[t._v("e")]),a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.01968em"}},[t._v("l")])])])])]),a("span",{staticClass:"vlist-s"},[t._v("â€‹")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])])])]),a("span",{staticStyle:{top:"-2.81722em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"hide-tail",staticStyle:{"min-width":"0.853em",height:"1.08em"}},[a("svg",{attrs:{width:"400em",height:"1.08em",viewBox:"0 0 400000 1080",preserveAspectRatio:"xMinYMin slice"}},[a("path",{attrs:{d:"M95,702\nc-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14\nc0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54\nc44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10\ns173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429\nc69,-144,104.5,-217.7,106.5,-221\nl0 -0\nc5.3,-9.3,12,-14,20,-14\nH400000v40H845.2724\ns-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7\nc-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z\nM834 80h400000v40h-400000z"}})])])])]),a("span",{staticClass:"vlist-s"},[t._v("â€‹")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.18278000000000005em"}},[a("span")])])])])])])]),t._v("ã€‚è¿™æ˜¯ä¸ºäº†åœ¨åé¢è·Ÿposition embeddingç›¸ä¹˜çš„æ—¶å€™èƒ½å¤Ÿä¿æŒå·®ä¸å¤šçš„scaleã€‚")]),t._v(" "),a("h3",{attrs:{id:"position-encoding"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#position-encoding"}},[t._v("#")]),t._v(" Position Encoding")]),t._v(" "),a("p",[t._v("ç”±äºself-attentionå®é™…ä¸Šæ˜¯ä¸è€ƒè™‘åºåˆ—é¡ºåºçš„ï¼Œåªæ˜¯å•çº¯æŠŠå„ä¸ªpositionçš„ä¿¡æ¯è¿›è¡Œèšåˆï¼Œæ— è®ºé¡ºåºæ€ä¹ˆæ”¹å˜ï¼Œå¯¹äºself-attentionæ¥è¯´éƒ½æ˜¯ä¸€æ ·çš„ã€‚å› æ­¤ï¼Œè¿™é‡Œç‰¹æ„è®¾è®¡äº†position encodingè¿™ç§ä¸œè¥¿ï¼Œæ¥æ·»åŠ ä½ç½®ä¿¡æ¯ã€‚")]),t._v(" "),a("p",[t._v("å…·ä½“çš„ï¼Œæ–‡ç« ä½¿ç”¨çš„æ˜¯å‘¨æœŸä¸åŒçš„sinå’Œcoså‡½æ•°æ¥è®¡ç®—å¾—åˆ°æ¯ä¸ªpositionçš„Embeddingï¼š")]),t._v(" "),a("p",[a("span",{staticClass:"katex-display"},[a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"}},[a("semantics",[a("mrow",[a("mi",[t._v("P")]),a("mi",[t._v("E")]),a("mo",{attrs:{stretchy:"false"}},[t._v("(")]),a("mi",[t._v("p")]),a("mi",[t._v("o")]),a("mi",[t._v("s")]),a("mo",{attrs:{separator:"true"}},[t._v(",")]),a("mn",[t._v("2")]),a("mi",[t._v("i")]),a("mo",{attrs:{stretchy:"false"}},[t._v(")")]),a("mo",[t._v("=")]),a("mi",[t._v("s")]),a("mi",[t._v("i")]),a("mi",[t._v("n")]),a("mo",{attrs:{stretchy:"false"}},[t._v("(")]),a("mi",[t._v("p")]),a("mi",[t._v("o")]),a("mi",[t._v("s")]),a("mi",{attrs:{mathvariant:"normal"}},[t._v("/")]),a("mn",[t._v("1000")]),a("msup",[a("mn",[t._v("0")]),a("mrow",[a("mn",[t._v("2")]),a("mi",[t._v("i")]),a("mi",{attrs:{mathvariant:"normal"}},[t._v("/")]),a("msub",[a("mi",[t._v("d")]),a("mrow",[a("mi",[t._v("m")]),a("mi",[t._v("o")]),a("mi",[t._v("d")]),a("mi",[t._v("e")]),a("mi",[t._v("l")])],1)],1)],1)],1),a("mo",{attrs:{stretchy:"false"}},[t._v(")")]),a("mspace",{attrs:{linebreak:"newline"}}),a("mi",[t._v("P")]),a("mi",[t._v("E")]),a("mo",{attrs:{stretchy:"false"}},[t._v("(")]),a("mi",[t._v("p")]),a("mi",[t._v("o")]),a("mi",[t._v("s")]),a("mo",{attrs:{separator:"true"}},[t._v(",")]),a("mn",[t._v("2")]),a("mi",[t._v("i")]),a("mo",[t._v("+")]),a("mn",[t._v("1")]),a("mo",{attrs:{stretchy:"false"}},[t._v(")")]),a("mo",[t._v("=")]),a("mi",[t._v("c")]),a("mi",[t._v("o")]),a("mi",[t._v("s")]),a("mo",{attrs:{stretchy:"false"}},[t._v("(")]),a("mi",[t._v("p")]),a("mi",[t._v("o")]),a("mi",[t._v("s")]),a("mi",{attrs:{mathvariant:"normal"}},[t._v("/")]),a("mn",[t._v("1000")]),a("msup",[a("mn",[t._v("0")]),a("mrow",[a("mn",[t._v("2")]),a("mi",[t._v("i")]),a("mi",{attrs:{mathvariant:"normal"}},[t._v("/")]),a("msub",[a("mi",[t._v("d")]),a("mrow",[a("mi",[t._v("m")]),a("mi",[t._v("o")]),a("mi",[t._v("d")]),a("mi",[t._v("e")]),a("mi",[t._v("l")])],1)],1)],1)],1),a("mo",{attrs:{stretchy:"false"}},[t._v(")")])],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[t._v("PE(pos, 2i) = sin(pos/10000^{2i/d_{model}}) \\\\\nPE(pos, 2i+1) = cos(pos/10000^{2i/d_{model}})\n")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"1em","vertical-align":"-0.25em"}}),a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.05764em"}},[t._v("PE")]),a("span",{staticClass:"mopen"},[t._v("(")]),a("span",{staticClass:"mord mathnormal"},[t._v("p")]),a("span",{staticClass:"mord mathnormal"},[t._v("os")]),a("span",{staticClass:"mpunct"},[t._v(",")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"mord"},[t._v("2")]),a("span",{staticClass:"mord mathnormal"},[t._v("i")]),a("span",{staticClass:"mclose"},[t._v(")")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mrel"},[t._v("=")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}})]),a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"1.188em","vertical-align":"-0.25em"}}),a("span",{staticClass:"mord mathnormal"},[t._v("s")]),a("span",{staticClass:"mord mathnormal"},[t._v("in")]),a("span",{staticClass:"mopen"},[t._v("(")]),a("span",{staticClass:"mord mathnormal"},[t._v("p")]),a("span",{staticClass:"mord mathnormal"},[t._v("os")]),a("span",{staticClass:"mord"},[t._v("/1000")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[t._v("0")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.938em"}},[a("span",{staticStyle:{top:"-3.113em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mtight"},[t._v("2")]),a("span",{staticClass:"mord mathnormal mtight"},[t._v("i")]),a("span",{staticClass:"mord mtight"},[t._v("/")]),a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[t._v("d")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.3448em"}},[a("span",{staticStyle:{top:"-2.3487714285714287em","margin-left":"0em","margin-right":"0.07142857142857144em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.5em"}}),a("span",{staticClass:"sizing reset-size3 size1 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[t._v("m")]),a("span",{staticClass:"mord mathnormal mtight"},[t._v("o")]),a("span",{staticClass:"mord mathnormal mtight"},[t._v("d")]),a("span",{staticClass:"mord mathnormal mtight"},[t._v("e")]),a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.01968em"}},[t._v("l")])])])])]),a("span",{staticClass:"vlist-s"},[t._v("â€‹")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15122857142857138em"}},[a("span")])])])])])])])])])])])])]),a("span",{staticClass:"mclose"},[t._v(")")])]),a("span",{staticClass:"mspace newline"}),a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"1em","vertical-align":"-0.25em"}}),a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.05764em"}},[t._v("PE")]),a("span",{staticClass:"mopen"},[t._v("(")]),a("span",{staticClass:"mord mathnormal"},[t._v("p")]),a("span",{staticClass:"mord mathnormal"},[t._v("os")]),a("span",{staticClass:"mpunct"},[t._v(",")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"mord"},[t._v("2")]),a("span",{staticClass:"mord mathnormal"},[t._v("i")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),a("span",{staticClass:"mbin"},[t._v("+")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}})]),a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"1em","vertical-align":"-0.25em"}}),a("span",{staticClass:"mord"},[t._v("1")]),a("span",{staticClass:"mclose"},[t._v(")")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mrel"},[t._v("=")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}})]),a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"1.188em","vertical-align":"-0.25em"}}),a("span",{staticClass:"mord mathnormal"},[t._v("cos")]),a("span",{staticClass:"mopen"},[t._v("(")]),a("span",{staticClass:"mord mathnormal"},[t._v("p")]),a("span",{staticClass:"mord mathnormal"},[t._v("os")]),a("span",{staticClass:"mord"},[t._v("/1000")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[t._v("0")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.938em"}},[a("span",{staticStyle:{top:"-3.113em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mtight"},[t._v("2")]),a("span",{staticClass:"mord mathnormal mtight"},[t._v("i")]),a("span",{staticClass:"mord mtight"},[t._v("/")]),a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[t._v("d")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.3448em"}},[a("span",{staticStyle:{top:"-2.3487714285714287em","margin-left":"0em","margin-right":"0.07142857142857144em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.5em"}}),a("span",{staticClass:"sizing reset-size3 size1 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[t._v("m")]),a("span",{staticClass:"mord mathnormal mtight"},[t._v("o")]),a("span",{staticClass:"mord mathnormal mtight"},[t._v("d")]),a("span",{staticClass:"mord mathnormal mtight"},[t._v("e")]),a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.01968em"}},[t._v("l")])])])])]),a("span",{staticClass:"vlist-s"},[t._v("â€‹")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15122857142857138em"}},[a("span")])])])])])])])])])])])])]),a("span",{staticClass:"mclose"},[t._v(")")])])])])])]),t._v(" "),a("p",[t._v("å…¶ä¸­posæ˜¯å…·ä½“ä½ç½®çš„indexï¼Œiåˆ™æ˜¯å…·ä½“çš„dimensionã€‚æ€»ä¹‹ï¼Œè¿™é‡Œç»™æ¯ä¸ªä½ç½®ï¼Œéƒ½æ„é€ äº†ä¸€ä¸ªé•¿å°¾"),a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[a("semantics",[a("mrow",[a("msub",[a("mi",[t._v("d")]),a("mrow",[a("mi",[t._v("m")]),a("mi",[t._v("o")]),a("mi",[t._v("d")]),a("mi",[t._v("e")]),a("mi",[t._v("l")])],1)],1),a("mo",[t._v("=")]),a("mn",[t._v("512")])],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[t._v("d_{model}=512")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"0.84444em","vertical-align":"-0.15em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal"},[t._v("d")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.33610799999999996em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"0em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[t._v("m")]),a("span",{staticClass:"mord mathnormal mtight"},[t._v("o")]),a("span",{staticClass:"mord mathnormal mtight"},[t._v("d")]),a("span",{staticClass:"mord mathnormal mtight"},[t._v("e")]),a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.01968em"}},[t._v("l")])])])])]),a("span",{staticClass:"vlist-s"},[t._v("â€‹")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mrel"},[t._v("=")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}})]),a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"0.64444em","vertical-align":"0em"}}),a("span",{staticClass:"mord"},[t._v("512")])])])]),t._v("çš„å‘é‡ï¼Œæ¥ä½œä¸ºè¯¥positionä¹Ÿå°±æ˜¯æŸä¸ªå…·ä½“tokençš„ä½ç½®è¡¨ç¤ºã€‚")]),t._v(" "),a("p",[t._v("æœ€åï¼Œè¿™ä¸ªposition encodingæ˜¯ç›´æ¥è·Ÿembeddingç›¸åŠ ï¼Œè¾“å…¥åˆ°æ¨¡å‹ä¸­ã€‚")]),t._v(" "),a("h2",{attrs:{id:"ä¸ºå•¥ä½¿ç”¨self-attention"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä¸ºå•¥ä½¿ç”¨self-attention"}},[t._v("#")]),t._v(" ä¸ºå•¥ä½¿ç”¨Self-Attention")]),t._v(" "),a("blockquote",[a("p",[t._v("Comments by Li Mu: æ•´ä¸ªæ–‡ç« å®é™…ä¸Šå¯¹æ¨¡å‹çš„è§£é‡Šæ˜¯æ¯”è¾ƒæ¬ ç¼ºçš„ã€‚")])]),t._v(" "),a("p",[t._v("ä½œè€…ä¸»è¦é€šè¿‡ä¸‹é¢è¿™ä¸ªè¡¨æ¥å¯¹æ¯”self-attentionå’Œå…¶ä»–ç»“æ„çš„å·®åˆ«ï¼ˆrestricted self-attentionä¸ç”¨ç®¡ï¼Œä¸æ€ä¹ˆç”¨ï¼‰ï¼š")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://gitee.com/beyond_guo/typora_pics/raw/master/typora/20211215104354.png",alt:"image-20211215104354876"}})]),t._v(" "),a("p",[t._v("ä¸Šå›¾ä¸­ï¼Œsequential operationsè¡¡é‡çš„æ˜¯åœ¨å¤„ç†åºåˆ—çš„æ—¶å€™çš„å¹¶è¡Œå¤æ‚åº¦ï¼Œè¶Šå°è¯´æ˜å¹¶è¡Œåº¦è¶Šé«˜ï¼›max path lengthåˆ™è¡¨ç¤ºåºåˆ—ä¸­ä»»æ„ä¸¤ä¸ªç‚¹ä¼ é€’ä¿¡æ¯çš„æœ€å¤§è·ç¦»ã€‚")]),t._v(" "),a("p",[t._v("Self-attentionçš„ä¸»è¦ä¼˜åŠ¿åœ¨äºå¹¶è¡Œåº¦é«˜ï¼ˆç›¸æ¯”RNNï¼‰ã€ä¿¡æ¯è·ç¦»çŸ­ï¼ˆç›¸æ¯”RNNå’ŒCNNï¼‰ã€‚è€Œåœ¨å¤æ‚åº¦æ–¹é¢ï¼Œå…¶å®æ²¡æœ‰æ˜æ˜¾ä¼˜åŠ¿ï¼š")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("self-attentionæ¯å±‚çš„å¤æ‚åº¦æ˜¯"),a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[a("semantics",[a("mrow",[a("mi",[t._v("O")]),a("mo",{attrs:{stretchy:"false"}},[t._v("(")]),a("msup",[a("mi",[t._v("n")]),a("mn",[t._v("2")])],1),a("mo",[t._v("â‹…")]),a("mi",[t._v("d")]),a("mo",{attrs:{stretchy:"false"}},[t._v(")")])],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[t._v("O(n^2 \\cdot d)")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"1.064108em","vertical-align":"-0.25em"}}),a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.02778em"}},[t._v("O")]),a("span",{staticClass:"mopen"},[t._v("(")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal"},[t._v("n")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.8141079999999999em"}},[a("span",{staticStyle:{top:"-3.063em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[t._v("2")])])])])])])])]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),a("span",{staticClass:"mbin"},[t._v("â‹…")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}})]),a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"1em","vertical-align":"-0.25em"}}),a("span",{staticClass:"mord mathnormal"},[t._v("d")]),a("span",{staticClass:"mclose"},[t._v(")")])])])]),t._v("ï¼Œæ˜¯å› ä¸ºæœ‰nä¸ªpositionï¼Œæ¯ä¸ªpositionéƒ½è¦è®¡ç®—næ¬¡attentionï¼Œåœ¨è®¡ç®—attentionçš„æ—¶å€™ï¼Œæ˜¯è¿›è¡Œç»´åº¦ä¸ºdçš„å†…ç§¯ï¼Œæ‰€ä»¥å¤æ‚åº¦æ˜¯n * n * dï¼›")])]),t._v(" "),a("li",[a("p",[t._v("RNNå±‚çš„å¤æ‚åº¦æ˜¯"),a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[a("semantics",[a("mrow",[a("mi",[t._v("O")]),a("mo",{attrs:{stretchy:"false"}},[t._v("(")]),a("mi",[t._v("n")]),a("mo",[t._v("â‹…")]),a("msup",[a("mi",[t._v("d")]),a("mn",[t._v("2")])],1),a("mo",{attrs:{stretchy:"false"}},[t._v(")")])],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[t._v("O(n \\cdot d^2)")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"1em","vertical-align":"-0.25em"}}),a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.02778em"}},[t._v("O")]),a("span",{staticClass:"mopen"},[t._v("(")]),a("span",{staticClass:"mord mathnormal"},[t._v("n")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),a("span",{staticClass:"mbin"},[t._v("â‹…")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}})]),a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"1.064108em","vertical-align":"-0.25em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal"},[t._v("d")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.8141079999999999em"}},[a("span",{staticStyle:{top:"-3.063em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[t._v("2")])])])])])])])]),a("span",{staticClass:"mclose"},[t._v(")")])])])]),t._v("ï¼Œå› ä¸ºæœ‰nä¸ªpositionï¼Œæ¯ä¸ªpositionä¼šç»è¿‡ä¸€ä¸ªçº¿æ€§å˜åŒ–ï¼ˆçŸ©é˜µä¹˜æ³•ï¼‰ï¼Œå˜æ¢çš„å¤æ‚åº¦æ˜¯d * dï¼Œå› æ­¤æœ€ç»ˆå¤æ‚åº¦æ˜¯n * d * dï¼›")])]),t._v(" "),a("li",[a("p",[t._v("CNNå®é™…ä¸Šè·ŸRNNç±»ä¼¼ï¼Œä½†å› ä¸ºå¾€å¾€æ¶‰åŠåˆ°å¤šä¸ªkernelï¼Œæ‰€ä»¥å¤šä¹˜äº†ä¸€ä¸ªkã€‚ä½†ä¸€èˆ¬åœ¨NLPä¸­kä¹Ÿä¸å¤§ï¼Œæ‰€ä»¥æ²¡æœ‰å¤§å·®åˆ«ã€‚")])])]),t._v(" "),a("p",[t._v("åœ¨NLPä¸­ï¼Œå¾€å¾€nå’Œdéƒ½ä¼šæ¯”è¾ƒå¤§ï¼Œæ‰€ä»¥è¿™ä¸‰è€…çš„è®¡ç®—å¤æ‚åº¦æ²¡æœ‰è´¨çš„å·®åˆ«ã€‚")]),t._v(" "),a("blockquote",[a("p",[t._v("Comments by Li Mu: çœ‹èµ·æ¥åº”è¯¥Transformeråœ¨è®¡ç®—æ•ˆç‡ä¸Šä¼šæ¯”CNNã€RNNæ›´å¿«ï¼Œä½†æˆ‘ä»¬ç°åœ¨ä½“ä¼šåˆ°çš„Transformerçš„æ¨¡å‹å´ä¸æ˜¯è¿™æ ·çš„ï¼Œä¸ºå•¥å‘¢ï¼Ÿå®é™…ä¸Šæ˜¯å› ä¸ºself-attentionå¯¹æ•´ä¸ªæ¨¡å‹çš„å‡è®¾æ›´å°‘ï¼Œæ‰€ä»¥æˆ‘ä»¬å¾€å¾€éœ€è¦æ›´å¤§é‡çš„æ•°é‡ã€æ›´å¤§çš„æ¨¡å‹æ‰èƒ½å¤Ÿè®­ç»ƒå‡ºè·ŸCNNã€RNNåŒæ ·çš„æ•ˆæœæ¥ã€‚è¿™å°±å¯¼è‡´ç°åœ¨åŸºäºTransformerçš„æ¨¡å‹éƒ½ç‰¹åˆ«å¤§ç‰¹åˆ«è´µã€‚")])]),t._v(" "),a("p",[t._v("è¿™é‡Œå°±æ¶‰åŠåˆ°inductive biasè¿™ä¸ªæ¦‚å¿µäº†ï¼Œåœ¨ã€Œä»€ä¹ˆæ˜¯inductive biasã€æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬çŸ¥é“åˆç†çš„inductive biaså¯ä»¥è®©æ¨¡å‹çš„è®­ç»ƒåŠ é€Ÿï¼Œè¿™é‡Œç”±äºself-attentionçš„inductive biasç›¸æ¯”äºCNNã€RNNæ›´å°‘ï¼Œæ‰€ä»¥è®­ç»ƒèµ·æ¥ä¹Ÿæ›´è´¹åŠ²ã€‚ä½†æˆ‘çŒœæƒ³ï¼Œå¯¹äºå¤§è§„æ¨¡é¢„è®­ç»ƒæ¥è¯´ï¼Œå°‘ä¸€ç‚¹inductive biasæ˜¯ä¸æ˜¯æ›´å¥½ï¼Ÿ")]),t._v(" "),a("h2",{attrs:{id:"è®­ç»ƒç»†èŠ‚-è¶…å‚æ•°"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#è®­ç»ƒç»†èŠ‚-è¶…å‚æ•°"}},[t._v("#")]),t._v(" è®­ç»ƒç»†èŠ‚&è¶…å‚æ•°")]),t._v(" "),a("p",[t._v("è‹±è¯­ç¿»è¯‘å¾·è¯­ï¼Œä½¿ç”¨BPEåˆ†è¯æ³•æ„é€ è‹±è¯­å¾·è¯­å…±ç”¨çš„è¯å…¸ï¼Œä½¿ç”¨8ä¸ªP100 GPUï¼Œæ¯ä¸ªbatchå¤§æ¦‚0.4sï¼Œæ€»å…±è®­ç»ƒäº†12å°æ—¶ï¼Œå…¶å®æ—¶é—´æˆæœ¬ç›¸å¯¹æ¥è¯´è¿˜æ˜¯å¯æ‰¿å—çš„ã€‚")]),t._v(" "),a("p",[t._v("å­¦ä¹ ç‡ä½¿ç”¨äº†warmupï¼Œå…ˆå¢å¼ºåå‡ã€‚")]),t._v(" "),a("p",[t._v("ä½¿ç”¨äº†ä¸¤ç§æ­£åˆ™åŒ–ï¼š")]),t._v(" "),a("ol",[a("li",[t._v("Residual dropoutï¼Œå¯¹æ¯ä¸ªsub-layerçš„è¾“å‡ºéƒ½ä½¿ç”¨äº†dropoutï¼Œè¿˜å¯¹embeddingå±‚ä¹Ÿä½¿ç”¨dropoutï¼Œdropout rate=0.1")]),t._v(" "),a("li",[t._v("Label Smoothingï¼Œä½¿ç”¨äº†ç¨‹åº¦ä¸º0.1çš„smoothingï¼Œè¿™ä¼šæŸå®³ä¸€ç‚¹çš„perplexityï¼Œä½†æ˜¯nuisanceæé«˜accuracyå’ŒBLEUå¾—åˆ†")])]),t._v(" "),a("p",[t._v("ä¸‹è¡¨åˆ™æ˜¯å±•ç¤ºäº†ä¸åŒçš„æ¨¡å‹ç»“æ„ï¼ˆè¶…å‚æ•°ï¼‰çš„æ€§èƒ½å·®åˆ«ï¼š")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://gitee.com/beyond_guo/typora_pics/raw/master/typora/20211215121451.png",alt:"image-20211215121451571"}})]),t._v(" "),a("p",[t._v("å®é™…ä¸Šå¯ä¿®æ”¹çš„å‚æ•°ä¸å¤šï¼Œä¸»è¦å°±æ˜¯å±‚æ•°ï¼ˆNï¼‰ã€å‘é‡ç»´åº¦ï¼ˆ"),a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[a("semantics",[a("mrow",[a("msub",[a("mi",[t._v("d")]),a("mrow",[a("mi",[t._v("m")]),a("mi",[t._v("o")]),a("mi",[t._v("d")]),a("mi",[t._v("e")]),a("mi",[t._v("l")])],1)],1)],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[t._v("d_{model}")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"0.84444em","vertical-align":"-0.15em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal"},[t._v("d")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.33610799999999996em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"0em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[t._v("m")]),a("span",{staticClass:"mord mathnormal mtight"},[t._v("o")]),a("span",{staticClass:"mord mathnormal mtight"},[t._v("d")]),a("span",{staticClass:"mord mathnormal mtight"},[t._v("e")]),a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.01968em"}},[t._v("l")])])])])]),a("span",{staticClass:"vlist-s"},[t._v("â€‹")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])])])])]),t._v("ï¼‰ã€å¤´æ•°ï¼ˆhï¼‰ã€‚åƒ"),a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[a("semantics",[a("mrow",[a("msub",[a("mi",[t._v("d")]),a("mi",[t._v("k")])],1),a("mo",{attrs:{separator:"true"}},[t._v(",")]),a("msub",[a("mi",[t._v("d")]),a("mi",[t._v("v")])],1)],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[t._v("d_k, d_v")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"0.8888799999999999em","vertical-align":"-0.19444em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal"},[t._v("d")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.33610799999999996em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"0em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.03148em"}},[t._v("k")])])])]),a("span",{staticClass:"vlist-s"},[t._v("â€‹")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])]),a("span",{staticClass:"mpunct"},[t._v(",")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal"},[t._v("d")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"0em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.03588em"}},[t._v("v")])])])]),a("span",{staticClass:"vlist-s"},[t._v("â€‹")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])])])])]),t._v("éƒ½æ˜¯æ ¹æ®"),a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[a("semantics",[a("mrow",[a("msub",[a("mi",[t._v("d")]),a("mrow",[a("mi",[t._v("m")]),a("mi",[t._v("o")]),a("mi",[t._v("d")]),a("mi",[t._v("e")])],1)],1),a("mi",[t._v("l")])],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[t._v("d_{mode}l")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"0.84444em","vertical-align":"-0.15em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal"},[t._v("d")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.33610799999999996em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"0em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[t._v("m")]),a("span",{staticClass:"mord mathnormal mtight"},[t._v("o")]),a("span",{staticClass:"mord mathnormal mtight"},[t._v("d")]),a("span",{staticClass:"mord mathnormal mtight"},[t._v("e")])])])])]),a("span",{staticClass:"vlist-s"},[t._v("â€‹")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])]),a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.01968em"}},[t._v("l")])])])]),t._v("å’Œhç®—å‡ºæ¥çš„ã€‚")]),t._v(" "),a("h2",{attrs:{id:"æ²ç¥ç‚¹è¯„"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ²ç¥ç‚¹è¯„"}},[t._v("#")]),t._v(" æ²ç¥ç‚¹è¯„")]),t._v(" "),a("h3",{attrs:{id:"å†™ä½œä¸Š"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å†™ä½œä¸Š"}},[t._v("#")]),t._v(" å†™ä½œä¸Š")]),t._v(" "),a("p",[t._v("è¿™ç¯‡æ–‡ç« å†™çš„éå¸¸ç®€æ´ï¼Œæ²¡æœ‰å¤ªå¤šçš„ä»‹ç»å’Œè§£é‡Šï¼Œå±äºå¤§ä½¬çš„å†™ä½œé£æ ¼ã€‚ä¸è¿‡å¯¹äºæˆ‘ä»¬å¤§å¤šæ•°ç ”ç©¶è€…æ¥è¯´ï¼Œè¿˜æ˜¯éœ€è¦å°½å¯èƒ½æŠŠèƒŒæ™¯è§£é‡Šæ¸…æ¥šï¼Œåœ¨æ­£æ–‡èŠ±è¶³å¤Ÿçš„ç¯‡å¹…åœ¨æŠŠæ•…äº‹è®²æ¸…æ¥šï¼Œä»è€Œè®©è¯»è€…æ›´å¥½ç†è§£ã€è®¤è¯†çš„æ›´æ·±å…¥ã€‚")]),t._v(" "),a("h3",{attrs:{id:"transformer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#transformer"}},[t._v("#")]),t._v(" Transformer")]),t._v(" "),a("p",[t._v("è¿™ä¸ªæ¨¡å‹çš„æœ€å¤§æ„ä¹‰åœ¨äºç»™NLPå±Šä¹ƒè‡³CVã€audioç­‰å…¶ä»–æ¨¡æ€çš„æ•°æ®æä¾›äº†ç»Ÿä¸€çš„æ¨¡å‹æ¶æ„ï¼Œæœ‰ç‚¹ç±»ä¼¼äºCNNåˆšæå‡ºæ—¶å¯¹CVé¢†åŸŸçš„å·¨å¤§å˜é©ã€‚æœ‰äº†Transformerï¼Œä»¥åŠç°åœ¨å„ç§åŸºäºTransformerçš„é¢„è®­ç»ƒæ¨¡å‹ã€å…¶ä»–æ¨¡æ€çš„æˆåŠŸè¿ç”¨ï¼ŒTransformerå¯¹äºå¤šæ¨¡æ€å­¦ä¹ çš„è¿›æ­¥æœ‰ç€æ·±è¿œçš„æ„ä¹‰ã€‚")]),t._v(" "),a("p",[t._v("ç„¶åï¼Œçºµä½¿Transformerå·²ç»æå‡ºäº†å¤šå¹´ï¼Œæˆ‘ä»¬å¯¹Transformerçš„çœŸæ­£åŸç†ä¾ç„¶ç¼ºä¹ç†è§£ã€‚ä¾‹å¦‚ï¼Œæ–‡ç« çš„æ ‡é¢˜Attention is all you needå®é™…ä¸Šä¹Ÿæ˜¯ä¸å¯¹çš„ï¼Œåç»­çš„ç ”ç©¶è€…å·²ç»è¯æ˜Transformerçš„æˆåŠŸå¯¹äºMLPã€residual connectionç­‰å…¶ä»–ç»„ä»¶ä¹Ÿæ˜¯ç¼ºä¸€ä¸å¯çš„ï¼Œattentionçš„ä½œç”¨å°±æ˜¯å¯¹åºåˆ—çš„ä¿¡æ¯åšäº†èšåˆï¼Œå¹¶ä¸æ˜¯attentionä¸€ä¸ªäººèµ·äº†å…¨éƒ¨ä½œç”¨ã€‚")]),t._v(" "),a("p",[t._v("å¦å¤–ï¼Œself-attentionç›¸æ¯”å¦‚RNNã€CNNç­‰çš„ä¼˜åŠ¿ï¼Œå¯èƒ½åœ¨äºå®ƒæ‰€ä½œçš„å½’çº³åç½®ï¼ˆinductive biasï¼‰æ›´åŠ ä¸€èˆ¬åŒ–ï¼Œæ‰€ä»¥ç»è¿‡å¤§è§„æ¨¡çš„è®­ç»ƒï¼Œå¯ä»¥å­¦ä¹ åˆ°æ›´ä¸°å¯Œã€æ›´ä¸€èˆ¬åŒ–çš„çŸ¥è¯†ã€‚ä½†ä»£ä»·å°±æ˜¯å®ƒå¯¹æ•°æ®çš„å…³é”®ä¿¡æ¯çš„æŠ“å–èƒ½åŠ›å°±ä¸‹é™äº†ï¼Œæˆ‘ä»¬éœ€è¦æ›´å¤šçš„æ•°æ®æ›´å¤§çš„æ¨¡å‹æ‰èƒ½è®­ç»ƒå‡ºç†æƒ³çš„æ•ˆæœã€‚")]),t._v(" "),a("p",[t._v("ä½†Transformerçš„å‡ºç°ï¼Œç»™äº†æ•´ä¸ªAIå±Šæ–°çš„æ´»åŠ›ï¼Œè®©æˆ‘ä»¬å‘ç°åœ¨CNNã€RNNç»Ÿæ²»çš„æ—¶ä»£ï¼Œæˆ‘ä»¬ä¾ç„¶å¯ä»¥è®¾è®¡å‡ºæ–°çš„ç½‘ç»œç»“æ„å‘å…‰å‘çƒ­ï¼Œå› æ­¤ä¹Ÿå¸¦åŠ¨äº†ä¸€ç³»åˆ—æ–°çš„ç½‘ç»œæ¶æ„è®¾è®¡ï¼Œæ¯”å¦‚çº¯MLPçš„æ¨¡å‹ç­‰ç­‰ã€‚")]),t._v(" "),a("hr")])}),[],!1,null,null,null);s.default=e.exports}}]);