(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{419:function(s,t,a){"use strict";a.r(t);var i=a(44),l=Object(i.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"cs224n笔记-2-word2vec算法推导-实现"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cs224n笔记-2-word2vec算法推导-实现"}},[s._v("#")]),s._v(" CS224n笔记[2]:Word2Vec算法推导&实现")]),s._v(" "),a("center",[s._v("作者：郭必扬")]),s._v(" "),a("p",[s._v("其实关于Word2Vec的详细推导，我之前写过一篇十分详细精美的手写笔记：\n【link】，墙裂推荐阅读，个人认为写的确实不错。")]),s._v(" "),a("p",[s._v("本文主要根据cs224n的assignment2的计算题和编程题进行一个总结回顾。我发现这份作业设计太棒了，循序渐进，有理论有实践，前后呼应，难度适中，整个的编排我觉得更像是一份详细的教程。所以这里我就从这些题目出发，来复习、思考Word2Vec。")]),s._v(" "),a("blockquote",[a("p",[s._v("本文的主要内容：")]),s._v(" "),a("ul",[a("li",[s._v("使用"),a("strong",[s._v("朴素softmax")]),s._v("损失函数的word2vec")]),s._v(" "),a("li",[s._v("使用"),a("strong",[s._v("负采样")]),s._v("式损失函数的word2vec")]),s._v(" "),a("li",[s._v("编程实现的细节")])])]),s._v(" "),a("h2",{attrs:{id:"一些notations"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一些notations"}},[s._v("#")]),s._v(" 一些Notations")]),s._v(" "),a("p",[s._v("skip-gram的目标就是学习由中心词"),a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[a("semantics",[a("mrow",[a("mi",[s._v("c")])],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("c")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"0.43056em","vertical-align":"0em"}}),a("span",{staticClass:"mord mathnormal"},[s._v("c")])])])]),s._v("预测其上下文中某特定词"),a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[a("semantics",[a("mrow",[a("mi",[s._v("o")])],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("o")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"0.43056em","vertical-align":"0em"}}),a("span",{staticClass:"mord mathnormal"},[s._v("o")])])])]),s._v("的概率"),a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[a("semantics",[a("mrow",[a("mi",[s._v("P")]),a("mo",{attrs:{stretchy:"false"}},[s._v("(")]),a("mi",[s._v("O")]),a("mo",[s._v("=")]),a("mi",[s._v("o")]),a("mi",{attrs:{mathvariant:"normal"}},[s._v("∣")]),a("mi",[s._v("C")]),a("mo",[s._v("=")]),a("mi",[s._v("c")]),a("mo",{attrs:{stretchy:"false"}},[s._v(")")])],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("P(O=o|C=c)")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"1em","vertical-align":"-0.25em"}}),a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.13889em"}},[s._v("P")]),a("span",{staticClass:"mopen"},[s._v("(")]),a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.02778em"}},[s._v("O")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mrel"},[s._v("=")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}})]),a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"1em","vertical-align":"-0.25em"}}),a("span",{staticClass:"mord mathnormal"},[s._v("o")]),a("span",{staticClass:"mord"},[s._v("∣")]),a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.07153em"}},[s._v("C")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mrel"},[s._v("=")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}})]),a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"1em","vertical-align":"-0.25em"}}),a("span",{staticClass:"mord mathnormal"},[s._v("c")]),a("span",{staticClass:"mclose"},[s._v(")")])])])]),s._v(",o就是outside的意思，c就是center的意思。o从哪里找呢？我们需要先确定一个窗口大小window size，例如下图中，我们使用唯window size=2，那么中心词“banking”就可以找到4个上下文词：")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/beyondguo/mdnice_pictures/2021-6-24/1624547817909-image.png",alt:"采用窗口大小为2的word2vec skip-gram算法"}})]),s._v(" "),a("h2",{attrs:{id:"朴素softmax损失函数-naive-softmax-loss"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#朴素softmax损失函数-naive-softmax-loss"}},[s._v("#")]),s._v(" 朴素softmax损失函数(Naive-Softmax Loss)")]),s._v(" "),a("p",[s._v("对于"),a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[a("semantics",[a("mrow",[a("mi",[s._v("P")]),a("mo",{attrs:{stretchy:"false"}},[s._v("(")]),a("mi",[s._v("O")]),a("mi",{attrs:{mathvariant:"normal"}},[s._v("∣")]),a("mi",[s._v("C")]),a("mo",{attrs:{stretchy:"false"}},[s._v(")")])],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("P(O|C)")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"1em","vertical-align":"-0.25em"}}),a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.13889em"}},[s._v("P")]),a("span",{staticClass:"mopen"},[s._v("(")]),a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.02778em"}},[s._v("O")]),a("span",{staticClass:"mord"},[s._v("∣")]),a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.07153em"}},[s._v("C")]),a("span",{staticClass:"mclose"},[s._v(")")])])])]),s._v("，我们可以使用词向量的内积然后用softmax函数来构建：")]),s._v(" "),a("p",[a("span",{staticClass:"katex-display"},[a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"}},[a("semantics",[a("mrow",[a("mi",[s._v("P")]),a("mo",{attrs:{stretchy:"false"}},[s._v("(")]),a("mi",[s._v("O")]),a("mo",[s._v("=")]),a("mi",[s._v("o")]),a("mi",{attrs:{mathvariant:"normal"}},[s._v("∣")]),a("mi",[s._v("C")]),a("mo",[s._v("=")]),a("mi",[s._v("c")]),a("mo",{attrs:{stretchy:"false"}},[s._v(")")]),a("mo",[s._v("=")]),a("mfrac",[a("mrow",[a("mi",[s._v("e")]),a("mi",[s._v("x")]),a("mi",[s._v("p")]),a("mo",{attrs:{stretchy:"false"}},[s._v("(")]),a("msubsup",[a("mi",[s._v("u")]),a("mi",[s._v("o")]),a("mi",[s._v("T")])],1),a("msub",[a("mi",[s._v("v")]),a("mi",[s._v("c")])],1),a("mo",{attrs:{stretchy:"false"}},[s._v(")")])],1),a("mrow",[a("munder",[a("mo",[s._v("∑")]),a("mrow",[a("mi",[s._v("w")]),a("mo",[s._v("∈")]),a("mi",[s._v("V")]),a("mi",[s._v("o")]),a("mi",[s._v("c")]),a("mi",[s._v("a")]),a("mi",[s._v("b")])],1)],1),a("mi",[s._v("e")]),a("mi",[s._v("x")]),a("mi",[s._v("p")]),a("mo",{attrs:{stretchy:"false"}},[s._v("(")]),a("msubsup",[a("mi",[s._v("u")]),a("mi",[s._v("w")]),a("mi",[s._v("T")])],1),a("msub",[a("mi",[s._v("v")]),a("mi",[s._v("c")])],1),a("mo",{attrs:{stretchy:"false"}},[s._v(")")])],1)],1)],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("P(O=o|C=c) = \\frac{exp(u_o^Tv_c)}{\\sum_{w \\in Vocab}exp(u_w^Tv_c)}\n")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"1em","vertical-align":"-0.25em"}}),a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.13889em"}},[s._v("P")]),a("span",{staticClass:"mopen"},[s._v("(")]),a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.02778em"}},[s._v("O")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mrel"},[s._v("=")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}})]),a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"1em","vertical-align":"-0.25em"}}),a("span",{staticClass:"mord mathnormal"},[s._v("o")]),a("span",{staticClass:"mord"},[s._v("∣")]),a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.07153em"}},[s._v("C")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mrel"},[s._v("=")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}})]),a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"1em","vertical-align":"-0.25em"}}),a("span",{staticClass:"mord mathnormal"},[s._v("c")]),a("span",{staticClass:"mclose"},[s._v(")")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mrel"},[s._v("=")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}})]),a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"2.531411em","vertical-align":"-1.01308em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mopen nulldelimiter"}),a("span",{staticClass:"mfrac"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"1.5183309999999999em"}},[a("span",{staticStyle:{top:"-2.314em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mop"},[a("span",{staticClass:"mop op-symbol small-op",staticStyle:{position:"relative",top:"-0.0000050000000000050004em"}},[s._v("∑")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.18639799999999984em"}},[a("span",{staticStyle:{top:"-2.40029em","margin-left":"0em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.02691em"}},[s._v("w")]),a("span",{staticClass:"mrel mtight"},[s._v("∈")]),a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.22222em"}},[s._v("V")]),a("span",{staticClass:"mord mathnormal mtight"},[s._v("oc")]),a("span",{staticClass:"mord mathnormal mtight"},[s._v("ab")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.32708000000000004em"}},[a("span")])])])])]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"mord mathnormal"},[s._v("e")]),a("span",{staticClass:"mord mathnormal"},[s._v("x")]),a("span",{staticClass:"mord mathnormal"},[s._v("p")]),a("span",{staticClass:"mopen"},[s._v("(")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal"},[s._v("u")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.767331em"}},[a("span",{staticStyle:{top:"-2.4530000000000003em","margin-left":"0em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.02691em"}},[s._v("w")])])]),a("span",{staticStyle:{top:"-2.9890000000000003em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.13889em"}},[s._v("T")])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.247em"}},[a("span")])])])])]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.03588em"}},[s._v("v")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.03588em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("c")])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])]),a("span",{staticClass:"mclose"},[s._v(")")])])]),a("span",{staticStyle:{top:"-3.23em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"frac-line",staticStyle:{"border-bottom-width":"0.04em"}})]),a("span",{staticStyle:{top:"-3.677em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal"},[s._v("e")]),a("span",{staticClass:"mord mathnormal"},[s._v("x")]),a("span",{staticClass:"mord mathnormal"},[s._v("p")]),a("span",{staticClass:"mopen"},[s._v("(")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal"},[s._v("u")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.8413309999999999em"}},[a("span",{staticStyle:{top:"-2.4530000000000003em","margin-left":"0em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("o")])])]),a("span",{staticStyle:{top:"-3.063em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.13889em"}},[s._v("T")])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.247em"}},[a("span")])])])])]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.03588em"}},[s._v("v")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.03588em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("c")])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])]),a("span",{staticClass:"mclose"},[s._v(")")])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"1.01308em"}},[a("span")])])])]),a("span",{staticClass:"mclose nulldelimiter"})])])])])])]),s._v(" "),a("p",[s._v("这里我们对中心词c和上下文词o使用了两套词向量表示"),a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[a("semantics",[a("mrow",[a("mi",[s._v("V")])],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("V")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"0.68333em","vertical-align":"0em"}}),a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.22222em"}},[s._v("V")])])])]),s._v("和"),a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[a("semantics",[a("mrow",[a("mi",[s._v("U")])],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("U")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"0.68333em","vertical-align":"0em"}}),a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.10903em"}},[s._v("U")])])])]),s._v("，但注意二者形状完全一样，不是互补的关系。")]),s._v(" "),a("p",[s._v("这样，对于单个词对<c,o>，其损失函数可以写为：")]),s._v(" "),a("p",[a("span",{staticClass:"katex-display"},[a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"}},[a("semantics",[a("mrow",[a("msub",[a("mi",[s._v("J")]),a("mrow",[a("mi",[s._v("n")]),a("mi",[s._v("a")]),a("mi",[s._v("i")]),a("mi",[s._v("v")]),a("mi",[s._v("e")]),a("mo",[s._v("−")]),a("mi",[s._v("s")]),a("mi",[s._v("o")]),a("mi",[s._v("f")]),a("mi",[s._v("t")]),a("mi",[s._v("m")]),a("mi",[s._v("a")]),a("mi",[s._v("x")])],1)],1),a("mo",{attrs:{stretchy:"false"}},[s._v("(")]),a("msub",[a("mi",[s._v("v")]),a("mi",[s._v("c")])],1),a("mo",{attrs:{separator:"true"}},[s._v(",")]),a("mi",[s._v("o")]),a("mo",{attrs:{separator:"true"}},[s._v(",")]),a("mi",[s._v("U")]),a("mo",{attrs:{stretchy:"false"}},[s._v(")")]),a("mo",[s._v("=")]),a("mo",[s._v("−")]),a("mi",[s._v("l")]),a("mi",[s._v("o")]),a("mi",[s._v("g")]),a("mi",[s._v("P")]),a("mo",{attrs:{stretchy:"false"}},[s._v("(")]),a("mi",[s._v("O")]),a("mo",[s._v("=")]),a("mi",[s._v("o")]),a("mi",{attrs:{mathvariant:"normal"}},[s._v("∣")]),a("mi",[s._v("C")]),a("mo",[s._v("=")]),a("mi",[s._v("c")]),a("mo",{attrs:{stretchy:"false"}},[s._v(")")])],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("J_{naive-softmax}(v_c,o,U) = -logP(O=o|C=c)\n")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"1.036108em","vertical-align":"-0.286108em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.09618em"}},[s._v("J")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.3361079999999999em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.09618em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("nai")]),a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.03588em"}},[s._v("v")]),a("span",{staticClass:"mord mathnormal mtight"},[s._v("e")]),a("span",{staticClass:"mbin mtight"},[s._v("−")]),a("span",{staticClass:"mord mathnormal mtight"},[s._v("so")]),a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.10764em"}},[s._v("f")]),a("span",{staticClass:"mord mathnormal mtight"},[s._v("t")]),a("span",{staticClass:"mord mathnormal mtight"},[s._v("ma")]),a("span",{staticClass:"mord mathnormal mtight"},[s._v("x")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.286108em"}},[a("span")])])])])]),a("span",{staticClass:"mopen"},[s._v("(")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.03588em"}},[s._v("v")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.03588em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("c")])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])]),a("span",{staticClass:"mpunct"},[s._v(",")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"mord mathnormal"},[s._v("o")]),a("span",{staticClass:"mpunct"},[s._v(",")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.10903em"}},[s._v("U")]),a("span",{staticClass:"mclose"},[s._v(")")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mrel"},[s._v("=")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}})]),a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"1em","vertical-align":"-0.25em"}}),a("span",{staticClass:"mord"},[s._v("−")]),a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.01968em"}},[s._v("l")]),a("span",{staticClass:"mord mathnormal"},[s._v("o")]),a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.03588em"}},[s._v("g")]),a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.13889em"}},[s._v("P")]),a("span",{staticClass:"mopen"},[s._v("(")]),a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.02778em"}},[s._v("O")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mrel"},[s._v("=")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}})]),a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"1em","vertical-align":"-0.25em"}}),a("span",{staticClass:"mord mathnormal"},[s._v("o")]),a("span",{staticClass:"mord"},[s._v("∣")]),a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.07153em"}},[s._v("C")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mrel"},[s._v("=")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}})]),a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"1em","vertical-align":"-0.25em"}}),a("span",{staticClass:"mord mathnormal"},[s._v("c")]),a("span",{staticClass:"mclose"},[s._v(")")])])])])])]),s._v(" "),a("p",[s._v("其实，该损失函数还有另一种表示方法，那就是周围词真实分布"),a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[a("semantics",[a("mrow",[a("mi",[s._v("y")])],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("y")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"0.625em","vertical-align":"-0.19444em"}}),a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.03588em"}},[s._v("y")])])])]),s._v("与预测出来的概率分布"),a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[a("semantics",[a("mrow",[a("mover",{attrs:{accent:"true"}},[a("mi",[s._v("y")]),a("mo",[s._v("^")])],1)],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("\\hat{y}")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"0.8888799999999999em","vertical-align":"-0.19444em"}}),a("span",{staticClass:"mord accent"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.69444em"}},[a("span",{staticStyle:{top:"-3em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.03588em"}},[s._v("y")])]),a("span",{staticStyle:{top:"-3em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"accent-body",staticStyle:{left:"-0.19444em"}},[a("span",{staticClass:"mord"},[s._v("^")])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.19444em"}},[a("span")])])])])])])]),s._v("的交叉熵。即：")]),s._v(" "),a("p",[a("span",{staticClass:"katex-display"},[a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"}},[a("semantics",[a("mrow",[a("msub",[a("mi",[s._v("J")]),a("mrow",[a("mi",[s._v("n")]),a("mi",[s._v("a")]),a("mi",[s._v("i")]),a("mi",[s._v("v")]),a("mi",[s._v("e")]),a("mo",[s._v("−")]),a("mi",[s._v("s")]),a("mi",[s._v("o")]),a("mi",[s._v("f")]),a("mi",[s._v("t")]),a("mi",[s._v("m")]),a("mi",[s._v("a")]),a("mi",[s._v("x")])],1)],1),a("mo",{attrs:{stretchy:"false"}},[s._v("(")]),a("msub",[a("mi",[s._v("v")]),a("mi",[s._v("c")])],1),a("mo",{attrs:{separator:"true"}},[s._v(",")]),a("mi",[s._v("o")]),a("mo",{attrs:{separator:"true"}},[s._v(",")]),a("mi",[s._v("U")]),a("mo",{attrs:{stretchy:"false"}},[s._v(")")]),a("mo",[s._v("=")]),a("mo",[s._v("−")]),a("munder",[a("mo",[s._v("∑")]),a("mrow",[a("mi",[s._v("w")]),a("mo",[s._v("∈")]),a("mi",[s._v("V")]),a("mi",[s._v("o")]),a("mi",[s._v("c")]),a("mi",[s._v("a")]),a("mi",[s._v("b")])],1)],1),a("msub",[a("mi",[s._v("y")]),a("mi",[s._v("w")])],1),a("mi",[s._v("l")]),a("mi",[s._v("o")]),a("mi",[s._v("g")]),a("mo",{attrs:{stretchy:"false"}},[s._v("(")]),a("mover",{attrs:{accent:"true"}},[a("msub",[a("mi",[s._v("y")]),a("mi",[s._v("w")])],1),a("mo",[s._v("^")])],1),a("mo",{attrs:{stretchy:"false"}},[s._v(")")])],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("J_{naive-softmax}(v_c,o,U) = -\\sum_{w \\in Vocab} y_w log(\\hat{y_w})\n")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"1.036108em","vertical-align":"-0.286108em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.09618em"}},[s._v("J")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.3361079999999999em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.09618em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("nai")]),a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.03588em"}},[s._v("v")]),a("span",{staticClass:"mord mathnormal mtight"},[s._v("e")]),a("span",{staticClass:"mbin mtight"},[s._v("−")]),a("span",{staticClass:"mord mathnormal mtight"},[s._v("so")]),a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.10764em"}},[s._v("f")]),a("span",{staticClass:"mord mathnormal mtight"},[s._v("t")]),a("span",{staticClass:"mord mathnormal mtight"},[s._v("ma")]),a("span",{staticClass:"mord mathnormal mtight"},[s._v("x")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.286108em"}},[a("span")])])])])]),a("span",{staticClass:"mopen"},[s._v("(")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.03588em"}},[s._v("v")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.03588em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("c")])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])]),a("span",{staticClass:"mpunct"},[s._v(",")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"mord mathnormal"},[s._v("o")]),a("span",{staticClass:"mpunct"},[s._v(",")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.10903em"}},[s._v("U")]),a("span",{staticClass:"mclose"},[s._v(")")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mrel"},[s._v("=")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}})]),a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"2.3794880000000003em","vertical-align":"-1.329483em"}}),a("span",{staticClass:"mord"},[s._v("−")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"mop op-limits"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"1.050005em"}},[a("span",{staticStyle:{top:"-1.8478869999999998em","margin-left":"0em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.05em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.02691em"}},[s._v("w")]),a("span",{staticClass:"mrel mtight"},[s._v("∈")]),a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.22222em"}},[s._v("V")]),a("span",{staticClass:"mord mathnormal mtight"},[s._v("oc")]),a("span",{staticClass:"mord mathnormal mtight"},[s._v("ab")])])])]),a("span",{staticStyle:{top:"-3.0500049999999996em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.05em"}}),a("span",[a("span",{staticClass:"mop op-symbol large-op"},[s._v("∑")])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"1.329483em"}},[a("span")])])])]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.03588em"}},[s._v("y")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.03588em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.02691em"}},[s._v("w")])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])]),a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.01968em"}},[s._v("l")]),a("span",{staticClass:"mord mathnormal"},[s._v("o")]),a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.03588em"}},[s._v("g")]),a("span",{staticClass:"mopen"},[s._v("(")]),a("span",{staticClass:"mord accent"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.69444em"}},[a("span",{staticStyle:{top:"-3em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.03588em"}},[s._v("y")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.03588em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.02691em"}},[s._v("w")])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])])]),a("span",{staticStyle:{top:"-3em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"accent-body",staticStyle:{left:"-0.25em"}},[a("span",{staticClass:"mord"},[s._v("^")])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.19444em"}},[a("span")])])])]),a("span",{staticClass:"mclose"},[s._v(")")])])])])])]),s._v(" "),a("h3",{attrs:{id:"_1-证明概率的负对数损失函数等价于交叉熵损失函数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-证明概率的负对数损失函数等价于交叉熵损失函数"}},[s._v("#")]),s._v(" 1.证明概率的负对数损失函数等价于交叉熵损失函数")]),s._v(" "),a("p",[s._v("这就是作业2的第一小问。证明也十分简单：\n因为真实分布"),a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[a("semantics",[a("mrow",[a("mi",[s._v("y")])],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("y")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"0.625em","vertical-align":"-0.19444em"}}),a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.03588em"}},[s._v("y")])])])]),s._v("是一个one-hot向量，即只有当前真实的上下文词o的位置上，才是1。故")]),s._v(" "),a("p",[a("span",{staticClass:"katex-display"},[a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"}},[a("semantics",[a("mtable",{attrs:{rowspacing:"0.2500em",columnalign:"right left",columnspacing:"0em"}},[a("mtr",[a("mtd",{staticClass:"mtr-glue"}),a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow")],1)],1),a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow",[a("mrow"),a("munder",[a("mo",[s._v("∑")]),a("mrow",[a("mi",[s._v("w")]),a("mo",[s._v("∈")]),a("mi",[s._v("V")]),a("mi",[s._v("o")]),a("mi",[s._v("c")]),a("mi",[s._v("a")]),a("mi",[s._v("b")])],1)],1),a("msub",[a("mi",[s._v("y")]),a("mi",[s._v("w")])],1),a("mi",[s._v("l")]),a("mi",[s._v("o")]),a("mi",[s._v("g")]),a("mo",{attrs:{stretchy:"false"}},[s._v("(")]),a("mover",{attrs:{accent:"true"}},[a("msub",[a("mi",[s._v("y")]),a("mi",[s._v("w")])],1),a("mo",[s._v("^")])],1),a("mo",{attrs:{stretchy:"false"}},[s._v(")")]),a("mstyle",{attrs:{mathcolor:" #cc0000"}},[a("mtext",[s._v("\\nonumber")])],1)],1)],1)],1),a("mtd",{staticClass:"mtr-glue"}),a("mtd",{staticClass:"mml-eqn-num"})],1),a("mtr",[a("mtd",{staticClass:"mtr-glue"}),a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow")],1)],1),a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow",[a("mrow"),a("mo",[s._v("=")]),a("mn",[s._v("1")]),a("mo",[s._v("×")]),a("mi",[s._v("l")]),a("mi",[s._v("o")]),a("mi",[s._v("g")]),a("mo",{attrs:{stretchy:"false"}},[s._v("(")]),a("mover",{attrs:{accent:"true"}},[a("msub",[a("mi",[s._v("y")]),a("mi",[s._v("o")])],1),a("mo",[s._v("^")])],1),a("mo",{attrs:{stretchy:"false"}},[s._v(")")]),a("mstyle",{attrs:{mathcolor:" #cc0000"}},[a("mtext",[s._v("\\nonumber")])],1)],1)],1)],1),a("mtd",{staticClass:"mtr-glue"}),a("mtd",{staticClass:"mml-eqn-num"})],1),a("mtr",[a("mtd",{staticClass:"mtr-glue"}),a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow")],1)],1),a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow",[a("mrow"),a("mo",[s._v("=")]),a("mi",[s._v("l")]),a("mi",[s._v("o")]),a("mi",[s._v("g")]),a("mi",[s._v("P")]),a("mo",{attrs:{stretchy:"false"}},[s._v("(")]),a("mi",[s._v("O")]),a("mo",[s._v("=")]),a("mi",[s._v("o")]),a("mi",{attrs:{mathvariant:"normal"}},[s._v("∣")]),a("mi",[s._v("C")]),a("mo",[s._v("=")]),a("mi",[s._v("c")]),a("mo",{attrs:{stretchy:"false"}},[s._v(")")]),a("mstyle",{attrs:{mathcolor:" #cc0000"}},[a("mtext",[s._v("\\nonumber")])],1)],1)],1)],1),a("mtd",{staticClass:"mtr-glue"}),a("mtd",{staticClass:"mml-eqn-num"})],1)],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("\\begin{align}\n&\\sum_{w \\in Vocab} y_w log(\\hat{y_w}) \\nonumber \\\\\n&=  1 \\times log(\\hat{y_o})\\nonumber \\\\\n&=logP(O=o|C=c) \\nonumber\n\\end{align}\n")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"5.679487999999999em","vertical-align":"-2.5897439999999996em"}}),a("span",{staticClass:"mtable"},[a("span",{staticClass:"col-align-r"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"3.089744em"}},[a("span",{staticStyle:{top:"-5.089744em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.050005em"}}),a("span",{staticClass:"mord"})]),a("span",{staticStyle:{top:"-2.620261em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.050005em"}}),a("span",{staticClass:"mord"})]),a("span",{staticStyle:{top:"-1.1202610000000006em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.050005em"}}),a("span",{staticClass:"mord"})])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"2.5897439999999996em"}},[a("span")])])])]),a("span",{staticClass:"col-align-l"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"3.089744em"}},[a("span",{staticStyle:{top:"-5.089744em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.050005em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"}),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"mop op-limits"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"1.050005em"}},[a("span",{staticStyle:{top:"-1.8478869999999998em","margin-left":"0em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.05em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.02691em"}},[s._v("w")]),a("span",{staticClass:"mrel mtight"},[s._v("∈")]),a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.22222em"}},[s._v("V")]),a("span",{staticClass:"mord mathnormal mtight"},[s._v("oc")]),a("span",{staticClass:"mord mathnormal mtight"},[s._v("ab")])])])]),a("span",{staticStyle:{top:"-3.0500049999999996em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.05em"}}),a("span",[a("span",{staticClass:"mop op-symbol large-op"},[s._v("∑")])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"1.329483em"}},[a("span")])])])]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.03588em"}},[s._v("y")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.03588em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.02691em"}},[s._v("w")])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])]),a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.01968em"}},[s._v("l")]),a("span",{staticClass:"mord mathnormal"},[s._v("o")]),a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.03588em"}},[s._v("g")]),a("span",{staticClass:"mopen"},[s._v("(")]),a("span",{staticClass:"mord accent"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.69444em"}},[a("span",{staticStyle:{top:"-3em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.03588em"}},[s._v("y")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.03588em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.02691em"}},[s._v("w")])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])])]),a("span",{staticStyle:{top:"-3em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"accent-body",staticStyle:{left:"-0.25em"}},[a("span",{staticClass:"mord"},[s._v("^")])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.19444em"}},[a("span")])])])]),a("span",{staticClass:"mclose"},[s._v(")")]),a("span",{staticClass:"mord text",staticStyle:{color:"#cc0000"}},[a("span",{staticClass:"mord",staticStyle:{color:"#cc0000"}},[s._v("\\nonumber")])])])]),a("span",{staticStyle:{top:"-2.620261em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.050005em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"}),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mrel"},[s._v("=")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mord"},[s._v("1")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),a("span",{staticClass:"mbin"},[s._v("×")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.01968em"}},[s._v("l")]),a("span",{staticClass:"mord mathnormal"},[s._v("o")]),a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.03588em"}},[s._v("g")]),a("span",{staticClass:"mopen"},[s._v("(")]),a("span",{staticClass:"mord accent"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.69444em"}},[a("span",{staticStyle:{top:"-3em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.03588em"}},[s._v("y")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.03588em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("o")])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])])]),a("span",{staticStyle:{top:"-3em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"accent-body",staticStyle:{left:"-0.25em"}},[a("span",{staticClass:"mord"},[s._v("^")])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.19444em"}},[a("span")])])])]),a("span",{staticClass:"mclose"},[s._v(")")]),a("span",{staticClass:"mord text",staticStyle:{color:"#cc0000"}},[a("span",{staticClass:"mord",staticStyle:{color:"#cc0000"}},[s._v("\\nonumber")])])])]),a("span",{staticStyle:{top:"-1.1202610000000006em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.050005em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"}),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mrel"},[s._v("=")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.01968em"}},[s._v("l")]),a("span",{staticClass:"mord mathnormal"},[s._v("o")]),a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.03588em"}},[s._v("g")]),a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.13889em"}},[s._v("P")]),a("span",{staticClass:"mopen"},[s._v("(")]),a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.02778em"}},[s._v("O")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mrel"},[s._v("=")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mord mathnormal"},[s._v("o")]),a("span",{staticClass:"mord"},[s._v("∣")]),a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.07153em"}},[s._v("C")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mrel"},[s._v("=")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mord mathnormal"},[s._v("c")]),a("span",{staticClass:"mclose"},[s._v(")")]),a("span",{staticClass:"mord text",staticStyle:{color:"#cc0000"}},[a("span",{staticClass:"mord",staticStyle:{color:"#cc0000"}},[s._v("\\nonumber")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"2.5897439999999996em"}},[a("span")])])])])])]),a("span",{staticClass:"tag"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"3.089744em"}},[a("span",{staticStyle:{top:"-5.089744em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.050005em"}}),a("span",{staticClass:"eqn-num"})]),a("span",{staticStyle:{top:"-2.620261em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.050005em"}}),a("span",{staticClass:"eqn-num"})]),a("span",{staticStyle:{top:"-1.1202610000000006em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.050005em"}}),a("span",{staticClass:"eqn-num"})])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"2.5897439999999996em"}},[a("span")])])])])])])])]),s._v(" "),a("p",[s._v("即证。")]),s._v(" "),a("h3",{attrs:{id:"_2-计算naive-softmax-loss对中心词、上下文词的导数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-计算naive-softmax-loss对中心词、上下文词的导数"}},[s._v("#")]),s._v(" 2.计算naive-softmax loss对中心词、上下文词的导数")]),s._v(" "),a("p",[s._v("求导这个就不用过多的解释，就是chain rule一把梭，下面展示一下求导过程：")]),s._v(" "),a("p",[s._v("对中心词向量"),a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[a("semantics",[a("mrow",[a("msub",[a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("v")]),a("mi",[s._v("c")])],1)],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("\\boldsymbol{v}_c")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"0.59444em","vertical-align":"-0.15em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol",staticStyle:{"margin-right":"0.03704em"}},[s._v("v")])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("c")])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])])])])]),s._v("求导：")]),s._v(" "),a("p",[a("span",{staticClass:"katex-display"},[a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"}},[a("semantics",[a("mtable",{attrs:{rowspacing:"0.2500em",columnalign:"right left",columnspacing:"0em"}},[a("mtr",[a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow")],1)],1),a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow",[a("mrow"),a("mfrac",[a("mrow",[a("mi",{attrs:{mathvariant:"normal"}},[s._v("∂")]),a("msub",[a("mi",[s._v("J")]),a("mrow",[a("mtext",[s._v("naive")]),a("mo",[s._v("−")]),a("mtext",[s._v("softmax")])],1)],1),a("mo",{attrs:{stretchy:"false"}},[s._v("(")]),a("msub",[a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("v")]),a("mi",[s._v("c")])],1),a("mo",{attrs:{separator:"true"}},[s._v(",")]),a("mi",[s._v("o")]),a("mo",{attrs:{separator:"true"}},[s._v(",")]),a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("U")]),a("mo",{attrs:{stretchy:"false"}},[s._v(")")])],1),a("mrow",[a("mi",{attrs:{mathvariant:"normal"}},[s._v("∂")]),a("msub",[a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("v")]),a("mi",[s._v("c")])],1)],1)],1)],1)],1)],1)],1),a("mtr",[a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow")],1)],1),a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow",[a("mrow"),a("mo",[s._v("=")]),a("mo",[s._v("−")]),a("mfrac",[a("mrow",[a("mi",{attrs:{mathvariant:"normal"}},[s._v("∂")]),a("mi",[s._v("log")]),a("mo",[s._v("⁡")]),a("mo",{attrs:{stretchy:"false"}},[s._v("(")]),a("mi",[s._v("P")]),a("mo",{attrs:{stretchy:"false"}},[s._v("(")]),a("mi",[s._v("O")]),a("mo",[s._v("=")]),a("mi",[s._v("o")]),a("mi",{attrs:{mathvariant:"normal"}},[s._v("∣")]),a("mi",[s._v("C")]),a("mo",[s._v("=")]),a("mi",[s._v("c")]),a("mo",{attrs:{stretchy:"false"}},[s._v(")")]),a("mo",{attrs:{stretchy:"false"}},[s._v(")")])],1),a("mrow",[a("mi",{attrs:{mathvariant:"normal"}},[s._v("∂")]),a("msub",[a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("v")]),a("mi",[s._v("c")])],1)],1)],1)],1)],1)],1)],1),a("mtr",[a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow")],1)],1),a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow",[a("mrow"),a("mo",[s._v("=")]),a("mfrac",[a("mrow",[a("mi",{attrs:{mathvariant:"normal"}},[s._v("∂")]),a("mi",[s._v("log")]),a("mo",[s._v("⁡")]),a("mrow",[a("mo",{attrs:{fence:"true"}},[s._v("(")]),a("munderover",[a("mo",[s._v("∑")]),a("mrow",[a("mi",[s._v("w")]),a("mo",[s._v("=")]),a("mn",[s._v("1")])],1),a("mi",[s._v("V")])],1),a("mi",[s._v("exp")]),a("mo",[s._v("⁡")]),a("mrow",[a("mo",{attrs:{fence:"true"}},[s._v("(")]),a("msubsup",[a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("u")]),a("mi",[s._v("w")]),a("mi",[s._v("T")])],1),a("msub",[a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("v")]),a("mi",[s._v("c")])],1),a("mo",{attrs:{fence:"true"}},[s._v(")")])],1),a("mo",{attrs:{fence:"true"}},[s._v(")")])],1)],1),a("mrow",[a("mi",{attrs:{mathvariant:"normal"}},[s._v("∂")]),a("msub",[a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("v")]),a("mi",[s._v("c")])],1)],1)],1),a("mo",[s._v("−")]),a("mfrac",[a("mrow",[a("mi",{attrs:{mathvariant:"normal"}},[s._v("∂")]),a("mi",[s._v("log")]),a("mo",[s._v("⁡")]),a("mrow",[a("mo",{attrs:{fence:"true"}},[s._v("(")]),a("mi",[s._v("exp")]),a("mo",[s._v("⁡")]),a("mrow",[a("mo",{attrs:{fence:"true"}},[s._v("(")]),a("msubsup",[a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("u")]),a("mi",[s._v("o")]),a("mi",[s._v("T")])],1),a("msub",[a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("v")]),a("mi",[s._v("c")])],1),a("mo",{attrs:{fence:"true"}},[s._v(")")])],1),a("mo",{attrs:{fence:"true"}},[s._v(")")])],1)],1),a("mrow",[a("mi",{attrs:{mathvariant:"normal"}},[s._v("∂")]),a("msub",[a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("v")]),a("mi",[s._v("c")])],1)],1)],1)],1)],1)],1)],1),a("mtr",[a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow")],1)],1),a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow",[a("mrow"),a("mo",[s._v("=")]),a("munderover",[a("mo",[s._v("∑")]),a("mi",[s._v("w")]),a("mi",[s._v("V")])],1),a("msub",[a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("u")]),a("mi",[s._v("w")])],1),a("msub",[a("mover",{attrs:{accent:"true"}},[a("mi",[s._v("y")]),a("mo",[s._v("^")])],1),a("mi",[s._v("w")])],1),a("mo",[s._v("−")]),a("msub",[a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("u")]),a("mi",[s._v("o")])],1)],1)],1)],1)],1),a("mtr",[a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow")],1)],1),a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow",[a("mrow"),a("mo",[s._v("=")]),a("msup",[a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("U")]),a("mi",[s._v("T")])],1),a("mo",{attrs:{stretchy:"false"}},[s._v("(")]),a("mover",{attrs:{accent:"true"}},[a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("y")]),a("mo",[s._v("^")])],1),a("mo",[s._v("−")]),a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("y")]),a("mo",{attrs:{stretchy:"false"}},[s._v(")")])],1)],1)],1)],1)],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("\\begin{aligned}\n& \\frac{\\partial J_{\\text {naive}-\\text {softmax}}(\\boldsymbol{v}_{c}, o, \\boldsymbol{U})}{\\partial \\boldsymbol{v}_{c}} \\\\\n&=-\\frac{\\partial \\log (P(O=o | C=c))}{\\partial \\boldsymbol{v}_{c}} \\\\\n&=\\frac{\\partial \\log \\left(\\sum_{w=1}^{V} \\exp \\left(\\boldsymbol{u}_{w}^{T} \\boldsymbol{v}_{c}\\right)\\right)}{\\partial \\boldsymbol{v}_{c}} -\\frac{\\partial \\log \\left(\\exp \\left(\\boldsymbol{u}_{o}^{T} \\boldsymbol{v}_{c}\\right)\\right)}{\\partial \\boldsymbol{v}_{c}}\\\\\n&=\\sum^V_w \\boldsymbol{u}_w \\hat{y}_w -\\boldsymbol{u}_{o}\\\\\n&=\\boldsymbol{U}^{T}(\\hat{\\boldsymbol{y}}-\\boldsymbol{y})\n\\end{aligned}\n")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"13.407702em","vertical-align":"-6.453851em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mtable"},[a("span",{staticClass:"col-align-r"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"6.953851em"}},[a("span",{staticStyle:{top:"-9.716871000000001em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"4.1900200000000005em"}}),a("span",{staticClass:"mord"})]),a("span",{staticStyle:{top:"-7.153871000000001em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"4.1900200000000005em"}}),a("span",{staticClass:"mord"})]),a("span",{staticStyle:{top:"-3.8278510000000017em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"4.1900200000000005em"}}),a("span",{staticClass:"mord"})]),a("span",{staticStyle:{top:"-0.8635150000000009em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"4.1900200000000005em"}}),a("span",{staticClass:"mord"})]),a("span",{staticStyle:{top:"1.6038309999999996em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"4.1900200000000005em"}}),a("span",{staticClass:"mord"})])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"6.453851em"}},[a("span")])])])]),a("span",{staticClass:"col-align-l"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"6.953851em"}},[a("span",{staticStyle:{top:"-9.716871000000001em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"4.1900200000000005em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mopen nulldelimiter"}),a("span",{staticClass:"mfrac"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"1.427em"}},[a("span",{staticStyle:{top:"-2.3139999999999996em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord",staticStyle:{"margin-right":"0.05556em"}},[s._v("∂")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol",staticStyle:{"margin-right":"0.03704em"}},[s._v("v")])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("c")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])])])]),a("span",{staticStyle:{top:"-3.23em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"frac-line",staticStyle:{"border-bottom-width":"0.04em"}})]),a("span",{staticStyle:{top:"-3.677em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord",staticStyle:{"margin-right":"0.05556em"}},[s._v("∂")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.09618em"}},[s._v("J")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.3361079999999999em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.09618em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord text mtight"},[a("span",{staticClass:"mord mtight"},[s._v("naive")])]),a("span",{staticClass:"mbin mtight"},[s._v("−")]),a("span",{staticClass:"mord text mtight"},[a("span",{staticClass:"mord mtight"},[s._v("softmax")])])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.208331em"}},[a("span")])])])])]),a("span",{staticClass:"mopen"},[s._v("(")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol",staticStyle:{"margin-right":"0.03704em"}},[s._v("v")])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("c")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])]),a("span",{staticClass:"mpunct"},[s._v(",")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"mord mathnormal"},[s._v("o")]),a("span",{staticClass:"mpunct"},[s._v(",")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol",staticStyle:{"margin-right":"0.11424em"}},[s._v("U")])])]),a("span",{staticClass:"mclose"},[s._v(")")])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.8360000000000001em"}},[a("span")])])])]),a("span",{staticClass:"mclose nulldelimiter"})])])]),a("span",{staticStyle:{top:"-7.153871000000001em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"4.1900200000000005em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"}),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mrel"},[s._v("=")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mord"},[s._v("−")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mopen nulldelimiter"}),a("span",{staticClass:"mfrac"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"1.427em"}},[a("span",{staticStyle:{top:"-2.3139999999999996em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord",staticStyle:{"margin-right":"0.05556em"}},[s._v("∂")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol",staticStyle:{"margin-right":"0.03704em"}},[s._v("v")])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("c")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])])])]),a("span",{staticStyle:{top:"-3.23em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"frac-line",staticStyle:{"border-bottom-width":"0.04em"}})]),a("span",{staticStyle:{top:"-3.677em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord",staticStyle:{"margin-right":"0.05556em"}},[s._v("∂")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"mop"},[s._v("lo"),a("span",{staticStyle:{"margin-right":"0.01389em"}},[s._v("g")])]),a("span",{staticClass:"mopen"},[s._v("(")]),a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.13889em"}},[s._v("P")]),a("span",{staticClass:"mopen"},[s._v("(")]),a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.02778em"}},[s._v("O")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mrel"},[s._v("=")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mord mathnormal"},[s._v("o")]),a("span",{staticClass:"mord"},[s._v("∣")]),a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.07153em"}},[s._v("C")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mrel"},[s._v("=")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mord mathnormal"},[s._v("c")]),a("span",{staticClass:"mclose"},[s._v("))")])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.8360000000000001em"}},[a("span")])])])]),a("span",{staticClass:"mclose nulldelimiter"})])])]),a("span",{staticStyle:{top:"-3.8278510000000017em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"4.1900200000000005em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"}),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mrel"},[s._v("=")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mopen nulldelimiter"}),a("span",{staticClass:"mfrac"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"2.19002em"}},[a("span",{staticStyle:{top:"-2.464em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.15em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord",staticStyle:{"margin-right":"0.05556em"}},[s._v("∂")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol",staticStyle:{"margin-right":"0.03704em"}},[s._v("v")])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("c")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])])])]),a("span",{staticStyle:{top:"-3.38em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.15em"}}),a("span",{staticClass:"frac-line",staticStyle:{"border-bottom-width":"0.04em"}})]),a("span",{staticStyle:{top:"-4.1900200000000005em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.15em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord",staticStyle:{"margin-right":"0.05556em"}},[s._v("∂")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"mop"},[s._v("lo"),a("span",{staticStyle:{"margin-right":"0.01389em"}},[s._v("g")])]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"minner"},[a("span",{staticClass:"mopen delimcenter",staticStyle:{top:"0em"}},[a("span",{staticClass:"delimsizing size2"},[s._v("(")])]),a("span",{staticClass:"mop"},[a("span",{staticClass:"mop op-symbol small-op",staticStyle:{position:"relative",top:"-0.0000050000000000050004em"}},[s._v("∑")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.981231em"}},[a("span",{staticStyle:{top:"-2.40029em","margin-left":"0em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.02691em"}},[s._v("w")]),a("span",{staticClass:"mrel mtight"},[s._v("=")]),a("span",{staticClass:"mord mtight"},[s._v("1")])])])]),a("span",{staticStyle:{top:"-3.2029em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.22222em"}},[s._v("V")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.29971000000000003em"}},[a("span")])])])])]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"mop"},[s._v("exp")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"minner"},[a("span",{staticClass:"mopen delimcenter",staticStyle:{top:"0em"}},[a("span",{staticClass:"delimsizing size1"},[s._v("(")])]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol"},[s._v("u")])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.8413309999999999em"}},[a("span",{staticStyle:{top:"-2.4530000000000003em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.02691em"}},[s._v("w")])])])]),a("span",{staticStyle:{top:"-3.063em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.13889em"}},[s._v("T")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.247em"}},[a("span")])])])])]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol",staticStyle:{"margin-right":"0.03704em"}},[s._v("v")])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("c")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])]),a("span",{staticClass:"mclose delimcenter",staticStyle:{top:"0em"}},[a("span",{staticClass:"delimsizing size1"},[s._v(")")])])]),a("span",{staticClass:"mclose delimcenter",staticStyle:{top:"0em"}},[a("span",{staticClass:"delimsizing size2"},[s._v(")")])])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.8360000000000001em"}},[a("span")])])])]),a("span",{staticClass:"mclose nulldelimiter"})]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),a("span",{staticClass:"mbin"},[s._v("−")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mopen nulldelimiter"}),a("span",{staticClass:"mfrac"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"1.59001em"}},[a("span",{staticStyle:{top:"-2.3139999999999996em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord",staticStyle:{"margin-right":"0.05556em"}},[s._v("∂")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol",staticStyle:{"margin-right":"0.03704em"}},[s._v("v")])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("c")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])])])]),a("span",{staticStyle:{top:"-3.23em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"frac-line",staticStyle:{"border-bottom-width":"0.04em"}})]),a("span",{staticStyle:{top:"-3.7400100000000003em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord",staticStyle:{"margin-right":"0.05556em"}},[s._v("∂")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"mop"},[s._v("lo"),a("span",{staticStyle:{"margin-right":"0.01389em"}},[s._v("g")])]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"minner"},[a("span",{staticClass:"mopen delimcenter",staticStyle:{top:"0em"}},[a("span",{staticClass:"delimsizing size1"},[s._v("(")])]),a("span",{staticClass:"mop"},[s._v("exp")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"minner"},[a("span",{staticClass:"mopen delimcenter",staticStyle:{top:"0em"}},[a("span",{staticClass:"delimsizing size1"},[s._v("(")])]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol"},[s._v("u")])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.8413309999999999em"}},[a("span",{staticStyle:{top:"-2.4530000000000003em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("o")])])])]),a("span",{staticStyle:{top:"-3.063em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.13889em"}},[s._v("T")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.247em"}},[a("span")])])])])]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol",staticStyle:{"margin-right":"0.03704em"}},[s._v("v")])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("c")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])]),a("span",{staticClass:"mclose delimcenter",staticStyle:{top:"0em"}},[a("span",{staticClass:"delimsizing size1"},[s._v(")")])])]),a("span",{staticClass:"mclose delimcenter",staticStyle:{top:"0em"}},[a("span",{staticClass:"delimsizing size1"},[s._v(")")])])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.8360000000000001em"}},[a("span")])])])]),a("span",{staticClass:"mclose nulldelimiter"})])])]),a("span",{staticStyle:{top:"-0.8635150000000009em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"4.1900200000000005em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"}),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mrel"},[s._v("=")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mop op-limits"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"1.8283360000000002em"}},[a("span",{staticStyle:{top:"-1.8999949999999999em","margin-left":"0em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.05em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.02691em"}},[s._v("w")])])]),a("span",{staticStyle:{top:"-3.0500049999999996em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.05em"}}),a("span",[a("span",{staticClass:"mop op-symbol large-op"},[s._v("∑")])])]),a("span",{staticStyle:{top:"-4.300005em","margin-left":"0em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.05em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.22222em"}},[s._v("V")])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"1.250005em"}},[a("span")])])])]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol"},[s._v("u")])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.02691em"}},[s._v("w")])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord accent"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.69444em"}},[a("span",{staticStyle:{top:"-3em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.03588em"}},[s._v("y")])]),a("span",{staticStyle:{top:"-3em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"accent-body",staticStyle:{left:"-0.19444em"}},[a("span",{staticClass:"mord"},[s._v("^")])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.19444em"}},[a("span")])])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.03588em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.02691em"}},[s._v("w")])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),a("span",{staticClass:"mbin"},[s._v("−")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol"},[s._v("u")])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("o")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])])])]),a("span",{staticStyle:{top:"1.6038309999999996em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"4.1900200000000005em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"}),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mrel"},[s._v("=")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol",staticStyle:{"margin-right":"0.11424em"}},[s._v("U")])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.917341em"}},[a("span",{staticStyle:{top:"-3.1390100000000003em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.13889em"}},[s._v("T")])])])])])])])])]),a("span",{staticClass:"mopen"},[s._v("(")]),a("span",{staticClass:"mord accent"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.70788em"}},[a("span",{staticStyle:{top:"-3em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol",staticStyle:{"margin-right":"0.03704em"}},[s._v("y")])])])]),a("span",{staticStyle:{top:"-3.01344em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"accent-body",staticStyle:{left:"-0.25em"}},[a("span",{staticClass:"mord"},[s._v("^")])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.19444em"}},[a("span")])])])]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),a("span",{staticClass:"mbin"},[s._v("−")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol",staticStyle:{"margin-right":"0.03704em"}},[s._v("y")])])]),a("span",{staticClass:"mclose"},[s._v(")")])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"6.453851em"}},[a("span")])])])])])])])])])])]),s._v(" "),a("p",[s._v("对上下文词向量"),a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[a("semantics",[a("mrow",[a("msub",[a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("u")]),a("mi",[s._v("w")])],1)],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("\\boldsymbol{u}_w")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"0.59444em","vertical-align":"-0.15em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol"},[s._v("u")])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.02691em"}},[s._v("w")])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])])])])]),s._v("求导：")]),s._v(" "),a("p",[a("span",{staticClass:"katex-display"},[a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"}},[a("semantics",[a("mtable",{attrs:{rowspacing:"0.2500em",columnalign:"right left",columnspacing:"0em"}},[a("mtr",[a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow")],1)],1),a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow",[a("mrow"),a("mfrac",[a("mrow",[a("mi",{attrs:{mathvariant:"normal"}},[s._v("∂")]),a("msub",[a("mi",[s._v("J")]),a("mtext",[s._v("naive-softmax")])],1),a("mrow",[a("mo",{attrs:{fence:"true"}},[s._v("(")]),a("msub",[a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("v")]),a("mi",[s._v("c")])],1),a("mo",{attrs:{separator:"true"}},[s._v(",")]),a("mi",[s._v("o")]),a("mo",{attrs:{separator:"true"}},[s._v(",")]),a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("U")]),a("mo",{attrs:{fence:"true"}},[s._v(")")])],1)],1),a("mrow",[a("mi",{attrs:{mathvariant:"normal"}},[s._v("∂")]),a("msub",[a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("u")]),a("mi",[s._v("w")])],1)],1)],1)],1)],1)],1)],1),a("mtr",[a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow")],1)],1),a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow",[a("mrow"),a("mo",[s._v("=")]),a("mfrac",[a("mrow",[a("mi",{attrs:{mathvariant:"normal"}},[s._v("∂")]),a("mi",[s._v("log")]),a("mo",[s._v("⁡")]),a("mrow",[a("mo",{attrs:{fence:"true"}},[s._v("(")]),a("munderover",[a("mo",[s._v("∑")]),a("mrow",[a("mi",[s._v("w")]),a("mo",[s._v("=")]),a("mn",[s._v("1")])],1),a("mi",[s._v("V")])],1),a("mi",[s._v("exp")]),a("mo",[s._v("⁡")]),a("mrow",[a("mo",{attrs:{fence:"true"}},[s._v("(")]),a("msubsup",[a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("u")]),a("mi",[s._v("w")]),a("mi",[s._v("T")])],1),a("msub",[a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("v")]),a("mi",[s._v("c")])],1),a("mo",{attrs:{fence:"true"}},[s._v(")")])],1),a("mo",{attrs:{fence:"true"}},[s._v(")")])],1)],1),a("mrow",[a("mi",{attrs:{mathvariant:"normal"}},[s._v("∂")]),a("msub",[a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("u")]),a("mi",[s._v("w")])],1)],1)],1),a("mo",[s._v("−")]),a("mfrac",[a("mrow",[a("mi",{attrs:{mathvariant:"normal"}},[s._v("∂")]),a("mi",[s._v("log")]),a("mo",[s._v("⁡")]),a("mrow",[a("mo",{attrs:{fence:"true"}},[s._v("(")]),a("mi",[s._v("exp")]),a("mo",[s._v("⁡")]),a("mrow",[a("mo",{attrs:{fence:"true"}},[s._v("(")]),a("msubsup",[a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("u")]),a("mi",[s._v("o")]),a("mi",[s._v("T")])],1),a("msub",[a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("v")]),a("mi",[s._v("c")])],1),a("mo",{attrs:{fence:"true"}},[s._v(")")])],1),a("mo",{attrs:{fence:"true"}},[s._v(")")])],1)],1),a("mrow",[a("mi",{attrs:{mathvariant:"normal"}},[s._v("∂")]),a("msub",[a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("u")]),a("mi",[s._v("w")])],1)],1)],1)],1)],1)],1)],1)],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("\\begin{aligned}\n&\\frac{\\partial J_{\\text {naive-softmax}}\\left(\\boldsymbol{v}_{c}, o, \\boldsymbol{U}\\right)}{\\partial \\boldsymbol{u}_{w}} \\\\\n&=\\frac{\\partial \\log \\left(\\sum_{w=1}^{V} \\exp \\left(\\boldsymbol{u}_{w}^{T} \\boldsymbol{v}_{c}\\right)\\right)}{\\partial \\boldsymbol{u}_{w}}-\\frac{\\partial \\log \\left(\\exp \\left(\\boldsymbol{u}_{o}^{T} \\boldsymbol{v}_{c}\\right)\\right)}{\\partial \\boldsymbol{u}_{w}}\n\\end{aligned}\n")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"5.88902em","vertical-align":"-2.69451em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mtable"},[a("span",{staticClass:"col-align-r"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"3.19451em"}},[a("span",{staticStyle:{top:"-5.957530000000001em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"4.1900200000000005em"}}),a("span",{staticClass:"mord"})]),a("span",{staticStyle:{top:"-2.6315100000000005em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"4.1900200000000005em"}}),a("span",{staticClass:"mord"})])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"2.69451em"}},[a("span")])])])]),a("span",{staticClass:"col-align-l"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"3.19451em"}},[a("span",{staticStyle:{top:"-5.957530000000001em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"4.1900200000000005em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mopen nulldelimiter"}),a("span",{staticClass:"mfrac"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"1.427em"}},[a("span",{staticStyle:{top:"-2.3139999999999996em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord",staticStyle:{"margin-right":"0.05556em"}},[s._v("∂")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol"},[s._v("u")])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.02691em"}},[s._v("w")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])])])]),a("span",{staticStyle:{top:"-3.23em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"frac-line",staticStyle:{"border-bottom-width":"0.04em"}})]),a("span",{staticStyle:{top:"-3.677em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord",staticStyle:{"margin-right":"0.05556em"}},[s._v("∂")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.09618em"}},[s._v("J")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.33610799999999996em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.09618em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord text mtight"},[a("span",{staticClass:"mord mtight"},[s._v("naive-softmax")])])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"minner"},[a("span",{staticClass:"mopen delimcenter",staticStyle:{top:"0em"}},[s._v("(")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol",staticStyle:{"margin-right":"0.03704em"}},[s._v("v")])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("c")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])]),a("span",{staticClass:"mpunct"},[s._v(",")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"mord mathnormal"},[s._v("o")]),a("span",{staticClass:"mpunct"},[s._v(",")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol",staticStyle:{"margin-right":"0.11424em"}},[s._v("U")])])]),a("span",{staticClass:"mclose delimcenter",staticStyle:{top:"0em"}},[s._v(")")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.8360000000000001em"}},[a("span")])])])]),a("span",{staticClass:"mclose nulldelimiter"})])])]),a("span",{staticStyle:{top:"-2.6315100000000005em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"4.1900200000000005em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"}),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mrel"},[s._v("=")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mopen nulldelimiter"}),a("span",{staticClass:"mfrac"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"2.19002em"}},[a("span",{staticStyle:{top:"-2.464em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.15em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord",staticStyle:{"margin-right":"0.05556em"}},[s._v("∂")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol"},[s._v("u")])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.02691em"}},[s._v("w")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])])])]),a("span",{staticStyle:{top:"-3.38em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.15em"}}),a("span",{staticClass:"frac-line",staticStyle:{"border-bottom-width":"0.04em"}})]),a("span",{staticStyle:{top:"-4.1900200000000005em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.15em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord",staticStyle:{"margin-right":"0.05556em"}},[s._v("∂")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"mop"},[s._v("lo"),a("span",{staticStyle:{"margin-right":"0.01389em"}},[s._v("g")])]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"minner"},[a("span",{staticClass:"mopen delimcenter",staticStyle:{top:"0em"}},[a("span",{staticClass:"delimsizing size2"},[s._v("(")])]),a("span",{staticClass:"mop"},[a("span",{staticClass:"mop op-symbol small-op",staticStyle:{position:"relative",top:"-0.0000050000000000050004em"}},[s._v("∑")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.981231em"}},[a("span",{staticStyle:{top:"-2.40029em","margin-left":"0em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.02691em"}},[s._v("w")]),a("span",{staticClass:"mrel mtight"},[s._v("=")]),a("span",{staticClass:"mord mtight"},[s._v("1")])])])]),a("span",{staticStyle:{top:"-3.2029em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.22222em"}},[s._v("V")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.29971000000000003em"}},[a("span")])])])])]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"mop"},[s._v("exp")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"minner"},[a("span",{staticClass:"mopen delimcenter",staticStyle:{top:"0em"}},[a("span",{staticClass:"delimsizing size1"},[s._v("(")])]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol"},[s._v("u")])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.8413309999999999em"}},[a("span",{staticStyle:{top:"-2.4530000000000003em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.02691em"}},[s._v("w")])])])]),a("span",{staticStyle:{top:"-3.063em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.13889em"}},[s._v("T")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.247em"}},[a("span")])])])])]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol",staticStyle:{"margin-right":"0.03704em"}},[s._v("v")])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("c")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])]),a("span",{staticClass:"mclose delimcenter",staticStyle:{top:"0em"}},[a("span",{staticClass:"delimsizing size1"},[s._v(")")])])]),a("span",{staticClass:"mclose delimcenter",staticStyle:{top:"0em"}},[a("span",{staticClass:"delimsizing size2"},[s._v(")")])])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.8360000000000001em"}},[a("span")])])])]),a("span",{staticClass:"mclose nulldelimiter"})]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),a("span",{staticClass:"mbin"},[s._v("−")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mopen nulldelimiter"}),a("span",{staticClass:"mfrac"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"1.59001em"}},[a("span",{staticStyle:{top:"-2.3139999999999996em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord",staticStyle:{"margin-right":"0.05556em"}},[s._v("∂")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol"},[s._v("u")])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.02691em"}},[s._v("w")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])])])]),a("span",{staticStyle:{top:"-3.23em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"frac-line",staticStyle:{"border-bottom-width":"0.04em"}})]),a("span",{staticStyle:{top:"-3.7400100000000003em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord",staticStyle:{"margin-right":"0.05556em"}},[s._v("∂")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"mop"},[s._v("lo"),a("span",{staticStyle:{"margin-right":"0.01389em"}},[s._v("g")])]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"minner"},[a("span",{staticClass:"mopen delimcenter",staticStyle:{top:"0em"}},[a("span",{staticClass:"delimsizing size1"},[s._v("(")])]),a("span",{staticClass:"mop"},[s._v("exp")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"minner"},[a("span",{staticClass:"mopen delimcenter",staticStyle:{top:"0em"}},[a("span",{staticClass:"delimsizing size1"},[s._v("(")])]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol"},[s._v("u")])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.8413309999999999em"}},[a("span",{staticStyle:{top:"-2.4530000000000003em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("o")])])])]),a("span",{staticStyle:{top:"-3.063em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.13889em"}},[s._v("T")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.247em"}},[a("span")])])])])]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol",staticStyle:{"margin-right":"0.03704em"}},[s._v("v")])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("c")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])]),a("span",{staticClass:"mclose delimcenter",staticStyle:{top:"0em"}},[a("span",{staticClass:"delimsizing size1"},[s._v(")")])])]),a("span",{staticClass:"mclose delimcenter",staticStyle:{top:"0em"}},[a("span",{staticClass:"delimsizing size1"},[s._v(")")])])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.8360000000000001em"}},[a("span")])])])]),a("span",{staticClass:"mclose nulldelimiter"})])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"2.69451em"}},[a("span")])])])])])])])])])])]),s._v(" "),a("p",[s._v("这个时候就要分情况了，\n当w=o时：")]),s._v(" "),a("p",[a("span",{staticClass:"katex-display"},[a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"}},[a("semantics",[a("mtable",{attrs:{rowspacing:"0.2500em",columnalign:"right left right",columnspacing:"0em 1em"}},[a("mtr",[a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow")],1)],1),a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow",[a("mrow"),a("mfrac",[a("mrow",[a("mi",{attrs:{mathvariant:"normal"}},[s._v("∂")]),a("msub",[a("mi",[s._v("J")]),a("mrow",[a("mtext",[s._v("naive")]),a("mo",[s._v("−")]),a("mtext",[s._v("softmax")])],1)],1),a("mrow",[a("mo",{attrs:{fence:"true"}},[s._v("(")]),a("msub",[a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("v")]),a("mi",[s._v("c")])],1),a("mo",{attrs:{separator:"true"}},[s._v(",")]),a("mi",[s._v("o")]),a("mo",{attrs:{separator:"true"}},[s._v(",")]),a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("U")]),a("mo",{attrs:{fence:"true"}},[s._v(")")])],1)],1),a("mrow",[a("mi",{attrs:{mathvariant:"normal"}},[s._v("∂")]),a("msub",[a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("u")]),a("mi",[s._v("w")])],1)],1)],1)],1)],1)],1),a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow")],1)],1)],1),a("mtr",[a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow")],1)],1),a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow",[a("mrow"),a("mo",[s._v("=")]),a("mfrac",[a("mrow",[a("msub",[a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("v")]),a("mi",[s._v("c")])],1),a("mi",[s._v("exp")]),a("mo",[s._v("⁡")]),a("mrow",[a("mo",{attrs:{fence:"true"}},[s._v("(")]),a("msubsup",[a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("u")]),a("mi",[s._v("o")]),a("mi",[s._v("T")])],1),a("msub",[a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("v")]),a("mi",[s._v("c")])],1),a("mo",{attrs:{fence:"true"}},[s._v(")")])],1)],1),a("mrow",[a("munderover",[a("mo",[s._v("∑")]),a("mi",[s._v("i")]),a("mi",[s._v("V")])],1),a("mi",[s._v("exp")]),a("mo",[s._v("⁡")]),a("mrow",[a("mo",{attrs:{fence:"true"}},[s._v("(")]),a("msubsup",[a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("u")]),a("mi",[s._v("i")]),a("mi",[s._v("T")])],1),a("msub",[a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("v")]),a("mi",[s._v("c")])],1),a("mo",{attrs:{fence:"true"}},[s._v(")")])],1)],1)],1),a("mo",[s._v("−")]),a("msub",[a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("v")]),a("mi",[s._v("c")])],1)],1)],1)],1)],1),a("mtr",[a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow")],1)],1),a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow",[a("mrow"),a("mo",[s._v("=")]),a("mo",{attrs:{stretchy:"false"}},[s._v("(")]),a("msub",[a("mover",{attrs:{accent:"true"}},[a("mi",[s._v("y")]),a("mo",[s._v("^")])],1),a("mi",[s._v("o")])],1),a("mo",[s._v("−")]),a("mn",[s._v("1")]),a("mo",{attrs:{stretchy:"false"}},[s._v(")")]),a("msub",[a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("v")]),a("mi",[s._v("c")])],1)],1)],1)],1)],1)],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("\\begin{aligned}\n&\\frac{\\partial J_{\\text {naive}-\\text {softmax}}\\left(\\boldsymbol{v}_{c}, o, \\boldsymbol{U}\\right)}{\\partial \\boldsymbol{u}_{w}} & \\\\\n&=\\frac{\\boldsymbol{v}_{c}\\exp \\left(\\boldsymbol{u}_{o}^{T} \\boldsymbol{v}_{c}\\right)}{\\sum_{i}^{V} \\exp \\left(\\boldsymbol{u}_{i}^{T} \\boldsymbol{v}_{c}\\right)} -\\boldsymbol{v}_{c}\\\\\n&=(\\hat{y}_o-1) \\boldsymbol{v}_{c}\n\\end{aligned}\n")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"7.174250999999999em","vertical-align":"-3.337125499999999em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mtable"},[a("span",{staticClass:"col-align-r"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"3.8371255em"}},[a("span",{staticStyle:{top:"-6.0001355em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.59001em"}}),a("span",{staticClass:"mord"})]),a("span",{staticStyle:{top:"-3.2741255000000002em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.59001em"}}),a("span",{staticClass:"mord"})]),a("span",{staticStyle:{top:"-0.912884500000001em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.59001em"}}),a("span",{staticClass:"mord"})])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"3.337125499999999em"}},[a("span")])])])]),a("span",{staticClass:"col-align-l"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"3.8371255em"}},[a("span",{staticStyle:{top:"-6.0001355em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.59001em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mopen nulldelimiter"}),a("span",{staticClass:"mfrac"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"1.427em"}},[a("span",{staticStyle:{top:"-2.3139999999999996em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord",staticStyle:{"margin-right":"0.05556em"}},[s._v("∂")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol"},[s._v("u")])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.02691em"}},[s._v("w")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])])])]),a("span",{staticStyle:{top:"-3.23em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"frac-line",staticStyle:{"border-bottom-width":"0.04em"}})]),a("span",{staticStyle:{top:"-3.677em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord",staticStyle:{"margin-right":"0.05556em"}},[s._v("∂")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.09618em"}},[s._v("J")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.3361079999999999em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.09618em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord text mtight"},[a("span",{staticClass:"mord mtight"},[s._v("naive")])]),a("span",{staticClass:"mbin mtight"},[s._v("−")]),a("span",{staticClass:"mord text mtight"},[a("span",{staticClass:"mord mtight"},[s._v("softmax")])])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.208331em"}},[a("span")])])])])]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"minner"},[a("span",{staticClass:"mopen delimcenter",staticStyle:{top:"0em"}},[s._v("(")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol",staticStyle:{"margin-right":"0.03704em"}},[s._v("v")])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("c")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])]),a("span",{staticClass:"mpunct"},[s._v(",")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"mord mathnormal"},[s._v("o")]),a("span",{staticClass:"mpunct"},[s._v(",")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol",staticStyle:{"margin-right":"0.11424em"}},[s._v("U")])])]),a("span",{staticClass:"mclose delimcenter",staticStyle:{top:"0em"}},[s._v(")")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.8360000000000001em"}},[a("span")])])])]),a("span",{staticClass:"mclose nulldelimiter"})])])]),a("span",{staticStyle:{top:"-3.2741255000000002em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.59001em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"}),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mrel"},[s._v("=")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mopen nulldelimiter"}),a("span",{staticClass:"mfrac"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"1.59001em"}},[a("span",{staticStyle:{top:"-2.128769em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mop"},[a("span",{staticClass:"mop op-symbol small-op",staticStyle:{position:"relative",top:"-0.0000050000000000050004em"}},[s._v("∑")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.981231em"}},[a("span",{staticStyle:{top:"-2.40029em","margin-left":"0em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("i")])])])]),a("span",{staticStyle:{top:"-3.2029em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.22222em"}},[s._v("V")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.29971000000000003em"}},[a("span")])])])])]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"mop"},[s._v("exp")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"minner"},[a("span",{staticClass:"mopen delimcenter",staticStyle:{top:"0em"}},[a("span",{staticClass:"delimsizing size1"},[s._v("(")])]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol"},[s._v("u")])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.8231310000000001em"}},[a("span",{staticStyle:{top:"-2.4231360000000004em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("i")])])])]),a("span",{staticStyle:{top:"-3.0448000000000004em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.13889em"}},[s._v("T")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.27686399999999994em"}},[a("span")])])])])]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol",staticStyle:{"margin-right":"0.03704em"}},[s._v("v")])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("c")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])]),a("span",{staticClass:"mclose delimcenter",staticStyle:{top:"0em"}},[a("span",{staticClass:"delimsizing size1"},[s._v(")")])])])])]),a("span",{staticStyle:{top:"-3.23em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"frac-line",staticStyle:{"border-bottom-width":"0.04em"}})]),a("span",{staticStyle:{top:"-3.7400100000000003em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol",staticStyle:{"margin-right":"0.03704em"}},[s._v("v")])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("c")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"mop"},[s._v("exp")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"minner"},[a("span",{staticClass:"mopen delimcenter",staticStyle:{top:"0em"}},[a("span",{staticClass:"delimsizing size1"},[s._v("(")])]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol"},[s._v("u")])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.8413309999999999em"}},[a("span",{staticStyle:{top:"-2.4530000000000003em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("o")])])])]),a("span",{staticStyle:{top:"-3.063em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.13889em"}},[s._v("T")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.247em"}},[a("span")])])])])]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol",staticStyle:{"margin-right":"0.03704em"}},[s._v("v")])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("c")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])]),a("span",{staticClass:"mclose delimcenter",staticStyle:{top:"0em"}},[a("span",{staticClass:"delimsizing size1"},[s._v(")")])])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"1.221241em"}},[a("span")])])])]),a("span",{staticClass:"mclose nulldelimiter"})]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),a("span",{staticClass:"mbin"},[s._v("−")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol",staticStyle:{"margin-right":"0.03704em"}},[s._v("v")])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("c")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])])])]),a("span",{staticStyle:{top:"-0.912884500000001em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.59001em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"}),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mrel"},[s._v("=")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mopen"},[s._v("(")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord accent"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.69444em"}},[a("span",{staticStyle:{top:"-3em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.03588em"}},[s._v("y")])]),a("span",{staticStyle:{top:"-3em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"accent-body",staticStyle:{left:"-0.19444em"}},[a("span",{staticClass:"mord"},[s._v("^")])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.19444em"}},[a("span")])])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.03588em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("o")])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),a("span",{staticClass:"mbin"},[s._v("−")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),a("span",{staticClass:"mord"},[s._v("1")]),a("span",{staticClass:"mclose"},[s._v(")")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol",staticStyle:{"margin-right":"0.03704em"}},[s._v("v")])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("c")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"3.337125499999999em"}},[a("span")])])])]),a("span",{staticClass:"arraycolsep",staticStyle:{width:"1em"}}),a("span",{staticClass:"col-align-r"},[a("span",{staticClass:"vlist-t"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"3.8371255em"}},[a("span",{staticStyle:{top:"-5.8371255em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.427em"}}),a("span",{staticClass:"mord"})])])])])])])])])])])])]),s._v(" "),a("p",[s._v("而当w!=o时：")]),s._v(" "),a("p",[a("span",{staticClass:"katex-display"},[a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"}},[a("semantics",[a("mtable",{attrs:{rowspacing:"0.2500em",columnalign:"right left right",columnspacing:"0em 1em"}},[a("mtr",[a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow")],1)],1),a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow",[a("mrow"),a("mfrac",[a("mrow",[a("mi",{attrs:{mathvariant:"normal"}},[s._v("∂")]),a("msub",[a("mi",[s._v("J")]),a("mrow",[a("mtext",[s._v("naive")]),a("mo",[s._v("−")]),a("mtext",[s._v("softmax")])],1)],1),a("mrow",[a("mo",{attrs:{fence:"true"}},[s._v("(")]),a("msub",[a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("v")]),a("mi",[s._v("c")])],1),a("mo",{attrs:{separator:"true"}},[s._v(",")]),a("mi",[s._v("o")]),a("mo",{attrs:{separator:"true"}},[s._v(",")]),a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("U")]),a("mo",{attrs:{fence:"true"}},[s._v(")")])],1)],1),a("mrow",[a("mi",{attrs:{mathvariant:"normal"}},[s._v("∂")]),a("msub",[a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("u")]),a("mi",[s._v("w")])],1)],1)],1)],1)],1)],1),a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow")],1)],1)],1),a("mtr",[a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow")],1)],1),a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow",[a("mrow"),a("mo",[s._v("=")]),a("mfrac",[a("mrow",[a("msub",[a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("v")]),a("mi",[s._v("c")])],1),a("mi",[s._v("exp")]),a("mo",[s._v("⁡")]),a("mrow",[a("mo",{attrs:{fence:"true"}},[s._v("(")]),a("msubsup",[a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("u")]),a("mi",[s._v("w")]),a("mi",[s._v("T")])],1),a("msub",[a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("v")]),a("mi",[s._v("c")])],1),a("mo",{attrs:{fence:"true"}},[s._v(")")])],1)],1),a("mrow",[a("munderover",[a("mo",[s._v("∑")]),a("mi",[s._v("i")]),a("mi",[s._v("V")])],1),a("mi",[s._v("exp")]),a("mo",[s._v("⁡")]),a("mrow",[a("mo",{attrs:{fence:"true"}},[s._v("(")]),a("msubsup",[a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("u")]),a("mi",[s._v("i")]),a("mi",[s._v("T")])],1),a("msub",[a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("v")]),a("mi",[s._v("c")])],1),a("mo",{attrs:{fence:"true"}},[s._v(")")])],1)],1)],1)],1)],1)],1)],1),a("mtr",[a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow")],1)],1),a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow",[a("mrow"),a("mo",[s._v("=")]),a("msub",[a("mover",{attrs:{accent:"true"}},[a("mi",[s._v("y")]),a("mo",[s._v("^")])],1),a("mi",[s._v("w")])],1),a("msub",[a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("v")]),a("mi",[s._v("c")])],1)],1)],1)],1)],1)],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("\\begin{aligned}\n&\\frac{\\partial J_{\\text {naive}-\\text {softmax}}\\left(\\boldsymbol{v}_{c}, o, \\boldsymbol{U}\\right)}{\\partial \\boldsymbol{u}_{w}} & \\\\\n&=\\frac{\\boldsymbol{v}_{c}\\exp \\left(\\boldsymbol{u}_{w}^{T} \\boldsymbol{v}_{c}\\right)}{\\sum_{i}^{V} \\exp \\left(\\boldsymbol{u}_{i}^{T} \\boldsymbol{v}_{c}\\right)} \\\\\n&=\\hat{y}_w \\boldsymbol{v}_{c}\n\\end{aligned}\n")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"7.174250999999999em","vertical-align":"-3.337125499999999em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mtable"},[a("span",{staticClass:"col-align-r"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"3.8371255em"}},[a("span",{staticStyle:{top:"-6.0001355em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.59001em"}}),a("span",{staticClass:"mord"})]),a("span",{staticStyle:{top:"-3.2741255000000002em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.59001em"}}),a("span",{staticClass:"mord"})]),a("span",{staticStyle:{top:"-0.912884500000001em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.59001em"}}),a("span",{staticClass:"mord"})])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"3.337125499999999em"}},[a("span")])])])]),a("span",{staticClass:"col-align-l"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"3.8371255em"}},[a("span",{staticStyle:{top:"-6.0001355em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.59001em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mopen nulldelimiter"}),a("span",{staticClass:"mfrac"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"1.427em"}},[a("span",{staticStyle:{top:"-2.3139999999999996em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord",staticStyle:{"margin-right":"0.05556em"}},[s._v("∂")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol"},[s._v("u")])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.02691em"}},[s._v("w")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])])])]),a("span",{staticStyle:{top:"-3.23em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"frac-line",staticStyle:{"border-bottom-width":"0.04em"}})]),a("span",{staticStyle:{top:"-3.677em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord",staticStyle:{"margin-right":"0.05556em"}},[s._v("∂")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.09618em"}},[s._v("J")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.3361079999999999em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.09618em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord text mtight"},[a("span",{staticClass:"mord mtight"},[s._v("naive")])]),a("span",{staticClass:"mbin mtight"},[s._v("−")]),a("span",{staticClass:"mord text mtight"},[a("span",{staticClass:"mord mtight"},[s._v("softmax")])])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.208331em"}},[a("span")])])])])]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"minner"},[a("span",{staticClass:"mopen delimcenter",staticStyle:{top:"0em"}},[s._v("(")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol",staticStyle:{"margin-right":"0.03704em"}},[s._v("v")])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("c")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])]),a("span",{staticClass:"mpunct"},[s._v(",")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"mord mathnormal"},[s._v("o")]),a("span",{staticClass:"mpunct"},[s._v(",")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol",staticStyle:{"margin-right":"0.11424em"}},[s._v("U")])])]),a("span",{staticClass:"mclose delimcenter",staticStyle:{top:"0em"}},[s._v(")")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.8360000000000001em"}},[a("span")])])])]),a("span",{staticClass:"mclose nulldelimiter"})])])]),a("span",{staticStyle:{top:"-3.2741255000000002em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.59001em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"}),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mrel"},[s._v("=")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mopen nulldelimiter"}),a("span",{staticClass:"mfrac"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"1.59001em"}},[a("span",{staticStyle:{top:"-2.128769em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mop"},[a("span",{staticClass:"mop op-symbol small-op",staticStyle:{position:"relative",top:"-0.0000050000000000050004em"}},[s._v("∑")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.981231em"}},[a("span",{staticStyle:{top:"-2.40029em","margin-left":"0em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("i")])])])]),a("span",{staticStyle:{top:"-3.2029em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.22222em"}},[s._v("V")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.29971000000000003em"}},[a("span")])])])])]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"mop"},[s._v("exp")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"minner"},[a("span",{staticClass:"mopen delimcenter",staticStyle:{top:"0em"}},[a("span",{staticClass:"delimsizing size1"},[s._v("(")])]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol"},[s._v("u")])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.8231310000000001em"}},[a("span",{staticStyle:{top:"-2.4231360000000004em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("i")])])])]),a("span",{staticStyle:{top:"-3.0448000000000004em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.13889em"}},[s._v("T")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.27686399999999994em"}},[a("span")])])])])]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol",staticStyle:{"margin-right":"0.03704em"}},[s._v("v")])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("c")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])]),a("span",{staticClass:"mclose delimcenter",staticStyle:{top:"0em"}},[a("span",{staticClass:"delimsizing size1"},[s._v(")")])])])])]),a("span",{staticStyle:{top:"-3.23em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"frac-line",staticStyle:{"border-bottom-width":"0.04em"}})]),a("span",{staticStyle:{top:"-3.7400100000000003em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol",staticStyle:{"margin-right":"0.03704em"}},[s._v("v")])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("c")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"mop"},[s._v("exp")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"minner"},[a("span",{staticClass:"mopen delimcenter",staticStyle:{top:"0em"}},[a("span",{staticClass:"delimsizing size1"},[s._v("(")])]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol"},[s._v("u")])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.8413309999999999em"}},[a("span",{staticStyle:{top:"-2.4530000000000003em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.02691em"}},[s._v("w")])])])]),a("span",{staticStyle:{top:"-3.063em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.13889em"}},[s._v("T")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.247em"}},[a("span")])])])])]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol",staticStyle:{"margin-right":"0.03704em"}},[s._v("v")])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("c")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])]),a("span",{staticClass:"mclose delimcenter",staticStyle:{top:"0em"}},[a("span",{staticClass:"delimsizing size1"},[s._v(")")])])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"1.221241em"}},[a("span")])])])]),a("span",{staticClass:"mclose nulldelimiter"})])])]),a("span",{staticStyle:{top:"-0.912884500000001em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.59001em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"}),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mrel"},[s._v("=")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord accent"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.69444em"}},[a("span",{staticStyle:{top:"-3em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.03588em"}},[s._v("y")])]),a("span",{staticStyle:{top:"-3em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"accent-body",staticStyle:{left:"-0.19444em"}},[a("span",{staticClass:"mord"},[s._v("^")])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.19444em"}},[a("span")])])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.03588em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.02691em"}},[s._v("w")])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol",staticStyle:{"margin-right":"0.03704em"}},[s._v("v")])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("c")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"3.337125499999999em"}},[a("span")])])])]),a("span",{staticClass:"arraycolsep",staticStyle:{width:"1em"}}),a("span",{staticClass:"col-align-r"},[a("span",{staticClass:"vlist-t"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"3.8371255em"}},[a("span",{staticStyle:{top:"-5.8371255em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.427em"}}),a("span",{staticClass:"mord"})])])])])])])])])])])])]),s._v(" "),a("p",[s._v("两种情况可以合并为：")]),s._v(" "),a("p",[a("span",{staticClass:"katex-display"},[a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"}},[a("semantics",[a("mtable",{attrs:{rowspacing:"0.2500em",columnalign:"right left right",columnspacing:"0em 1em"}},[a("mtr",[a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow")],1)],1),a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow",[a("mrow"),a("mfrac",[a("mrow",[a("mi",{attrs:{mathvariant:"normal"}},[s._v("∂")]),a("msub",[a("mi",[s._v("J")]),a("mrow",[a("mtext",[s._v("naive")]),a("mo",[s._v("−")]),a("mtext",[s._v("softmax")])],1)],1),a("mrow",[a("mo",{attrs:{fence:"true"}},[s._v("(")]),a("msub",[a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("v")]),a("mi",[s._v("c")])],1),a("mo",{attrs:{separator:"true"}},[s._v(",")]),a("mi",[s._v("o")]),a("mo",{attrs:{separator:"true"}},[s._v(",")]),a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("U")]),a("mo",{attrs:{fence:"true"}},[s._v(")")])],1)],1),a("mrow",[a("mi",{attrs:{mathvariant:"normal"}},[s._v("∂")]),a("msub",[a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("u")]),a("mi",[s._v("w")])],1)],1)],1)],1)],1)],1),a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow")],1)],1)],1),a("mtr",[a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow")],1)],1),a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow",[a("mrow"),a("mo",[s._v("=")]),a("mo",{attrs:{stretchy:"false"}},[s._v("(")]),a("msub",[a("mover",{attrs:{accent:"true"}},[a("mi",[s._v("y")]),a("mo",[s._v("^")])],1),a("mi",[s._v("w")])],1),a("mo",[s._v("−")]),a("msub",[a("mi",[s._v("y")]),a("mi",[s._v("w")])],1),a("mo",{attrs:{stretchy:"false"}},[s._v(")")]),a("msub",[a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("v")]),a("mi",[s._v("c")])],1)],1)],1)],1)],1),a("mtr",[a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow")],1)],1)],1),a("mtr",[a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow")],1)],1),a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow",[a("mrow"),a("msub",[a("mi",[s._v("y")]),a("mi",[s._v("w")])],1),a("mo",[s._v("=")]),a("mrow",[a("mo",{attrs:{fence:"true"}},[s._v("{")]),a("mtable",{attrs:{rowspacing:"0.1600em",columnalign:"left left",columnspacing:"1em"}},[a("mtr",[a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"false"}},[a("mrow",[a("mn",[s._v("1")]),a("mo",{attrs:{separator:"true"}},[s._v(",")]),a("mrow",[a("mi",{attrs:{mathvariant:"normal"}},[s._v("w")]),a("mo",[s._v("=")]),a("mn",[s._v("0")])],1)],1)],1)],1)],1),a("mtr",[a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"false"}},[a("mrow",[a("mn",[s._v("0")]),a("mo",{attrs:{separator:"true"}},[s._v(",")]),a("mrow",[a("mi",{attrs:{mathvariant:"normal"}},[s._v("w")]),a("mo",{attrs:{mathvariant:"normal"}},[s._v("≠")]),a("mn",[s._v("0")])],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("\\begin{aligned}\n&\\frac{\\partial J_{\\text {naive}-\\text {softmax}}\\left(\\boldsymbol{v}_{c}, o, \\boldsymbol{U}\\right)}{\\partial \\boldsymbol{u}_{w}} & \\\\\n&=(\\hat{y}_w-y_w) \\boldsymbol{v}_{c}\n\\\\\n\\\\\n&y_{w}=\\left\\{\\begin{array}{ll}\n{1} , {\\mathrm{w}=0} \\\\\n{0} , {\\mathrm{w} \\ne 0}\n\\end{array}\\right.\n\\end{aligned}\n")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"8.26303em","vertical-align":"-3.8815150000000007em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mtable"},[a("span",{staticClass:"col-align-r"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"4.381515em"}},[a("span",{staticStyle:{top:"-6.404515000000001em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.45em"}}),a("span",{staticClass:"mord"})]),a("span",{staticStyle:{top:"-4.428515em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.45em"}}),a("span",{staticClass:"mord"})]),a("span",{staticStyle:{top:"-2.928515em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.45em"}}),a("span",{staticClass:"mord"})]),a("span",{staticStyle:{top:"-0.8185149999999997em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.45em"}}),a("span",{staticClass:"mord"})])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"3.8815150000000007em"}},[a("span")])])])]),a("span",{staticClass:"col-align-l"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"4.381515em"}},[a("span",{staticStyle:{top:"-6.404515000000001em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.45em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mopen nulldelimiter"}),a("span",{staticClass:"mfrac"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"1.427em"}},[a("span",{staticStyle:{top:"-2.3139999999999996em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord",staticStyle:{"margin-right":"0.05556em"}},[s._v("∂")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol"},[s._v("u")])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.02691em"}},[s._v("w")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])])])]),a("span",{staticStyle:{top:"-3.23em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"frac-line",staticStyle:{"border-bottom-width":"0.04em"}})]),a("span",{staticStyle:{top:"-3.677em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord",staticStyle:{"margin-right":"0.05556em"}},[s._v("∂")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.09618em"}},[s._v("J")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.3361079999999999em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.09618em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord text mtight"},[a("span",{staticClass:"mord mtight"},[s._v("naive")])]),a("span",{staticClass:"mbin mtight"},[s._v("−")]),a("span",{staticClass:"mord text mtight"},[a("span",{staticClass:"mord mtight"},[s._v("softmax")])])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.208331em"}},[a("span")])])])])]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"minner"},[a("span",{staticClass:"mopen delimcenter",staticStyle:{top:"0em"}},[s._v("(")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol",staticStyle:{"margin-right":"0.03704em"}},[s._v("v")])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("c")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])]),a("span",{staticClass:"mpunct"},[s._v(",")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"mord mathnormal"},[s._v("o")]),a("span",{staticClass:"mpunct"},[s._v(",")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol",staticStyle:{"margin-right":"0.11424em"}},[s._v("U")])])]),a("span",{staticClass:"mclose delimcenter",staticStyle:{top:"0em"}},[s._v(")")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.8360000000000001em"}},[a("span")])])])]),a("span",{staticClass:"mclose nulldelimiter"})])])]),a("span",{staticStyle:{top:"-4.428515em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.45em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"}),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mrel"},[s._v("=")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mopen"},[s._v("(")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord accent"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.69444em"}},[a("span",{staticStyle:{top:"-3em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.03588em"}},[s._v("y")])]),a("span",{staticStyle:{top:"-3em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"accent-body",staticStyle:{left:"-0.19444em"}},[a("span",{staticClass:"mord"},[s._v("^")])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.19444em"}},[a("span")])])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.03588em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.02691em"}},[s._v("w")])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),a("span",{staticClass:"mbin"},[s._v("−")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.03588em"}},[s._v("y")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.03588em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.02691em"}},[s._v("w")])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])]),a("span",{staticClass:"mclose"},[s._v(")")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol",staticStyle:{"margin-right":"0.03704em"}},[s._v("v")])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("c")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])])])]),a("span",{staticStyle:{top:"-0.8185150000000001em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.45em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.03588em"}},[s._v("y")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.03588em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.02691em"}},[s._v("w")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mrel"},[s._v("=")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"minner"},[a("span",{staticClass:"mopen delimcenter",staticStyle:{top:"0em"}},[a("span",{staticClass:"delimsizing size3"},[s._v("{")])]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mtable"},[a("span",{staticClass:"arraycolsep",staticStyle:{width:"0.5em"}}),a("span",{staticClass:"col-align-l"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"1.45em"}},[a("span",{staticStyle:{top:"-3.61em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[s._v("1")])]),a("span",{staticClass:"mpunct"},[s._v(",")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathrm",staticStyle:{"margin-right":"0.01389em"}},[s._v("w")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mrel"},[s._v("=")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mord"},[s._v("0")])])])]),a("span",{staticStyle:{top:"-2.4099999999999997em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[s._v("0")])]),a("span",{staticClass:"mpunct"},[s._v(",")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathrm",staticStyle:{"margin-right":"0.01389em"}},[s._v("w")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mrel"},[a("span",{staticClass:"mrel"},[a("span",{staticClass:"mord vbox"},[a("span",{staticClass:"thinbox"},[a("span",{staticClass:"rlap"},[a("span",{staticClass:"strut",staticStyle:{height:"0.8888799999999999em","vertical-align":"-0.19444em"}}),a("span",{staticClass:"inner"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mrel"},[s._v("")])])]),a("span",{staticClass:"fix"})])])])]),a("span",{staticClass:"mrel"},[s._v("=")])]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mord"},[s._v("0")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.9500000000000004em"}},[a("span")])])])]),a("span",{staticClass:"arraycolsep",staticStyle:{width:"0.5em"}})])]),a("span",{staticClass:"mclose nulldelimiter"})])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"3.8815150000000003em"}},[a("span")])])])]),a("span",{staticClass:"arraycolsep",staticStyle:{width:"1em"}}),a("span",{staticClass:"col-align-r"},[a("span",{staticClass:"vlist-t"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"4.381515em"}},[a("span",{staticStyle:{top:"-6.381515em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.427em"}}),a("span",{staticClass:"mord"})])])])])])])])])])])])]),s._v(" "),a("p",[s._v("从上面的推导结果，我们可以发现一些东西：\n我们"),a("strong",[s._v("对中心词求导时")]),s._v("，只计算了对当前位置c处的中心词的导数，为何呢？因为"),a("strong",[s._v("对其他位置的导数都是0")]),s._v("！从J的表达式可以看出，J与除了c其他位置的中心词向量是无关的！而"),a("strong",[s._v("对上下文词求导")]),s._v("时，我们发现，无论该词是不是在当前位置o，导数都存在，所以"),a("strong",[s._v("要把词汇表中所有词都计算一遍")]),s._v("。")]),s._v(" "),a("p",[s._v("这告诉了我们什么呢？")]),s._v(" "),a("center",[a("b",[s._v("在参数更新时，更新$V$向量是很容易的，更新$U$向量却很艰难。")])]),s._v(" "),a("h2",{attrs:{id:"负采样-negative-sampling"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#负采样-negative-sampling"}},[s._v("#")]),s._v(" 负采样(Negative Sampling)")]),s._v(" "),a("p",[s._v("上面对朴素softmax损失函数的求导过程中，我们发现了在更新U的时候，计算开销十分大。所以我们要想办法降低这样的计算开销。负采样技术，就是目前在word2vec中最实用的降低计算量的技巧。")]),s._v(" "),a("p",[s._v("假设当前中心词为c，我们从词汇库中选取K个负采样词，记为"),a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[a("semantics",[a("mrow",[a("msub",[a("mi",[s._v("w")]),a("mn",[s._v("1")])],1),a("mo",{attrs:{separator:"true"}},[s._v(",")]),a("msub",[a("mi",[s._v("w")]),a("mn",[s._v("2")])],1),a("mo",{attrs:{separator:"true"}},[s._v(",")]),a("mi",{attrs:{mathvariant:"normal"}},[s._v(".")]),a("mi",{attrs:{mathvariant:"normal"}},[s._v(".")]),a("mi",{attrs:{mathvariant:"normal"}},[s._v(".")]),a("mo",{attrs:{separator:"true"}},[s._v(",")]),a("msub",[a("mi",[s._v("w")]),a("mi",[s._v("K")])],1)],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("w_1,w_2,...,w_K")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"0.625em","vertical-align":"-0.19444em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.02691em"}},[s._v("w")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.30110799999999993em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.02691em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[s._v("1")])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])]),a("span",{staticClass:"mpunct"},[s._v(",")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.02691em"}},[s._v("w")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.30110799999999993em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.02691em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[s._v("2")])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])]),a("span",{staticClass:"mpunct"},[s._v(",")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"mord"},[s._v("...")]),a("span",{staticClass:"mpunct"},[s._v(",")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.02691em"}},[s._v("w")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.32833099999999993em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.02691em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.07153em"}},[s._v("K")])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])])])])]),s._v("，其对应的词向量为"),a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[a("semantics",[a("mrow",[a("msub",[a("mi",[s._v("u")]),a("mn",[s._v("1")])],1),a("mo",{attrs:{separator:"true"}},[s._v(",")]),a("msub",[a("mi",[s._v("u")]),a("mn",[s._v("2")])],1),a("mo",{attrs:{separator:"true"}},[s._v(",")]),a("mi",{attrs:{mathvariant:"normal"}},[s._v(".")]),a("mi",{attrs:{mathvariant:"normal"}},[s._v(".")]),a("mi",{attrs:{mathvariant:"normal"}},[s._v(".")]),a("mo",{attrs:{separator:"true"}},[s._v(",")]),a("msub",[a("mi",[s._v("u")]),a("mi",[s._v("K")])],1)],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("u_1,u_2,...,u_K")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"0.625em","vertical-align":"-0.19444em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal"},[s._v("u")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.30110799999999993em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"0em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[s._v("1")])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])]),a("span",{staticClass:"mpunct"},[s._v(",")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal"},[s._v("u")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.30110799999999993em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"0em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[s._v("2")])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])]),a("span",{staticClass:"mpunct"},[s._v(",")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"mord"},[s._v("...")]),a("span",{staticClass:"mpunct"},[s._v(",")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal"},[s._v("u")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.32833099999999993em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"0em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.07153em"}},[s._v("K")])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])])])])]),s._v("，要注意选取这些负采样词的时候，要避开当前真实的上下文词o，o实际上是正样本。这样，我们便可以构建一个新的损失函数——负采样损失函数：")]),s._v(" "),a("p",[a("span",{staticClass:"katex-display"},[a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"}},[a("semantics",[a("mrow",[a("msub",[a("mi",[s._v("J")]),a("mtext",[s._v("neg-sample ")])],1),a("mrow",[a("mo",{attrs:{fence:"true"}},[s._v("(")]),a("msub",[a("mi",[s._v("v")]),a("mi",[s._v("c")])],1),a("mo",{attrs:{separator:"true"}},[s._v(",")]),a("mi",[s._v("o")]),a("mo",{attrs:{separator:"true"}},[s._v(",")]),a("mi",[s._v("U")]),a("mo",{attrs:{fence:"true"}},[s._v(")")])],1),a("mo",[s._v("=")]),a("mo",[s._v("−")]),a("mi",[s._v("log")]),a("mo",[s._v("⁡")]),a("mrow",[a("mo",{attrs:{fence:"true"}},[s._v("(")]),a("mi",[s._v("σ")]),a("mrow",[a("mo",{attrs:{fence:"true"}},[s._v("(")]),a("msubsup",[a("mi",[s._v("u")]),a("mi",[s._v("o")]),a("mi",{attrs:{mathvariant:"normal"}},[s._v("⊤")])],1),a("msub",[a("mi",[s._v("v")]),a("mi",[s._v("c")])],1),a("mo",{attrs:{fence:"true"}},[s._v(")")])],1),a("mo",{attrs:{fence:"true"}},[s._v(")")])],1),a("mo",[s._v("−")]),a("munderover",[a("mo",[s._v("∑")]),a("mrow",[a("mi",[s._v("k")]),a("mo",[s._v("=")]),a("mn",[s._v("1")])],1),a("mi",[s._v("K")])],1),a("mi",[s._v("log")]),a("mo",[s._v("⁡")]),a("mrow",[a("mo",{attrs:{fence:"true"}},[s._v("(")]),a("mi",[s._v("σ")]),a("mrow",[a("mo",{attrs:{fence:"true"}},[s._v("(")]),a("mo",[s._v("−")]),a("msubsup",[a("mi",[s._v("u")]),a("mi",[s._v("k")]),a("mi",{attrs:{mathvariant:"normal"}},[s._v("⊤")])],1),a("msub",[a("mi",[s._v("v")]),a("mi",[s._v("c")])],1),a("mo",{attrs:{fence:"true"}},[s._v(")")])],1),a("mo",{attrs:{fence:"true"}},[s._v(")")])],1)],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("J_{\\text {neg-sample }}\\left(v_{c}, o, U\\right)=-\\log \\left(\\sigma\\left(u_{o}^{\\top} v_{c}\\right)\\right)-\\sum_{k=1}^{K} \\log \\left(\\sigma\\left(-u_{k}^{\\top} v_{c}\\right)\\right)\n")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"1.036108em","vertical-align":"-0.286108em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.09618em"}},[s._v("J")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.3361079999999999em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.09618em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord text mtight"},[a("span",{staticClass:"mord mtight"},[s._v("neg-sample ")])])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.286108em"}},[a("span")])])])])]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"minner"},[a("span",{staticClass:"mopen delimcenter",staticStyle:{top:"0em"}},[s._v("(")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.03588em"}},[s._v("v")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.03588em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("c")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])]),a("span",{staticClass:"mpunct"},[s._v(",")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"mord mathnormal"},[s._v("o")]),a("span",{staticClass:"mpunct"},[s._v(",")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.10903em"}},[s._v("U")]),a("span",{staticClass:"mclose delimcenter",staticStyle:{top:"0em"}},[s._v(")")])]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mrel"},[s._v("=")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}})]),a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"1.2491179999999997em","vertical-align":"-0.35001em"}}),a("span",{staticClass:"mord"},[s._v("−")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"mop"},[s._v("lo"),a("span",{staticStyle:{"margin-right":"0.01389em"}},[s._v("g")])]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"minner"},[a("span",{staticClass:"mopen delimcenter",staticStyle:{top:"0em"}},[a("span",{staticClass:"delimsizing size1"},[s._v("(")])]),a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.03588em"}},[s._v("σ")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"minner"},[a("span",{staticClass:"mopen delimcenter",staticStyle:{top:"0em"}},[a("span",{staticClass:"delimsizing size1"},[s._v("(")])]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal"},[s._v("u")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.8991079999999998em"}},[a("span",{staticStyle:{top:"-2.4530000000000003em","margin-left":"0em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("o")])])])]),a("span",{staticStyle:{top:"-3.113em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mtight"},[s._v("⊤")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.247em"}},[a("span")])])])])]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.03588em"}},[s._v("v")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.03588em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("c")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])]),a("span",{staticClass:"mclose delimcenter",staticStyle:{top:"0em"}},[a("span",{staticClass:"delimsizing size1"},[s._v(")")])])]),a("span",{staticClass:"mclose delimcenter",staticStyle:{top:"0em"}},[a("span",{staticClass:"delimsizing size1"},[s._v(")")])])]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),a("span",{staticClass:"mbin"},[s._v("−")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}})]),a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"3.1304490000000005em","vertical-align":"-1.302113em"}}),a("span",{staticClass:"mop op-limits"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"1.8283360000000002em"}},[a("span",{staticStyle:{top:"-1.8478869999999998em","margin-left":"0em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.05em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.03148em"}},[s._v("k")]),a("span",{staticClass:"mrel mtight"},[s._v("=")]),a("span",{staticClass:"mord mtight"},[s._v("1")])])])]),a("span",{staticStyle:{top:"-3.0500049999999996em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.05em"}}),a("span",[a("span",{staticClass:"mop op-symbol large-op"},[s._v("∑")])])]),a("span",{staticStyle:{top:"-4.300005em","margin-left":"0em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.05em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.07153em"}},[s._v("K")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"1.302113em"}},[a("span")])])])]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"mop"},[s._v("lo"),a("span",{staticStyle:{"margin-right":"0.01389em"}},[s._v("g")])]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"minner"},[a("span",{staticClass:"mopen delimcenter",staticStyle:{top:"0em"}},[a("span",{staticClass:"delimsizing size1"},[s._v("(")])]),a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.03588em"}},[s._v("σ")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"minner"},[a("span",{staticClass:"mopen delimcenter",staticStyle:{top:"0em"}},[a("span",{staticClass:"delimsizing size1"},[s._v("(")])]),a("span",{staticClass:"mord"},[s._v("−")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal"},[s._v("u")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.8991079999999998em"}},[a("span",{staticStyle:{top:"-2.4530000000000003em","margin-left":"0em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.03148em"}},[s._v("k")])])])]),a("span",{staticStyle:{top:"-3.113em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mtight"},[s._v("⊤")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.247em"}},[a("span")])])])])]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.03588em"}},[s._v("v")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.03588em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("c")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])]),a("span",{staticClass:"mclose delimcenter",staticStyle:{top:"0em"}},[a("span",{staticClass:"delimsizing size1"},[s._v(")")])])]),a("span",{staticClass:"mclose delimcenter",staticStyle:{top:"0em"}},[a("span",{staticClass:"delimsizing size1"},[s._v(")")])])])])])])])]),s._v(" "),a("p",[s._v("这个损失函数，一眼就可以看出比naive-softmax loss求导要更容易，因为，它在更新U矩阵时，只更新了K+1个向量，而naive-softmax需要更新U中的全部向量。而在负采样损失函数中，我们不再使用softmax激活函数了，而是使用sigmoid函数。所以，很多人也会说，负采样是把原本的一个softmax的|V|类分类变成了少数几个二分类问题。")]),s._v(" "),a("p",[s._v("我们对这个损失函数再仿照上一节的方法求个导。")]),s._v(" "),a("p",[s._v("在求导前，我们可以先计算一下sigmoid函数求导的特点，这样可以方便我们求导：")]),s._v(" "),a("p",[a("span",{staticClass:"katex-display"},[a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"}},[a("semantics",[a("mrow",[a("mfrac",[a("mrow",[a("mi",{attrs:{mathvariant:"normal"}},[s._v("∂")]),a("mi",[s._v("σ")]),a("mo",{attrs:{stretchy:"false"}},[s._v("(")]),a("mi",[s._v("x")]),a("mo",{attrs:{stretchy:"false"}},[s._v(")")])],1),a("mrow",[a("mi",{attrs:{mathvariant:"normal"}},[s._v("∂")]),a("mi",[s._v("x")])],1)],1),a("mo",[s._v("=")]),a("mi",[s._v("σ")]),a("mo",{attrs:{stretchy:"false"}},[s._v("(")]),a("mi",[s._v("x")]),a("mo",{attrs:{stretchy:"false"}},[s._v(")")]),a("mo",{attrs:{stretchy:"false"}},[s._v("(")]),a("mn",[s._v("1")]),a("mo",[s._v("−")]),a("mi",[s._v("σ")]),a("mo",{attrs:{stretchy:"false"}},[s._v("(")]),a("mi",[s._v("x")]),a("mo",{attrs:{stretchy:"false"}},[s._v(")")]),a("mo",{attrs:{stretchy:"false"}},[s._v(")")])],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("\\frac{\\partial \\sigma(x)}{\\partial x}=\\sigma(x)(1-\\sigma(x))\n")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"2.113em","vertical-align":"-0.686em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mopen nulldelimiter"}),a("span",{staticClass:"mfrac"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"1.427em"}},[a("span",{staticStyle:{top:"-2.314em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord",staticStyle:{"margin-right":"0.05556em"}},[s._v("∂")]),a("span",{staticClass:"mord mathnormal"},[s._v("x")])])]),a("span",{staticStyle:{top:"-3.23em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"frac-line",staticStyle:{"border-bottom-width":"0.04em"}})]),a("span",{staticStyle:{top:"-3.677em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord",staticStyle:{"margin-right":"0.05556em"}},[s._v("∂")]),a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.03588em"}},[s._v("σ")]),a("span",{staticClass:"mopen"},[s._v("(")]),a("span",{staticClass:"mord mathnormal"},[s._v("x")]),a("span",{staticClass:"mclose"},[s._v(")")])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.686em"}},[a("span")])])])]),a("span",{staticClass:"mclose nulldelimiter"})]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mrel"},[s._v("=")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}})]),a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"1em","vertical-align":"-0.25em"}}),a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.03588em"}},[s._v("σ")]),a("span",{staticClass:"mopen"},[s._v("(")]),a("span",{staticClass:"mord mathnormal"},[s._v("x")]),a("span",{staticClass:"mclose"},[s._v(")")]),a("span",{staticClass:"mopen"},[s._v("(")]),a("span",{staticClass:"mord"},[s._v("1")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),a("span",{staticClass:"mbin"},[s._v("−")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}})]),a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"1em","vertical-align":"-0.25em"}}),a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.03588em"}},[s._v("σ")]),a("span",{staticClass:"mopen"},[s._v("(")]),a("span",{staticClass:"mord mathnormal"},[s._v("x")]),a("span",{staticClass:"mclose"},[s._v("))")])])])])])]),s._v(" "),a("p",[s._v("对中心词向量"),a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[a("semantics",[a("mrow",[a("msub",[a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("v")]),a("mi",[s._v("c")])],1)],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("\\boldsymbol{v}_c")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"0.59444em","vertical-align":"-0.15em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol",staticStyle:{"margin-right":"0.03704em"}},[s._v("v")])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("c")])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])])])])]),s._v("求导：")]),s._v(" "),a("p",[a("span",{staticClass:"katex-display"},[a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"}},[a("semantics",[a("mtable",{attrs:{rowspacing:"0.2500em",columnalign:"right left",columnspacing:"0em"}},[a("mtr",[a("mtd",{staticClass:"mtr-glue"}),a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow")],1)],1),a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow",[a("mrow"),a("mfrac",[a("mrow",[a("mi",{attrs:{mathvariant:"normal"}},[s._v("∂")]),a("msub",[a("mi",[s._v("J")]),a("mrow",[a("mi",[s._v("n")]),a("mi",[s._v("e")]),a("mi",[s._v("g")]),a("mo",[s._v("−")]),a("mtext",[s._v("sample")])],1)],1),a("mrow",[a("mo",{attrs:{fence:"true"}},[s._v("(")]),a("msub",[a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("v")]),a("mi",[s._v("c")])],1),a("mo",{attrs:{separator:"true"}},[s._v(",")]),a("mi",[s._v("o")]),a("mo",{attrs:{separator:"true"}},[s._v(",")]),a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("U")]),a("mo",{attrs:{fence:"true"}},[s._v(")")])],1)],1),a("mrow",[a("mi",{attrs:{mathvariant:"normal"}},[s._v("∂")]),a("msub",[a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("v")]),a("mi",[s._v("c")])],1)],1)],1),a("mstyle",{attrs:{mathcolor:" #cc0000"}},[a("mtext",[s._v("\\nonumber")])],1)],1)],1)],1),a("mtd",{staticClass:"mtr-glue"}),a("mtd",{staticClass:"mml-eqn-num"})],1),a("mtr",[a("mtd",{staticClass:"mtr-glue"}),a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow")],1)],1),a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow",[a("mrow"),a("mo",[s._v("=")]),a("mo",[s._v("−")]),a("mrow",[a("mo",{attrs:{fence:"true"}},[s._v("(")]),a("mn",[s._v("1")]),a("mo",[s._v("−")]),a("mi",[s._v("σ")]),a("mrow",[a("mo",{attrs:{fence:"true"}},[s._v("(")]),a("msubsup",[a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("u")]),a("mi",[s._v("o")]),a("mi",[s._v("T")])],1),a("msub",[a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("v")]),a("mi",[s._v("c")])],1),a("mo",{attrs:{fence:"true"}},[s._v(")")])],1),a("mo",{attrs:{fence:"true"}},[s._v(")")])],1),a("msub",[a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("u")]),a("mi",[s._v("o")])],1),a("mo",[s._v("+")]),a("munderover",[a("mo",[s._v("∑")]),a("mrow",[a("mi",[s._v("k")]),a("mo",[s._v("=")]),a("mn",[s._v("1")])],1),a("mi",[s._v("K")])],1),a("mrow",[a("mo",{attrs:{fence:"true"}},[s._v("(")]),a("mn",[s._v("1")]),a("mo",[s._v("−")]),a("mi",[s._v("σ")]),a("mrow",[a("mo",{attrs:{fence:"true"}},[s._v("(")]),a("mo",[s._v("−")]),a("msubsup",[a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("u")]),a("mi",[s._v("k")]),a("mi",[s._v("T")])],1),a("msub",[a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("v")]),a("mi",[s._v("c")])],1),a("mo",{attrs:{fence:"true"}},[s._v(")")])],1),a("mo",{attrs:{fence:"true"}},[s._v(")")])],1),a("msub",[a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("u")]),a("mi",[s._v("k")])],1),a("mstyle",{attrs:{mathcolor:" #cc0000"}},[a("mtext",[s._v("\\nonumber")])],1)],1)],1)],1),a("mtd",{staticClass:"mtr-glue"}),a("mtd",{staticClass:"mml-eqn-num"})],1)],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("\\begin{align}\n&\\frac{\\partial J_{n e g-\\text {sample}}\\left(\\boldsymbol{v}_{c}, o, \\boldsymbol{U}\\right)}{\\partial \\boldsymbol{v}_{c}} \\nonumber \\\\\n&=-\\left(1-\\sigma\\left(\\boldsymbol{u}_{o}^{T} \\boldsymbol{v}_{c}\\right)\\right) \\boldsymbol{u}_{o}+\\sum_{k=1}^{K}\\left(1-\\sigma\\left(-\\boldsymbol{u}_{k}^{T} \\boldsymbol{v}_{c}\\right)\\right) \\boldsymbol{u}_{k} \\nonumber\n\\end{align}\n")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"5.993449000000001em","vertical-align":"-2.7467245000000005em"}}),a("span",{staticClass:"mtable"},[a("span",{staticClass:"col-align-r"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"3.2467245000000005em"}},[a("span",{staticStyle:{top:"-5.648060500000001em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.828336em"}}),a("span",{staticClass:"mord"})]),a("span",{staticStyle:{top:"-2.6837245em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.828336em"}}),a("span",{staticClass:"mord"})])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"2.7467245000000005em"}},[a("span")])])])]),a("span",{staticClass:"col-align-l"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"3.2467245000000005em"}},[a("span",{staticStyle:{top:"-5.648060500000001em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.828336em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mopen nulldelimiter"}),a("span",{staticClass:"mfrac"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"1.427em"}},[a("span",{staticStyle:{top:"-2.3139999999999996em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord",staticStyle:{"margin-right":"0.05556em"}},[s._v("∂")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol",staticStyle:{"margin-right":"0.03704em"}},[s._v("v")])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("c")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])])])]),a("span",{staticStyle:{top:"-3.23em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"frac-line",staticStyle:{"border-bottom-width":"0.04em"}})]),a("span",{staticStyle:{top:"-3.677em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord",staticStyle:{"margin-right":"0.05556em"}},[s._v("∂")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.09618em"}},[s._v("J")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.3361079999999999em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.09618em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("n")]),a("span",{staticClass:"mord mathnormal mtight"},[s._v("e")]),a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.03588em"}},[s._v("g")]),a("span",{staticClass:"mbin mtight"},[s._v("−")]),a("span",{staticClass:"mord text mtight"},[a("span",{staticClass:"mord mtight"},[s._v("sample")])])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.286108em"}},[a("span")])])])])]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"minner"},[a("span",{staticClass:"mopen delimcenter",staticStyle:{top:"0em"}},[s._v("(")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol",staticStyle:{"margin-right":"0.03704em"}},[s._v("v")])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("c")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])]),a("span",{staticClass:"mpunct"},[s._v(",")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"mord mathnormal"},[s._v("o")]),a("span",{staticClass:"mpunct"},[s._v(",")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol",staticStyle:{"margin-right":"0.11424em"}},[s._v("U")])])]),a("span",{staticClass:"mclose delimcenter",staticStyle:{top:"0em"}},[s._v(")")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.8360000000000001em"}},[a("span")])])])]),a("span",{staticClass:"mclose nulldelimiter"})]),a("span",{staticClass:"mord text",staticStyle:{color:"#cc0000"}},[a("span",{staticClass:"mord",staticStyle:{color:"#cc0000"}},[s._v("\\nonumber")])])])]),a("span",{staticStyle:{top:"-2.6837245em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.828336em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"}),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mrel"},[s._v("=")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mord"},[s._v("−")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"minner"},[a("span",{staticClass:"mopen delimcenter",staticStyle:{top:"0em"}},[a("span",{staticClass:"delimsizing size1"},[s._v("(")])]),a("span",{staticClass:"mord"},[s._v("1")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),a("span",{staticClass:"mbin"},[s._v("−")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.03588em"}},[s._v("σ")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"minner"},[a("span",{staticClass:"mopen delimcenter",staticStyle:{top:"0em"}},[a("span",{staticClass:"delimsizing size1"},[s._v("(")])]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol"},[s._v("u")])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.8913309999999999em"}},[a("span",{staticStyle:{top:"-2.4530000000000003em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("o")])])])]),a("span",{staticStyle:{top:"-3.113em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.13889em"}},[s._v("T")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.247em"}},[a("span")])])])])]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol",staticStyle:{"margin-right":"0.03704em"}},[s._v("v")])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("c")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])]),a("span",{staticClass:"mclose delimcenter",staticStyle:{top:"0em"}},[a("span",{staticClass:"delimsizing size1"},[s._v(")")])])]),a("span",{staticClass:"mclose delimcenter",staticStyle:{top:"0em"}},[a("span",{staticClass:"delimsizing size1"},[s._v(")")])])]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol"},[s._v("u")])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("o")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),a("span",{staticClass:"mbin"},[s._v("+")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),a("span",{staticClass:"mop op-limits"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"1.8283360000000002em"}},[a("span",{staticStyle:{top:"-1.8478869999999998em","margin-left":"0em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.05em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.03148em"}},[s._v("k")]),a("span",{staticClass:"mrel mtight"},[s._v("=")]),a("span",{staticClass:"mord mtight"},[s._v("1")])])])]),a("span",{staticStyle:{top:"-3.0500049999999996em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.05em"}}),a("span",[a("span",{staticClass:"mop op-symbol large-op"},[s._v("∑")])])]),a("span",{staticStyle:{top:"-4.300005em","margin-left":"0em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.05em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.07153em"}},[s._v("K")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"1.302113em"}},[a("span")])])])]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"minner"},[a("span",{staticClass:"mopen delimcenter",staticStyle:{top:"0em"}},[a("span",{staticClass:"delimsizing size1"},[s._v("(")])]),a("span",{staticClass:"mord"},[s._v("1")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),a("span",{staticClass:"mbin"},[s._v("−")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.03588em"}},[s._v("σ")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"minner"},[a("span",{staticClass:"mopen delimcenter",staticStyle:{top:"0em"}},[a("span",{staticClass:"delimsizing size1"},[s._v("(")])]),a("span",{staticClass:"mord"},[s._v("−")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol"},[s._v("u")])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.8913309999999999em"}},[a("span",{staticStyle:{top:"-2.4530000000000003em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.03148em"}},[s._v("k")])])])]),a("span",{staticStyle:{top:"-3.113em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.13889em"}},[s._v("T")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.247em"}},[a("span")])])])])]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol",staticStyle:{"margin-right":"0.03704em"}},[s._v("v")])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("c")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])]),a("span",{staticClass:"mclose delimcenter",staticStyle:{top:"0em"}},[a("span",{staticClass:"delimsizing size1"},[s._v(")")])])]),a("span",{staticClass:"mclose delimcenter",staticStyle:{top:"0em"}},[a("span",{staticClass:"delimsizing size1"},[s._v(")")])])]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol"},[s._v("u")])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.33610799999999996em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.03148em"}},[s._v("k")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])]),a("span",{staticClass:"mord text",staticStyle:{color:"#cc0000"}},[a("span",{staticClass:"mord",staticStyle:{color:"#cc0000"}},[s._v("\\nonumber")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"2.7467245000000005em"}},[a("span")])])])])])]),a("span",{staticClass:"tag"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"3.2467245000000005em"}},[a("span",{staticStyle:{top:"-5.648060500000001em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.828336em"}}),a("span",{staticClass:"eqn-num"})]),a("span",{staticStyle:{top:"-2.6837245em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.828336em"}}),a("span",{staticClass:"eqn-num"})])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"2.7467245000000005em"}},[a("span")])])])])])])])]),s._v(" "),a("p",[s._v("对上下文词向量"),a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[a("semantics",[a("mrow",[a("msub",[a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("u")]),a("mi",[s._v("o")])],1)],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("\\boldsymbol{u}_o")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"0.59444em","vertical-align":"-0.15em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol"},[s._v("u")])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("o")])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])])])])]),s._v("求导：")]),s._v(" "),a("p",[a("span",{staticClass:"katex-display"},[a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"}},[a("semantics",[a("mtable",{attrs:{rowspacing:"0.2500em",columnalign:"right left",columnspacing:"0em"}},[a("mtr",[a("mtd",{staticClass:"mtr-glue"}),a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow")],1)],1),a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow",[a("mrow"),a("mfrac",[a("mrow",[a("mi",{attrs:{mathvariant:"normal"}},[s._v("∂")]),a("msub",[a("mi",[s._v("J")]),a("mrow",[a("mi",[s._v("n")]),a("mi",[s._v("e")]),a("mi",[s._v("g")]),a("mo",[s._v("−")]),a("mi",[s._v("s")]),a("mi",[s._v("a")]),a("mi",[s._v("m")]),a("mi",[s._v("p")]),a("mi",[s._v("l")]),a("mi",[s._v("e")])],1)],1),a("mrow",[a("mo",{attrs:{fence:"true"}},[s._v("(")]),a("msub",[a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("v")]),a("mi",[s._v("c")])],1),a("mo",{attrs:{separator:"true"}},[s._v(",")]),a("mi",[s._v("o")]),a("mo",{attrs:{separator:"true"}},[s._v(",")]),a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("U")]),a("mo",{attrs:{fence:"true"}},[s._v(")")])],1)],1),a("mrow",[a("mi",{attrs:{mathvariant:"normal"}},[s._v("∂")]),a("msub",[a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("u")]),a("mi",[s._v("k")])],1)],1)],1),a("mstyle",{attrs:{mathcolor:" #cc0000"}},[a("mtext",[s._v("\\nonumber")])],1)],1)],1)],1),a("mtd",{staticClass:"mtr-glue"}),a("mtd",{staticClass:"mml-eqn-num"})],1),a("mtr",[a("mtd",{staticClass:"mtr-glue"}),a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow")],1)],1),a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow",[a("mrow"),a("mo",[s._v("=")]),a("mo",[s._v("−")]),a("mrow",[a("mo",{attrs:{fence:"true"}},[s._v("(")]),a("mn",[s._v("1")]),a("mo",[s._v("−")]),a("mi",[s._v("σ")]),a("mrow",[a("mo",{attrs:{fence:"true"}},[s._v("(")]),a("msubsup",[a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("u")]),a("mi",[s._v("o")]),a("mi",[s._v("T")])],1),a("msub",[a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("v")]),a("mi",[s._v("c")])],1),a("mo",{attrs:{fence:"true"}},[s._v(")")])],1),a("mo",{attrs:{fence:"true"}},[s._v(")")])],1),a("msub",[a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("v")]),a("mi",[s._v("c")])],1),a("mstyle",{attrs:{mathcolor:" #cc0000"}},[a("mtext",[s._v("\\nonumber")])],1)],1)],1)],1),a("mtd",{staticClass:"mtr-glue"}),a("mtd",{staticClass:"mml-eqn-num"})],1)],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("\\begin{align}\n&\\frac{\\partial J_{neg-sample}\\left(\\boldsymbol{v}_{c}, o, \\boldsymbol{U}\\right)}{\\partial \\boldsymbol{u}_{k}} \\nonumber \\\\\n&=-\\left(1-\\sigma\\left(\\boldsymbol{u}_{o}^{T} \\boldsymbol{v}_{c}\\right)\\right) \\boldsymbol{v}_{c} \\nonumber\n\\end{align}\n")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"4.114331em","vertical-align":"-1.8071655em"}}),a("span",{staticClass:"mtable"},[a("span",{staticClass:"col-align-r"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"2.3071655em"}},[a("span",{staticStyle:{top:"-4.3071655em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.427em"}}),a("span",{staticClass:"mord"})]),a("span",{staticStyle:{top:"-2.2798345em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.427em"}}),a("span",{staticClass:"mord"})])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"1.8071655em"}},[a("span")])])])]),a("span",{staticClass:"col-align-l"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"2.3071655em"}},[a("span",{staticStyle:{top:"-4.3071655em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.427em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mopen nulldelimiter"}),a("span",{staticClass:"mfrac"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"1.427em"}},[a("span",{staticStyle:{top:"-2.3139999999999996em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord",staticStyle:{"margin-right":"0.05556em"}},[s._v("∂")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol"},[s._v("u")])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.33610799999999996em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.03148em"}},[s._v("k")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])])])]),a("span",{staticStyle:{top:"-3.23em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"frac-line",staticStyle:{"border-bottom-width":"0.04em"}})]),a("span",{staticStyle:{top:"-3.677em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord",staticStyle:{"margin-right":"0.05556em"}},[s._v("∂")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.09618em"}},[s._v("J")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.3361079999999999em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.09618em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("n")]),a("span",{staticClass:"mord mathnormal mtight"},[s._v("e")]),a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.03588em"}},[s._v("g")]),a("span",{staticClass:"mbin mtight"},[s._v("−")]),a("span",{staticClass:"mord mathnormal mtight"},[s._v("s")]),a("span",{staticClass:"mord mathnormal mtight"},[s._v("am")]),a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.01968em"}},[s._v("pl")]),a("span",{staticClass:"mord mathnormal mtight"},[s._v("e")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.286108em"}},[a("span")])])])])]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"minner"},[a("span",{staticClass:"mopen delimcenter",staticStyle:{top:"0em"}},[s._v("(")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol",staticStyle:{"margin-right":"0.03704em"}},[s._v("v")])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("c")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])]),a("span",{staticClass:"mpunct"},[s._v(",")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"mord mathnormal"},[s._v("o")]),a("span",{staticClass:"mpunct"},[s._v(",")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol",staticStyle:{"margin-right":"0.11424em"}},[s._v("U")])])]),a("span",{staticClass:"mclose delimcenter",staticStyle:{top:"0em"}},[s._v(")")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.8360000000000001em"}},[a("span")])])])]),a("span",{staticClass:"mclose nulldelimiter"})]),a("span",{staticClass:"mord text",staticStyle:{color:"#cc0000"}},[a("span",{staticClass:"mord",staticStyle:{color:"#cc0000"}},[s._v("\\nonumber")])])])]),a("span",{staticStyle:{top:"-2.2798345em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.427em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"}),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mrel"},[s._v("=")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mord"},[s._v("−")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"minner"},[a("span",{staticClass:"mopen delimcenter",staticStyle:{top:"0em"}},[a("span",{staticClass:"delimsizing size1"},[s._v("(")])]),a("span",{staticClass:"mord"},[s._v("1")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),a("span",{staticClass:"mbin"},[s._v("−")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.03588em"}},[s._v("σ")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"minner"},[a("span",{staticClass:"mopen delimcenter",staticStyle:{top:"0em"}},[a("span",{staticClass:"delimsizing size1"},[s._v("(")])]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol"},[s._v("u")])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.8913309999999999em"}},[a("span",{staticStyle:{top:"-2.4530000000000003em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("o")])])])]),a("span",{staticStyle:{top:"-3.113em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.13889em"}},[s._v("T")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.247em"}},[a("span")])])])])]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol",staticStyle:{"margin-right":"0.03704em"}},[s._v("v")])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("c")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])]),a("span",{staticClass:"mclose delimcenter",staticStyle:{top:"0em"}},[a("span",{staticClass:"delimsizing size1"},[s._v(")")])])]),a("span",{staticClass:"mclose delimcenter",staticStyle:{top:"0em"}},[a("span",{staticClass:"delimsizing size1"},[s._v(")")])])]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol",staticStyle:{"margin-right":"0.03704em"}},[s._v("v")])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("c")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])]),a("span",{staticClass:"mord text",staticStyle:{color:"#cc0000"}},[a("span",{staticClass:"mord",staticStyle:{color:"#cc0000"}},[s._v("\\nonumber")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"1.8071655em"}},[a("span")])])])])])]),a("span",{staticClass:"tag"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"2.3071655em"}},[a("span",{staticStyle:{top:"-4.3071655em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.427em"}}),a("span",{staticClass:"eqn-num"})]),a("span",{staticStyle:{top:"-2.2798345em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.427em"}}),a("span",{staticClass:"eqn-num"})])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"1.8071655em"}},[a("span")])])])])])])])]),s._v(" "),a("p",[s._v("对上下文词向量"),a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[a("semantics",[a("mrow",[a("msub",[a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("u")]),a("mi",[s._v("k")])],1)],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("\\boldsymbol{u}_k")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"0.59444em","vertical-align":"-0.15em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol"},[s._v("u")])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.33610799999999996em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.03148em"}},[s._v("k")])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])])])])]),s._v("求导：")]),s._v(" "),a("p",[a("span",{staticClass:"katex-display"},[a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"}},[a("semantics",[a("mtable",{attrs:{rowspacing:"0.2500em",columnalign:"right left",columnspacing:"0em"}},[a("mtr",[a("mtd",{staticClass:"mtr-glue"}),a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow")],1)],1),a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow",[a("mrow"),a("mfrac",[a("mrow",[a("mi",{attrs:{mathvariant:"normal"}},[s._v("∂")]),a("msub",[a("mi",[s._v("J")]),a("mrow",[a("mi",[s._v("n")]),a("mi",[s._v("e")]),a("mi",[s._v("g")]),a("mo",[s._v("−")]),a("mi",[s._v("s")]),a("mi",[s._v("a")]),a("mi",[s._v("m")]),a("mi",[s._v("p")]),a("mi",[s._v("l")]),a("mi",[s._v("e")])],1)],1),a("mrow",[a("mo",{attrs:{fence:"true"}},[s._v("(")]),a("msub",[a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("v")]),a("mi",[s._v("c")])],1),a("mo",{attrs:{separator:"true"}},[s._v(",")]),a("mi",[s._v("o")]),a("mo",{attrs:{separator:"true"}},[s._v(",")]),a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("U")]),a("mo",{attrs:{fence:"true"}},[s._v(")")])],1)],1),a("mrow",[a("mi",{attrs:{mathvariant:"normal"}},[s._v("∂")]),a("msub",[a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("u")]),a("mi",[s._v("k")])],1)],1)],1),a("mstyle",{attrs:{mathcolor:" #cc0000"}},[a("mtext",[s._v("\\nonumber")])],1)],1)],1)],1),a("mtd",{staticClass:"mtr-glue"}),a("mtd",{staticClass:"mml-eqn-num"})],1),a("mtr",[a("mtd",{staticClass:"mtr-glue"}),a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow")],1)],1),a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow",[a("mrow"),a("mo",[s._v("=")]),a("mrow",[a("mo",{attrs:{fence:"true"}},[s._v("(")]),a("mn",[s._v("1")]),a("mo",[s._v("−")]),a("mi",[s._v("σ")]),a("mrow",[a("mo",{attrs:{fence:"true"}},[s._v("(")]),a("mo",[s._v("−")]),a("msubsup",[a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("u")]),a("mi",[s._v("k")]),a("mi",[s._v("T")])],1),a("msub",[a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("v")]),a("mi",[s._v("c")])],1),a("mo",{attrs:{fence:"true"}},[s._v(")")])],1),a("mo",{attrs:{fence:"true"}},[s._v(")")])],1),a("msub",[a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("v")]),a("mi",[s._v("c")])],1),a("mstyle",{attrs:{mathcolor:" #cc0000"}},[a("mtext",[s._v("\\nonumber")])],1)],1)],1)],1),a("mtd",{staticClass:"mtr-glue"}),a("mtd",{staticClass:"mml-eqn-num"})],1)],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("\\begin{align}\n&\\frac{\\partial J_{neg-sample}\\left(\\boldsymbol{v}_{c}, o, \\boldsymbol{U}\\right)}{\\partial \\boldsymbol{u}_{k}} \\nonumber \\\\\n&=\\left(1-\\sigma\\left(-\\boldsymbol{u}_{k}^{T} \\boldsymbol{v}_{c}\\right)\\right) \\boldsymbol{v}_{c} \\nonumber\n\\end{align}\n")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"4.114331em","vertical-align":"-1.8071655em"}}),a("span",{staticClass:"mtable"},[a("span",{staticClass:"col-align-r"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"2.3071655em"}},[a("span",{staticStyle:{top:"-4.3071655em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.427em"}}),a("span",{staticClass:"mord"})]),a("span",{staticStyle:{top:"-2.2798345em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.427em"}}),a("span",{staticClass:"mord"})])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"1.8071655em"}},[a("span")])])])]),a("span",{staticClass:"col-align-l"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"2.3071655em"}},[a("span",{staticStyle:{top:"-4.3071655em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.427em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mopen nulldelimiter"}),a("span",{staticClass:"mfrac"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"1.427em"}},[a("span",{staticStyle:{top:"-2.3139999999999996em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord",staticStyle:{"margin-right":"0.05556em"}},[s._v("∂")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol"},[s._v("u")])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.33610799999999996em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.03148em"}},[s._v("k")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])])])]),a("span",{staticStyle:{top:"-3.23em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"frac-line",staticStyle:{"border-bottom-width":"0.04em"}})]),a("span",{staticStyle:{top:"-3.677em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord",staticStyle:{"margin-right":"0.05556em"}},[s._v("∂")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.09618em"}},[s._v("J")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.3361079999999999em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.09618em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("n")]),a("span",{staticClass:"mord mathnormal mtight"},[s._v("e")]),a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.03588em"}},[s._v("g")]),a("span",{staticClass:"mbin mtight"},[s._v("−")]),a("span",{staticClass:"mord mathnormal mtight"},[s._v("s")]),a("span",{staticClass:"mord mathnormal mtight"},[s._v("am")]),a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.01968em"}},[s._v("pl")]),a("span",{staticClass:"mord mathnormal mtight"},[s._v("e")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.286108em"}},[a("span")])])])])]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"minner"},[a("span",{staticClass:"mopen delimcenter",staticStyle:{top:"0em"}},[s._v("(")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol",staticStyle:{"margin-right":"0.03704em"}},[s._v("v")])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("c")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])]),a("span",{staticClass:"mpunct"},[s._v(",")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"mord mathnormal"},[s._v("o")]),a("span",{staticClass:"mpunct"},[s._v(",")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol",staticStyle:{"margin-right":"0.11424em"}},[s._v("U")])])]),a("span",{staticClass:"mclose delimcenter",staticStyle:{top:"0em"}},[s._v(")")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.8360000000000001em"}},[a("span")])])])]),a("span",{staticClass:"mclose nulldelimiter"})]),a("span",{staticClass:"mord text",staticStyle:{color:"#cc0000"}},[a("span",{staticClass:"mord",staticStyle:{color:"#cc0000"}},[s._v("\\nonumber")])])])]),a("span",{staticStyle:{top:"-2.2798345em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.427em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"}),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mrel"},[s._v("=")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"minner"},[a("span",{staticClass:"mopen delimcenter",staticStyle:{top:"0em"}},[a("span",{staticClass:"delimsizing size1"},[s._v("(")])]),a("span",{staticClass:"mord"},[s._v("1")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),a("span",{staticClass:"mbin"},[s._v("−")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.03588em"}},[s._v("σ")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"minner"},[a("span",{staticClass:"mopen delimcenter",staticStyle:{top:"0em"}},[a("span",{staticClass:"delimsizing size1"},[s._v("(")])]),a("span",{staticClass:"mord"},[s._v("−")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol"},[s._v("u")])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.8913309999999999em"}},[a("span",{staticStyle:{top:"-2.4530000000000003em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.03148em"}},[s._v("k")])])])]),a("span",{staticStyle:{top:"-3.113em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.13889em"}},[s._v("T")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.247em"}},[a("span")])])])])]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol",staticStyle:{"margin-right":"0.03704em"}},[s._v("v")])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("c")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])]),a("span",{staticClass:"mclose delimcenter",staticStyle:{top:"0em"}},[a("span",{staticClass:"delimsizing size1"},[s._v(")")])])]),a("span",{staticClass:"mclose delimcenter",staticStyle:{top:"0em"}},[a("span",{staticClass:"delimsizing size1"},[s._v(")")])])]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol",staticStyle:{"margin-right":"0.03704em"}},[s._v("v")])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("c")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])]),a("span",{staticClass:"mord text",staticStyle:{color:"#cc0000"}},[a("span",{staticClass:"mord",staticStyle:{color:"#cc0000"}},[s._v("\\nonumber")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"1.8071655em"}},[a("span")])])])])])]),a("span",{staticClass:"tag"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"2.3071655em"}},[a("span",{staticStyle:{top:"-4.3071655em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.427em"}}),a("span",{staticClass:"eqn-num"})]),a("span",{staticStyle:{top:"-2.2798345em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.427em"}}),a("span",{staticClass:"eqn-num"})])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"1.8071655em"}},[a("span")])])])])])])])]),s._v(" "),a("h2",{attrs:{id:"window-loss"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#window-loss"}},[s._v("#")]),s._v(" window loss")]),s._v(" "),a("p",[s._v("上面写的损失函数，都是针对单个词对<c,o>的损失，而skip-gram采用的是滑动窗口机制，所以我们需要进一步计算一整个上下文窗口（context window）中的损失：")]),s._v(" "),a("p",[a("span",{staticClass:"katex-display"},[a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"}},[a("semantics",[a("mrow",[a("msub",[a("mi",[s._v("J")]),a("mtext",[s._v("skip-gram ")])],1),a("mrow",[a("mo",{attrs:{fence:"true"}},[s._v("(")]),a("msub",[a("mi",[s._v("v")]),a("mi",[s._v("c")])],1),a("mo",{attrs:{separator:"true"}},[s._v(",")]),a("msub",[a("mi",[s._v("w")]),a("mrow",[a("mi",[s._v("t")]),a("mo",[s._v("−")]),a("mi",[s._v("m")])],1)],1),a("mo",{attrs:{separator:"true"}},[s._v(",")]),a("mo",[s._v("…")]),a("msub",[a("mi",[s._v("w")]),a("mrow",[a("mi",[s._v("t")]),a("mo",[s._v("+")]),a("mi",[s._v("m")])],1)],1),a("mo",{attrs:{separator:"true"}},[s._v(",")]),a("mi",[s._v("U")]),a("mo",{attrs:{fence:"true"}},[s._v(")")])],1),a("mo",[s._v("=")]),a("munder",[a("mo",[s._v("∑")]),a("mrow",[a("mo",[s._v("−")]),a("mi",[s._v("m")]),a("mo",[s._v("≤")]),a("mi",[s._v("j")]),a("mo",[s._v("≤")]),a("mi",[s._v("m")])],1)],1),a("mi",[s._v("J")]),a("mrow",[a("mo",{attrs:{fence:"true"}},[s._v("(")]),a("msub",[a("mi",[s._v("v")]),a("mi",[s._v("c")])],1),a("mo",{attrs:{separator:"true"}},[s._v(",")]),a("msub",[a("mi",[s._v("w")]),a("mrow",[a("mi",[s._v("t")]),a("mo",[s._v("+")]),a("mi",[s._v("j")])],1)],1),a("mo",{attrs:{separator:"true"}},[s._v(",")]),a("mi",[s._v("U")]),a("mo",{attrs:{fence:"true"}},[s._v(")")])],1)],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("J_{\\text {skip-gram }}\\left(v_{c}, w_{t-m}, \\ldots w_{t+m}, U\\right)=\\sum_{-m \\leq j \\leq m} J\\left(v_{c}, w_{t+j}, U\\right)\n")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"1.036108em","vertical-align":"-0.286108em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.09618em"}},[s._v("J")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.3361079999999999em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.09618em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord text mtight"},[a("span",{staticClass:"mord mtight"},[s._v("skip-gram ")])])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.286108em"}},[a("span")])])])])]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"minner"},[a("span",{staticClass:"mopen delimcenter",staticStyle:{top:"0em"}},[s._v("(")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.03588em"}},[s._v("v")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.03588em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("c")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])]),a("span",{staticClass:"mpunct"},[s._v(",")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.02691em"}},[s._v("w")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.28055599999999997em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.02691em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("t")]),a("span",{staticClass:"mbin mtight"},[s._v("−")]),a("span",{staticClass:"mord mathnormal mtight"},[s._v("m")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.208331em"}},[a("span")])])])])]),a("span",{staticClass:"mpunct"},[s._v(",")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"minner"},[s._v("…")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.02691em"}},[s._v("w")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.28055599999999997em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.02691em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("t")]),a("span",{staticClass:"mbin mtight"},[s._v("+")]),a("span",{staticClass:"mord mathnormal mtight"},[s._v("m")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.208331em"}},[a("span")])])])])]),a("span",{staticClass:"mpunct"},[s._v(",")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.10903em"}},[s._v("U")]),a("span",{staticClass:"mclose delimcenter",staticStyle:{top:"0em"}},[s._v(")")])]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mrel"},[s._v("=")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}})]),a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"2.463782em","vertical-align":"-1.413777em"}}),a("span",{staticClass:"mop op-limits"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"1.050005em"}},[a("span",{staticStyle:{top:"-1.8723309999999997em","margin-left":"0em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.05em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mtight"},[s._v("−")]),a("span",{staticClass:"mord mathnormal mtight"},[s._v("m")]),a("span",{staticClass:"mrel mtight"},[s._v("≤")]),a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.05724em"}},[s._v("j")]),a("span",{staticClass:"mrel mtight"},[s._v("≤")]),a("span",{staticClass:"mord mathnormal mtight"},[s._v("m")])])])]),a("span",{staticStyle:{top:"-3.0500049999999996em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.05em"}}),a("span",[a("span",{staticClass:"mop op-symbol large-op"},[s._v("∑")])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"1.413777em"}},[a("span")])])])]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.09618em"}},[s._v("J")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"minner"},[a("span",{staticClass:"mopen delimcenter",staticStyle:{top:"0em"}},[s._v("(")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.03588em"}},[s._v("v")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.03588em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("c")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])]),a("span",{staticClass:"mpunct"},[s._v(",")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.02691em"}},[s._v("w")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.311664em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.02691em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("t")]),a("span",{staticClass:"mbin mtight"},[s._v("+")]),a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.05724em"}},[s._v("j")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.286108em"}},[a("span")])])])])]),a("span",{staticClass:"mpunct"},[s._v(",")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.10903em"}},[s._v("U")]),a("span",{staticClass:"mclose delimcenter",staticStyle:{top:"0em"}},[s._v(")")])])])])])])]),s._v(" "),a("p",[s._v("等式后面的那个J可以替换成naive-softmax loss或者negative sampling loss，这里不再赘述。")]),s._v(" "),a("h2",{attrs:{id:"word2vec的编程实现"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#word2vec的编程实现"}},[s._v("#")]),s._v(" Word2Vec的编程实现")]),s._v(" "),a("p",[s._v("这个就是cs224n作业2的编程部分了。")]),s._v(" "),a("p",[s._v("当然，我们肯定不是从零到一实现一个word2vec算法，这还是太复杂了，作业主要是填空的形式，让我们把算法的核心部分给填写了一下。至于很多系统的设计我们是不同操心的。")]),s._v(" "),a("p",[s._v("我们需要编写的，主要是这么四部分："),a("br"),s._v("\nA. naive softmax loss及其求导结果 "),a("br"),s._v("\nB. negative sampling loss及其求导结果 "),a("br"),s._v("\nC. 一个window的loss的计算 "),a("br"),s._v("\nD. SGD优化算法中的参数更新")]),s._v(" "),a("p",[s._v("其实这些部分，就是根据我们上面计算的各种求导结果来写，而且我们的求导结果已经是矩阵运算了，十分方便。我写的代码已经上传到github上："),a("br"),s._v("\nhttps://github.com/beyondguo/CS224n-notes-and-codes/tree/master/assignment2")]),s._v(" "),a("p",[s._v("我这里想单独记录一下一些编程技巧：")]),s._v(" "),a("ul",[a("li",[s._v("numpy中各种矩阵运算的维度问题")]),s._v(" "),a("li",[s._v("如何用Vectorization来替换掉低效的for训练。")])]),s._v(" "),a("h3",{attrs:{id:"python乘法、np-multiply-和np-dot"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#python乘法、np-multiply-和np-dot"}},[s._v("#")]),s._v(" python乘法、np.multiply()和np.dot()")]),s._v(" "),a("p",[s._v("一图以蔽之：")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/beyondguo/mdnice_pictures/2021-6-24/1624547866559-image.png",alt:""}})]),s._v(" "),a("p",[s._v("总之，np.multiply()和普通的乘法没有区别，在形状相同的情况下，它们都是“对应元素相乘”，保留原形状。当形状不一的时候，小矩阵会利用“传播机制”，乘到大矩阵上。")]),s._v(" "),a("p",[s._v("而np.dot则是正经的矩阵相乘，需要符合维数的限制，维度不对就会报错。唯一的特例就是两个向量进行点积，这个时候不用使用转置。")]),s._v(" "),a("h3",{attrs:{id:"关于vectorization"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#关于vectorization"}},[s._v("#")]),s._v(" 关于Vectorization")]),s._v(" "),a("p",[s._v("np中所有的函数都可以作用于标量、向量、矩阵，因此，如果需要对一个矩阵中所有的元素采取相同的函数动作，那可以直接把整个句子丢进np函数中。另外，我们在进行计算的时候，如果最后要求的对象是矩阵，那最好在推导的时候，就写成矩阵的形式，这样避免了很多不必要的for循环。")]),s._v(" "),a("p",[s._v("例如，在作业中，我们需要求一个J对U的导数，在求导时，我们前面已经计算好了：")]),s._v(" "),a("p",[a("span",{staticClass:"katex-display"},[a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"}},[a("semantics",[a("mtable",{attrs:{rowspacing:"0.2500em",columnalign:"right left right",columnspacing:"0em 1em"}},[a("mtr",[a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow")],1)],1),a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow",[a("mrow"),a("mfrac",[a("mrow",[a("mi",{attrs:{mathvariant:"normal"}},[s._v("∂")]),a("msub",[a("mi",[s._v("J")]),a("mrow",[a("mtext",[s._v("naive")]),a("mo",[s._v("−")]),a("mtext",[s._v("softmax")])],1)],1),a("mrow",[a("mo",{attrs:{fence:"true"}},[s._v("(")]),a("msub",[a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("v")]),a("mi",[s._v("c")])],1),a("mo",{attrs:{separator:"true"}},[s._v(",")]),a("mi",[s._v("o")]),a("mo",{attrs:{separator:"true"}},[s._v(",")]),a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("U")]),a("mo",{attrs:{fence:"true"}},[s._v(")")])],1)],1),a("mrow",[a("mi",{attrs:{mathvariant:"normal"}},[s._v("∂")]),a("msub",[a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("u")]),a("mi",[s._v("w")])],1)],1)],1)],1)],1)],1),a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow")],1)],1)],1),a("mtr",[a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow")],1)],1),a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow",[a("mrow"),a("mo",[s._v("=")]),a("mo",{attrs:{stretchy:"false"}},[s._v("(")]),a("msub",[a("mover",{attrs:{accent:"true"}},[a("mi",[s._v("y")]),a("mo",[s._v("^")])],1),a("mi",[s._v("w")])],1),a("mo",[s._v("−")]),a("msub",[a("mi",[s._v("y")]),a("mi",[s._v("w")])],1),a("mo",{attrs:{stretchy:"false"}},[s._v(")")]),a("msub",[a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("v")]),a("mi",[s._v("c")])],1)],1)],1)],1)],1)],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("\\begin{aligned}\n&\\frac{\\partial J_{\\text {naive}-\\text {softmax}}\\left(\\boldsymbol{v}_{c}, o, \\boldsymbol{U}\\right)}{\\partial \\boldsymbol{u}_{w}} & \\\\\n&=(\\hat{y}_w-y_w) \\boldsymbol{v}_{c}\n\\end{aligned}\n")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"4.063000000000001em","vertical-align":"-1.7815000000000003em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mtable"},[a("span",{staticClass:"col-align-r"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"2.2815000000000003em"}},[a("span",{staticStyle:{top:"-4.2815em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.427em"}}),a("span",{staticClass:"mord"})]),a("span",{staticStyle:{top:"-2.3055em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.427em"}}),a("span",{staticClass:"mord"})])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"1.7815000000000003em"}},[a("span")])])])]),a("span",{staticClass:"col-align-l"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"2.2815000000000003em"}},[a("span",{staticStyle:{top:"-4.2815em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.427em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mopen nulldelimiter"}),a("span",{staticClass:"mfrac"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"1.427em"}},[a("span",{staticStyle:{top:"-2.3139999999999996em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord",staticStyle:{"margin-right":"0.05556em"}},[s._v("∂")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol"},[s._v("u")])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.02691em"}},[s._v("w")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])])])]),a("span",{staticStyle:{top:"-3.23em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"frac-line",staticStyle:{"border-bottom-width":"0.04em"}})]),a("span",{staticStyle:{top:"-3.677em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord",staticStyle:{"margin-right":"0.05556em"}},[s._v("∂")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.09618em"}},[s._v("J")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.3361079999999999em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.09618em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord text mtight"},[a("span",{staticClass:"mord mtight"},[s._v("naive")])]),a("span",{staticClass:"mbin mtight"},[s._v("−")]),a("span",{staticClass:"mord text mtight"},[a("span",{staticClass:"mord mtight"},[s._v("softmax")])])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.208331em"}},[a("span")])])])])]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"minner"},[a("span",{staticClass:"mopen delimcenter",staticStyle:{top:"0em"}},[s._v("(")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol",staticStyle:{"margin-right":"0.03704em"}},[s._v("v")])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("c")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])]),a("span",{staticClass:"mpunct"},[s._v(",")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"mord mathnormal"},[s._v("o")]),a("span",{staticClass:"mpunct"},[s._v(",")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol",staticStyle:{"margin-right":"0.11424em"}},[s._v("U")])])]),a("span",{staticClass:"mclose delimcenter",staticStyle:{top:"0em"}},[s._v(")")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.8360000000000001em"}},[a("span")])])])]),a("span",{staticClass:"mclose nulldelimiter"})])])]),a("span",{staticStyle:{top:"-2.3055em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.427em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"}),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mrel"},[s._v("=")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mopen"},[s._v("(")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord accent"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.69444em"}},[a("span",{staticStyle:{top:"-3em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.03588em"}},[s._v("y")])]),a("span",{staticStyle:{top:"-3em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"accent-body",staticStyle:{left:"-0.19444em"}},[a("span",{staticClass:"mord"},[s._v("^")])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.19444em"}},[a("span")])])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.03588em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.02691em"}},[s._v("w")])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),a("span",{staticClass:"mbin"},[s._v("−")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.03588em"}},[s._v("y")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.03588em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.02691em"}},[s._v("w")])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])]),a("span",{staticClass:"mclose"},[s._v(")")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol",staticStyle:{"margin-right":"0.03704em"}},[s._v("v")])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("c")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"1.7815000000000003em"}},[a("span")])])])]),a("span",{staticClass:"arraycolsep",staticStyle:{width:"1em"}}),a("span",{staticClass:"col-align-r"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"2.2815000000000003em"}},[a("span",{staticStyle:{top:"-4.2815em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.427em"}}),a("span",{staticClass:"mord"})])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.28149999999999986em"}},[a("span")])])])])])])])])])])]),s._v(" "),a("p",[s._v("那J对U的导数，就是把U的每一列的导数求出来，再拼起来。\n但是，其实我们可以直接把这个过程写成矩阵的形式：")]),s._v(" "),a("p",[a("span",{staticClass:"katex-display"},[a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"}},[a("semantics",[a("mtable",{attrs:{rowspacing:"0.2500em",columnalign:"right left right",columnspacing:"0em 1em"}},[a("mtr",[a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow")],1)],1),a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow",[a("mrow"),a("mfrac",[a("mrow",[a("mi",{attrs:{mathvariant:"normal"}},[s._v("∂")]),a("msub",[a("mi",[s._v("J")]),a("mrow",[a("mtext",[s._v("naive")]),a("mo",[s._v("−")]),a("mtext",[s._v("softmax")])],1)],1),a("mrow",[a("mo",{attrs:{fence:"true"}},[s._v("(")]),a("msub",[a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("v")]),a("mi",[s._v("c")])],1),a("mo",{attrs:{separator:"true"}},[s._v(",")]),a("mi",[s._v("o")]),a("mo",{attrs:{separator:"true"}},[s._v(",")]),a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("U")]),a("mo",{attrs:{fence:"true"}},[s._v(")")])],1)],1),a("mrow",[a("mi",{attrs:{mathvariant:"normal"}},[s._v("∂")]),a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("U")])],1)],1)],1)],1)],1),a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow")],1)],1)],1),a("mtr",[a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow")],1)],1),a("mtd",[a("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[a("mrow",[a("mrow"),a("mo",[s._v("=")]),a("msub",[a("mi",{attrs:{mathvariant:"bold-italic"}},[s._v("v")]),a("mi",[s._v("c")])],1),a("mo",{attrs:{stretchy:"false"}},[s._v("(")]),a("mover",{attrs:{accent:"true"}},[a("mi",[s._v("y")]),a("mo",[s._v("^")])],1),a("mo",[s._v("−")]),a("mi",[s._v("y")]),a("msup",[a("mo",{attrs:{stretchy:"false"}},[s._v(")")]),a("mi",[s._v("T")])],1)],1)],1)],1)],1)],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("\\begin{aligned}\n&\\frac{\\partial J_{\\text {naive}-\\text {softmax}}\\left(\\boldsymbol{v}_{c}, o, \\boldsymbol{U}\\right)}{\\partial \\boldsymbol{U}} & \\\\\n&=\\boldsymbol{v}_{c}(\\hat{y}-y)^T\n\\end{aligned}\n")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"3.9643310000000005em","vertical-align":"-1.7321655000000002em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mtable"},[a("span",{staticClass:"col-align-r"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"2.2321655000000002em"}},[a("span",{staticStyle:{top:"-4.2321655em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.427em"}}),a("span",{staticClass:"mord"})]),a("span",{staticStyle:{top:"-2.3548345em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.427em"}}),a("span",{staticClass:"mord"})])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"1.7321655000000002em"}},[a("span")])])])]),a("span",{staticClass:"col-align-l"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"2.2321655000000002em"}},[a("span",{staticStyle:{top:"-4.2321655em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.427em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mopen nulldelimiter"}),a("span",{staticClass:"mfrac"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"1.427em"}},[a("span",{staticStyle:{top:"-2.314em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord",staticStyle:{"margin-right":"0.05556em"}},[s._v("∂")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol",staticStyle:{"margin-right":"0.11424em"}},[s._v("U")])])])])]),a("span",{staticStyle:{top:"-3.23em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"frac-line",staticStyle:{"border-bottom-width":"0.04em"}})]),a("span",{staticStyle:{top:"-3.677em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord",staticStyle:{"margin-right":"0.05556em"}},[s._v("∂")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.09618em"}},[s._v("J")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.3361079999999999em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.09618em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord text mtight"},[a("span",{staticClass:"mord mtight"},[s._v("naive")])]),a("span",{staticClass:"mbin mtight"},[s._v("−")]),a("span",{staticClass:"mord text mtight"},[a("span",{staticClass:"mord mtight"},[s._v("softmax")])])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.208331em"}},[a("span")])])])])]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"minner"},[a("span",{staticClass:"mopen delimcenter",staticStyle:{top:"0em"}},[s._v("(")]),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol",staticStyle:{"margin-right":"0.03704em"}},[s._v("v")])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("c")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])]),a("span",{staticClass:"mpunct"},[s._v(",")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"mord mathnormal"},[s._v("o")]),a("span",{staticClass:"mpunct"},[s._v(",")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol",staticStyle:{"margin-right":"0.11424em"}},[s._v("U")])])]),a("span",{staticClass:"mclose delimcenter",staticStyle:{top:"0em"}},[s._v(")")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.686em"}},[a("span")])])])]),a("span",{staticClass:"mclose nulldelimiter"})])])]),a("span",{staticStyle:{top:"-2.3548345em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.427em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"}),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mrel"},[s._v("=")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord"},[a("span",{staticClass:"mord boldsymbol",staticStyle:{"margin-right":"0.03704em"}},[s._v("v")])])]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mtight"},[a("span",{staticClass:"mord mathnormal mtight"},[s._v("c")])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])]),a("span",{staticClass:"mopen"},[s._v("(")]),a("span",{staticClass:"mord accent"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.69444em"}},[a("span",{staticStyle:{top:"-3em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.03588em"}},[s._v("y")])]),a("span",{staticStyle:{top:"-3em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),a("span",{staticClass:"accent-body",staticStyle:{left:"-0.19444em"}},[a("span",{staticClass:"mord"},[s._v("^")])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.19444em"}},[a("span")])])])]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),a("span",{staticClass:"mbin"},[s._v("−")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),a("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.03588em"}},[s._v("y")]),a("span",{staticClass:"mclose"},[a("span",{staticClass:"mclose"},[s._v(")")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.8913309999999999em"}},[a("span",{staticStyle:{top:"-3.113em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.13889em"}},[s._v("T")])])])])])])])])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"1.7321655000000002em"}},[a("span")])])])]),a("span",{staticClass:"arraycolsep",staticStyle:{width:"1em"}}),a("span",{staticClass:"col-align-r"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"2.2321655000000002em"}},[a("span",{staticStyle:{top:"-4.2321655em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"3.427em"}}),a("span",{staticClass:"mord"})])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.1808344999999999em"}},[a("span")])])])])])])])])])])]),s._v(" "),a("p",[s._v("下面两张图展示了我们的变换过程：")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/beyondguo/mdnice_pictures/2021-6-24/1624547893283-image.png",alt:""}})]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/beyondguo/mdnice_pictures/2021-6-24/1624547900820-image.png",alt:""}})]),s._v(" "),a("p",[s._v("因此，如果按照for循环的方式，代码就是分别对U的每一个向量"),a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[a("semantics",[a("mrow",[a("msub",[a("mi",[s._v("u")]),a("mi",[s._v("w")])],1)],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("u_w")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"0.58056em","vertical-align":"-0.15em"}}),a("span",{staticClass:"mord"},[a("span",{staticClass:"mord mathnormal"},[s._v("u")]),a("span",{staticClass:"msupsub"},[a("span",{staticClass:"vlist-t vlist-t2"},[a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[a("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"0em","margin-right":"0.05em"}},[a("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),a("span",{staticClass:"sizing reset-size6 size3 mtight"},[a("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.02691em"}},[s._v("w")])])])]),a("span",{staticClass:"vlist-s"},[s._v("​")])]),a("span",{staticClass:"vlist-r"},[a("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[a("span")])])])])])])])]),s._v("求导之后再拼成一个矩阵：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("gradU = np.array([v_c*(softmax(np.dot(U.T,v_c))[x]-int(x==o)) \\\nfor x in range(U.shape[0])])\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("而如果使用我们前面算出来的矩阵的表示形式，那代码就是这样：")]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[s._v("gradOutsideVecs "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" np"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("dot"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("y_hat"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("y"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("reshape"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("v_c"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("reshape"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# (V,),(d,)--\x3e(V,d)")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("后者的执行效率会高很多。")]),s._v(" "),a("h3",{attrs:{id:"numpy其他的一些有趣有用的功能"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#numpy其他的一些有趣有用的功能"}},[s._v("#")]),s._v(" numpy其他的一些有趣有用的功能")]),s._v(" "),a("p",[s._v("这里列举两个我觉得很使用的功能吧：")]),s._v(" "),a("ol",[a("li",[s._v("通过一个array直接取出ndarray对象中一系列指定序号的元素")])]),s._v(" "),a("p",[s._v("下面的两个例子：")]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[s._v("a "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" np"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("array"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("40")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("70")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nindices "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" np"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("array"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\na"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("indices"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("输出："),a("code",[s._v("array([ 0, 20, 40, 60])")])]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[s._v("A "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" np"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("array"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n              "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n              "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nindices "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" np"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("array"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nA"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("indices"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("输出：\n"),a("code",[s._v("array([[1, 1, 1],[3, 3, 3]])")])]),s._v(" "),a("p",[s._v("无论是数组还是矩阵，都可以直接取。需要注意的是，这里的indices必须是np.array的格式。")]),s._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[s._v("通过at函数往指定位置进行运算")])]),s._v(" "),a("p",[s._v("比如我们有一个大矩阵，我们希望向其中的某一些列中加上一堆值。\n例如：")]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[s._v("C "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" np"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("zeros"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\ntemp "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" np"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ones"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'C:\\n'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("C"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'temp:\\n'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("temp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("看一看C和temp是什么：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("C:\n [[0. 0. 0.]\n [0. 0. 0.]\n [0. 0. 0.]\n [0. 0. 0.]\n [0. 0. 0.]]\ntemp:\n [[1. 1. 1.]\n [1. 1. 1.]]\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("p",[s._v("接下来，我们想temp中的两个向量的值，加到C中的第0行，第2行，我们只用写：")]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[s._v("np"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("add"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("at"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("C"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("temp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nC\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("输出：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("array([[1., 1., 1.],\n       [0., 0., 0.],\n       [1., 1., 1.],\n       [0., 0., 0.],\n       [0., 0., 0.]])\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("看！就是这么方便！\n其中，"),a("code",[s._v("add")]),s._v("可以替换成其他各种运算。")]),s._v(" "),a("hr"),s._v(" "),a("p",[s._v("以上。")])],1)}),[],!1,null,null,null);t.default=l.exports}}]);